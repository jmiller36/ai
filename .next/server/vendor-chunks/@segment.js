"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@segment";
exports.ids = ["vendor-chunks/@segment"];
exports.modules = {

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatch: () => (/* binding */ dispatch),\n/* harmony export */   getDelay: () => (/* binding */ getDelay)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callback */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n\n/* The amount of time in ms to wait before invoking the callback. */\nvar getDelay = function (startTimeInEpochMS, timeoutInMS) {\n    var elapsedTime = Date.now() - startTimeInEpochMS;\n    // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n    return Math.max((timeoutInMS !== null && timeoutInMS !== void 0 ? timeoutInMS : 300) - elapsedTime, 0);\n};\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nfunction dispatch(ctx, queue, emitter, options) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var startTime, dispatched;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    emitter.emit('dispatch_start', ctx);\n                    startTime = Date.now();\n                    if (!queue.isEmpty()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, queue.dispatchSingle(ctx)];\n                case 1:\n                    dispatched = _a.sent();\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, queue.dispatch(ctx)];\n                case 3:\n                    dispatched = _a.sent();\n                    _a.label = 4;\n                case 4:\n                    if (!(options === null || options === void 0 ? void 0 : options.callback)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, (0,_callback__WEBPACK_IMPORTED_MODULE_1__.invokeCallback)(dispatched, options.callback, getDelay(startTime, options.timeout))];\n                case 5:\n                    dispatched = _a.sent();\n                    _a.label = 6;\n                case 6:\n                    if (options === null || options === void 0 ? void 0 : options.debug) {\n                        dispatched.flush();\n                    }\n                    return [2 /*return*/, dispatched];\n            }\n        });\n    });\n}\n//# sourceMappingURL=dispatch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDRjtBQUM3QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzP2Q0YTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52b2tlQ2FsbGJhY2sgfSBmcm9tICcuLi9jYWxsYmFjayc7XG4vKiBUaGUgYW1vdW50IG9mIHRpbWUgaW4gbXMgdG8gd2FpdCBiZWZvcmUgaW52b2tpbmcgdGhlIGNhbGxiYWNrLiAqL1xuZXhwb3J0IHZhciBnZXREZWxheSA9IGZ1bmN0aW9uIChzdGFydFRpbWVJbkVwb2NoTVMsIHRpbWVvdXRJbk1TKSB7XG4gICAgdmFyIGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZUluRXBvY2hNUztcbiAgICAvLyBpbmNyZWFzaW5nIHRoZSB0aW1lb3V0IGluY3JlYXNlcyB0aGUgZGVsYXkgYnkgYWxtb3N0IHRoZSBzYW1lIGFtb3VudCAtLSB0aGlzIGlzIHdlaXJkIGxlZ2FjeSBiZWhhdmlvci5cbiAgICByZXR1cm4gTWF0aC5tYXgoKHRpbWVvdXRJbk1TICE9PSBudWxsICYmIHRpbWVvdXRJbk1TICE9PSB2b2lkIDAgPyB0aW1lb3V0SW5NUyA6IDMwMCkgLSBlbGFwc2VkVGltZSwgMCk7XG59O1xuLyoqXG4gKiBQdXNoIGFuIGV2ZW50IGludG8gdGhlIGRpc3BhdGNoIHF1ZXVlIGFuZCBpbnZva2UgYW55IGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0gZXZlbnQgLSBTZWdtZW50IGV2ZW50IHRvIGVucXVldWUuXG4gKiBAcGFyYW0gcXVldWUgLSBRdWV1ZSB0byBkaXNwYXRjaCBhZ2FpbnN0LlxuICogQHBhcmFtIGVtaXR0ZXIgLSBUaGlzIGlzIHR5cGljYWxseSBhbiBpbnN0YW5jZSBvZiBcIkFuYWx5dGljc1wiIC0tIHVzZWQgZm9yIG1ldHJpY3MgLyBwcm9ncmVzcyBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSBvcHRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChjdHgsIHF1ZXVlLCBlbWl0dGVyLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhcnRUaW1lLCBkaXNwYXRjaGVkO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Rpc3BhdGNoX3N0YXJ0JywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWV1ZS5pc0VtcHR5KCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBxdWV1ZS5kaXNwYXRjaFNpbmdsZShjdHgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0IC8qeWllbGQqLywgcXVldWUuZGlzcGF0Y2goY3R4KV07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FsbGJhY2spKSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW52b2tlQ2FsbGJhY2soZGlzcGF0Y2hlZCwgb3B0aW9ucy5jYWxsYmFjaywgZ2V0RGVsYXkoc3RhcnRUaW1lLCBvcHRpb25zLnRpbWVvdXQpKV07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRpc3BhdGNoZWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3BhdGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/callback/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invokeCallback: () => (/* binding */ invokeCallback),\n/* harmony export */   pTimeout: () => (/* binding */ pTimeout),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nfunction pTimeout(promise, timeout) {\n    return new Promise(function (resolve, reject) {\n        var timeoutId = setTimeout(function () {\n            reject(Error('Promise timed out'));\n        }, timeout);\n        promise\n            .then(function (val) {\n            clearTimeout(timeoutId);\n            return resolve(val);\n        })\n            .catch(reject);\n    });\n}\nfunction sleep(timeoutInMs) {\n    return new Promise(function (resolve) { return setTimeout(resolve, timeoutInMs); });\n}\n/**\n * @param ctx\n * @param callback - the function to invoke\n * @param delay - aka \"timeout\". The amount of time in ms to wait before invoking the callback.\n */\nfunction invokeCallback(ctx, callback, delay) {\n    var cb = function () {\n        try {\n            return Promise.resolve(callback(ctx));\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    };\n    return (sleep(delay)\n        // pTimeout ensures that the callback can't cause the context to hang\n        .then(function () { return pTimeout(cb(), 1000); })\n        .catch(function (err) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.log('warn', 'Callback Error', { error: err });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stats.increment('callback_error');\n    })\n        .then(function () { return ctx; }));\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQLDRDQUE0QywwQ0FBMEM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQSxzRkFBc0YsWUFBWTtBQUNsRztBQUNBLEtBQUs7QUFDTCw0QkFBNEIsYUFBYTtBQUN6QztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanM/MjFjYiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcFRpbWVvdXQocHJvbWlzZSwgdGltZW91dCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdChFcnJvcignUHJvbWlzZSB0aW1lZCBvdXQnKSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzbGVlcCh0aW1lb3V0SW5Ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0SW5Ncyk7IH0pO1xufVxuLyoqXG4gKiBAcGFyYW0gY3R4XG4gKiBAcGFyYW0gY2FsbGJhY2sgLSB0aGUgZnVuY3Rpb24gdG8gaW52b2tlXG4gKiBAcGFyYW0gZGVsYXkgLSBha2EgXCJ0aW1lb3V0XCIuIFRoZSBhbW91bnQgb2YgdGltZSBpbiBtcyB0byB3YWl0IGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhjdHgsIGNhbGxiYWNrLCBkZWxheSkge1xuICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FsbGJhY2soY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAoc2xlZXAoZGVsYXkpXG4gICAgICAgIC8vIHBUaW1lb3V0IGVuc3VyZXMgdGhhdCB0aGUgY2FsbGJhY2sgY2FuJ3QgY2F1c2UgdGhlIGNvbnRleHQgdG8gaGFuZ1xuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBwVGltZW91dChjYigpLCAxMDAwKTsgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LmxvZygnd2FybicsICdDYWxsYmFjayBFcnJvcicsIHsgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LnN0YXRzLmluY3JlbWVudCgnY2FsbGJhY2tfZXJyb3InKTtcbiAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBjdHg7IH0pKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/context/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextCancelation: () => (/* binding */ ContextCancelation),\n/* harmony export */   CoreContext: () => (/* binding */ CoreContext)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dset */ \"(ssr)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../logger */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stats */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n\n\n\n\nvar ContextCancelation = /** @class */ (function () {\n    function ContextCancelation(options) {\n        var _a, _b, _c;\n        this.retry = (_a = options.retry) !== null && _a !== void 0 ? _a : true;\n        this.type = (_b = options.type) !== null && _b !== void 0 ? _b : 'plugin Error';\n        this.reason = (_c = options.reason) !== null && _c !== void 0 ? _c : '';\n    }\n    return ContextCancelation;\n}());\n\nvar CoreContext = /** @class */ (function () {\n    function CoreContext(event, id, stats, logger) {\n        if (id === void 0) { id = (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(); }\n        if (stats === void 0) { stats = new _stats__WEBPACK_IMPORTED_MODULE_2__.NullStats(); }\n        if (logger === void 0) { logger = new _logger__WEBPACK_IMPORTED_MODULE_3__.CoreLogger(); }\n        this.attempts = 0;\n        this.event = event;\n        this._id = id;\n        this.logger = logger;\n        this.stats = stats;\n    }\n    CoreContext.system = function () {\n        // This should be overridden by the subclass to return an instance of the subclass.\n    };\n    CoreContext.prototype.isSame = function (other) {\n        return other.id === this.id;\n    };\n    CoreContext.prototype.cancel = function (error) {\n        if (error) {\n            throw error;\n        }\n        throw new ContextCancelation({ reason: 'Context Cancel' });\n    };\n    CoreContext.prototype.log = function (level, message, extras) {\n        this.logger.log(level, message, extras);\n    };\n    Object.defineProperty(CoreContext.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreContext.prototype.updateEvent = function (path, val) {\n        var _a;\n        // Don't allow integrations that are set to false to be overwritten with integration settings.\n        if (path.split('.')[0] === 'integrations') {\n            var integrationName = path.split('.')[1];\n            if (((_a = this.event.integrations) === null || _a === void 0 ? void 0 : _a[integrationName]) === false) {\n                return this.event;\n            }\n        }\n        (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(this.event, path, val);\n        return this.event;\n    };\n    CoreContext.prototype.failedDelivery = function () {\n        return this._failedDelivery;\n    };\n    CoreContext.prototype.setFailedDelivery = function (options) {\n        this._failedDelivery = options;\n    };\n    CoreContext.prototype.logs = function () {\n        return this.logger.logs;\n    };\n    CoreContext.prototype.flush = function () {\n        this.logger.flush();\n        this.stats.flush();\n    };\n    CoreContext.prototype.toJSON = function () {\n        return {\n            id: this._id,\n            event: this.event,\n            logs: this.logger.logs,\n            metrics: this.stats.metrics,\n        };\n    };\n    return CoreContext;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFDZDtBQUNXO0FBQ0Y7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNkI7QUFDOUI7QUFDQTtBQUNBLDZCQUE2QixLQUFLLGdEQUFJO0FBQ3RDLGdDQUFnQyxZQUFZLDZDQUFTO0FBQ3JELGlDQUFpQyxhQUFhLCtDQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBCQUEwQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3NCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcz8wM2IzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICdAbHVrZWVkL3V1aWQnO1xuaW1wb3J0IHsgZHNldCB9IGZyb20gJ2RzZXQnO1xuaW1wb3J0IHsgQ29yZUxvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBOdWxsU3RhdHMgfSBmcm9tICcuLi9zdGF0cyc7XG52YXIgQ29udGV4dENhbmNlbGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRleHRDYW5jZWxhdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0aGlzLnJldHJ5ID0gKF9hID0gb3B0aW9ucy5yZXRyeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZTtcbiAgICAgICAgdGhpcy50eXBlID0gKF9iID0gb3B0aW9ucy50eXBlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAncGx1Z2luIEVycm9yJztcbiAgICAgICAgdGhpcy5yZWFzb24gPSAoX2MgPSBvcHRpb25zLnJlYXNvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgfVxuICAgIHJldHVybiBDb250ZXh0Q2FuY2VsYXRpb247XG59KCkpO1xuZXhwb3J0IHsgQ29udGV4dENhbmNlbGF0aW9uIH07XG52YXIgQ29yZUNvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUNvbnRleHQoZXZlbnQsIGlkLCBzdGF0cywgbG9nZ2VyKSB7XG4gICAgICAgIGlmIChpZCA9PT0gdm9pZCAwKSB7IGlkID0gdXVpZCgpOyB9XG4gICAgICAgIGlmIChzdGF0cyA9PT0gdm9pZCAwKSB7IHN0YXRzID0gbmV3IE51bGxTdGF0cygpOyB9XG4gICAgICAgIGlmIChsb2dnZXIgPT09IHZvaWQgMCkgeyBsb2dnZXIgPSBuZXcgQ29yZUxvZ2dlcigpOyB9XG4gICAgICAgIHRoaXMuYXR0ZW1wdHMgPSAwO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLnN0YXRzID0gc3RhdHM7XG4gICAgfVxuICAgIENvcmVDb250ZXh0LnN5c3RlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSB0aGUgc3ViY2xhc3MgdG8gcmV0dXJuIGFuIGluc3RhbmNlIG9mIHRoZSBzdWJjbGFzcy5cbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5pc1NhbWUgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyLmlkID09PSB0aGlzLmlkO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oeyByZWFzb246ICdDb250ZXh0IENhbmNlbCcgfSk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvcmVDb250ZXh0LnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnVwZGF0ZUV2ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZhbCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIERvbid0IGFsbG93IGludGVncmF0aW9ucyB0aGF0IGFyZSBzZXQgdG8gZmFsc2UgdG8gYmUgb3ZlcndyaXR0ZW4gd2l0aCBpbnRlZ3JhdGlvbiBzZXR0aW5ncy5cbiAgICAgICAgaWYgKHBhdGguc3BsaXQoJy4nKVswXSA9PT0gJ2ludGVncmF0aW9ucycpIHtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvbk5hbWUgPSBwYXRoLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbaW50ZWdyYXRpb25OYW1lXSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZHNldCh0aGlzLmV2ZW50LCBwYXRoLCB2YWwpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudDtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5mYWlsZWREZWxpdmVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhaWxlZERlbGl2ZXJ5O1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnNldEZhaWxlZERlbGl2ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fZmFpbGVkRGVsaXZlcnkgPSBvcHRpb25zO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmxvZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2dlci5sb2dzO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5mbHVzaCgpO1xuICAgICAgICB0aGlzLnN0YXRzLmZsdXNoKCk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgICAgICBsb2dzOiB0aGlzLmxvZ2dlci5sb2dzLFxuICAgICAgICAgICAgbWV0cmljczogdGhpcy5zdGF0cy5tZXRyaWNzLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVDb250ZXh0O1xufSgpKTtcbmV4cG9ydCB7IENvcmVDb250ZXh0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/events/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/events/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventFactory: () => (/* binding */ CoreEventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dset */ \"(ssr)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _utils_pick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/pick */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\");\n/* harmony import */ var _validation_assertions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validation/assertions */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n\n\n\n\n\n/**\n * Internal settings object that is used internally by the factory\n */\nvar InternalEventFactorySettings = /** @class */ (function () {\n    function InternalEventFactorySettings(settings) {\n        var _a, _b;\n        this.settings = settings;\n        this.createMessageId = settings.createMessageId;\n        this.onEventMethodCall = (_a = settings.onEventMethodCall) !== null && _a !== void 0 ? _a : (function () { });\n        this.onFinishedEvent = (_b = settings.onFinishedEvent) !== null && _b !== void 0 ? _b : (function () { });\n    }\n    return InternalEventFactorySettings;\n}());\nvar CoreEventFactory = /** @class */ (function () {\n    function CoreEventFactory(settings) {\n        this.settings = new InternalEventFactorySettings(settings);\n    }\n    CoreEventFactory.prototype.track = function (event, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'track', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { event: event, type: 'track', properties: properties !== null && properties !== void 0 ? properties : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations) }));\n    };\n    CoreEventFactory.prototype.page = function (category, page, properties, options, globalIntegrations) {\n        var _a;\n        this.settings.onEventMethodCall({ type: 'page', options: options });\n        var event = {\n            type: 'page',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n            event.properties = (_a = event.properties) !== null && _a !== void 0 ? _a : {};\n            event.properties.category = category;\n        }\n        if (page !== null) {\n            event.name = page;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.screen = function (category, screen, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'screen', options: options });\n        var event = {\n            type: 'screen',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n        }\n        if (screen !== null) {\n            event.name = screen;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.identify = function (userId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'identify', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'identify', userId: userId, traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: globalIntegrations }));\n    };\n    CoreEventFactory.prototype.group = function (groupId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'group', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'group', traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations), //\n            groupId: groupId }));\n    };\n    CoreEventFactory.prototype.alias = function (to, from, // TODO: can we make this undefined?\n    options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'alias', options: options });\n        var base = {\n            userId: to,\n            type: 'alias',\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (from !== null) {\n            base.previousId = from;\n        }\n        if (to === undefined) {\n            return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, base), this.baseEvent()));\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), base));\n    };\n    CoreEventFactory.prototype.baseEvent = function () {\n        return {\n            integrations: {},\n            options: {},\n        };\n    };\n    /**\n     * Builds the context part of an event based on \"foreign\" keys that\n     * are provided in the `Options` parameter for an Event\n     */\n    CoreEventFactory.prototype.context = function (options) {\n        var _a;\n        /**\n         * If the event options are known keys from this list, we move them to the top level of the event.\n         * Any other options are moved to context.\n         */\n        var eventOverrideKeys = [\n            'userId',\n            'anonymousId',\n            'timestamp',\n            'messageId',\n        ];\n        delete options['integrations'];\n        var providedOptionsKeys = Object.keys(options);\n        var context = (_a = options.context) !== null && _a !== void 0 ? _a : {};\n        var eventOverrides = {};\n        providedOptionsKeys.forEach(function (key) {\n            if (key === 'context') {\n                return;\n            }\n            if (eventOverrideKeys.includes(key)) {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(eventOverrides, key, options[key]);\n            }\n            else {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(context, key, options[key]);\n            }\n        });\n        return [context, eventOverrides];\n    };\n    CoreEventFactory.prototype.normalize = function (event) {\n        var _a, _b;\n        var integrationBooleans = Object.keys((_a = event.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (integrationNames, name) {\n            var _a;\n            var _b;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationNames), (_a = {}, _a[name] = Boolean((_b = event.integrations) === null || _b === void 0 ? void 0 : _b[name]), _a));\n        }, {});\n        // filter out any undefined options\n        event.options = (0,_utils_pick__WEBPACK_IMPORTED_MODULE_2__.pickBy)(event.options || {}, function (_, value) {\n            return value !== undefined;\n        });\n        // This is pretty trippy, but here's what's going on:\n        // - a) We don't pass initial integration options as part of the event, only if they're true or false\n        // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n        // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n        var allIntegrations = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationBooleans), (_b = event.options) === null || _b === void 0 ? void 0 : _b.integrations);\n        var _c = event.options\n            ? this.context(event.options)\n            : [], context = _c[0], overrides = _c[1];\n        var options = event.options, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__rest)(event, [\"options\"]);\n        var evt = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ timestamp: new Date() }, rest), { context: context, integrations: allIntegrations }), overrides), { messageId: options.messageId || this.settings.createMessageId() });\n        this.settings.onFinishedEvent(evt);\n        (0,_validation_assertions__WEBPACK_IMPORTED_MODULE_3__.validateEvent)(evt);\n        return evt;\n    };\n    return CoreEventFactory;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBQ1o7QUFDRDtBQUNXO0FBQ2tCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvSEFBb0g7QUFDcEgsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0UsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyx1QkFBdUIsdUdBQXVHLFdBQVcsK0NBQVEsR0FBRywwQkFBMEIsK0NBQVEsR0FBRyx1QkFBdUI7QUFDbFE7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdDQUFnQztBQUMxRTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUNsRDtBQUNBO0FBQ0EsMENBQTBDLGtDQUFrQztBQUM1RTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQSwwQ0FBMEMsb0NBQW9DO0FBQzlFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLDRGQUE0RixXQUFXLCtDQUFRLEdBQUcsOENBQThDO0FBQ3pPO0FBQ0E7QUFDQSwwQ0FBMEMsaUNBQWlDO0FBQzNFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLHlFQUF5RSxXQUFXLCtDQUFRLEdBQUcsMEJBQTBCLCtDQUFRLEdBQUc7QUFDN00sOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDdEQ7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qix1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkc7QUFDM0c7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsNkJBQTZCO0FBQ3BFLFNBQVMsSUFBSTtBQUNiO0FBQ0Esd0JBQXdCLG1EQUFNLG9CQUFvQjtBQUNsRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDZDQUFNO0FBQ2xELGtCQUFrQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLHVCQUF1QixXQUFXLGlEQUFpRCxpQkFBaUIsaUVBQWlFO0FBQzdOO0FBQ0EsUUFBUSxxRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzP2ViOGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IGRzZXQgfSBmcm9tICdkc2V0JztcbmltcG9ydCB7IHBpY2tCeSB9IGZyb20gJy4uL3V0aWxzL3BpY2snO1xuaW1wb3J0IHsgdmFsaWRhdGVFdmVudCB9IGZyb20gJy4uL3ZhbGlkYXRpb24vYXNzZXJ0aW9ucyc7XG4vKipcbiAqIEludGVybmFsIHNldHRpbmdzIG9iamVjdCB0aGF0IGlzIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgZmFjdG9yeVxuICovXG52YXIgSW50ZXJuYWxFdmVudEZhY3RvcnlTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbnRlcm5hbEV2ZW50RmFjdG9yeVNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5jcmVhdGVNZXNzYWdlSWQgPSBzZXR0aW5ncy5jcmVhdGVNZXNzYWdlSWQ7XG4gICAgICAgIHRoaXMub25FdmVudE1ldGhvZENhbGwgPSAoX2EgPSBzZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHRoaXMub25GaW5pc2hlZEV2ZW50ID0gKF9iID0gc2V0dGluZ3Mub25GaW5pc2hlZEV2ZW50KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoZnVuY3Rpb24gKCkgeyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3M7XG59KCkpO1xudmFyIENvcmVFdmVudEZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50RmFjdG9yeShzZXR0aW5ncykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gbmV3IEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgIH1cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChldmVudCwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAndHJhY2snLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCB7IGV2ZW50OiBldmVudCwgdHlwZTogJ3RyYWNrJywgcHJvcGVydGllczogcHJvcGVydGllcyAhPT0gbnVsbCAmJiBwcm9wZXJ0aWVzICE9PSB2b2lkIDAgPyBwcm9wZXJ0aWVzIDoge30sIG9wdGlvbnM6IF9fYXNzaWduKHt9LCBvcHRpb25zKSwgaW50ZWdyYXRpb25zOiBfX2Fzc2lnbih7fSwgZ2xvYmFsSW50ZWdyYXRpb25zKSB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ3BhZ2UnLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICB2YXIgZXZlbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiAncGFnZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzID0gKF9hID0gZXZlbnQucHJvcGVydGllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50Lm5hbWUgPSBwYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGV2ZW50KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5zY3JlZW4gPSBmdW5jdGlvbiAoY2F0ZWdvcnksIHNjcmVlbiwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAnc2NyZWVuJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgdmFyIGV2ZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NjcmVlbicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjcmVlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXZlbnQubmFtZSA9IHNjcmVlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCBldmVudCkpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50RmFjdG9yeS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAodXNlcklkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2lkZW50aWZ5Jywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnaWRlbnRpZnknLCB1c2VySWQ6IHVzZXJJZCwgdHJhaXRzOiB0cmFpdHMgIT09IG51bGwgJiYgdHJhaXRzICE9PSB2b2lkIDAgPyB0cmFpdHMgOiB7fSwgb3B0aW9uczogX19hc3NpZ24oe30sIG9wdGlvbnMpLCBpbnRlZ3JhdGlvbnM6IGdsb2JhbEludGVncmF0aW9ucyB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uIChncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2dyb3VwJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnZ3JvdXAnLCB0cmFpdHM6IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9LCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGdsb2JhbEludGVncmF0aW9ucyksIC8vXG4gICAgICAgICAgICBncm91cElkOiBncm91cElkIH0pKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKHRvLCBmcm9tLCAvLyBUT0RPOiBjYW4gd2UgbWFrZSB0aGlzIHVuZGVmaW5lZD9cbiAgICBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCh7IHR5cGU6ICdhbGlhcycsIG9wdGlvbnM6IG9wdGlvbnMgfSk7XG4gICAgICAgIHZhciBiYXNlID0ge1xuICAgICAgICAgICAgdXNlcklkOiB0byxcbiAgICAgICAgICAgIHR5cGU6ICdhbGlhcycsXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYmFzZS5wcmV2aW91c0lkID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCBiYXNlKSwgdGhpcy5iYXNlRXZlbnQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGJhc2UpKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmJhc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVncmF0aW9uczoge30sXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgY29udGV4dCBwYXJ0IG9mIGFuIGV2ZW50IGJhc2VkIG9uIFwiZm9yZWlnblwiIGtleXMgdGhhdFxuICAgICAqIGFyZSBwcm92aWRlZCBpbiB0aGUgYE9wdGlvbnNgIHBhcmFtZXRlciBmb3IgYW4gRXZlbnRcbiAgICAgKi9cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5jb250ZXh0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIGV2ZW50IG9wdGlvbnMgYXJlIGtub3duIGtleXMgZnJvbSB0aGlzIGxpc3QsIHdlIG1vdmUgdGhlbSB0byB0aGUgdG9wIGxldmVsIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQW55IG90aGVyIG9wdGlvbnMgYXJlIG1vdmVkIHRvIGNvbnRleHQuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZXZlbnRPdmVycmlkZUtleXMgPSBbXG4gICAgICAgICAgICAndXNlcklkJyxcbiAgICAgICAgICAgICdhbm9ueW1vdXNJZCcsXG4gICAgICAgICAgICAndGltZXN0YW1wJyxcbiAgICAgICAgICAgICdtZXNzYWdlSWQnLFxuICAgICAgICBdO1xuICAgICAgICBkZWxldGUgb3B0aW9uc1snaW50ZWdyYXRpb25zJ107XG4gICAgICAgIHZhciBwcm92aWRlZE9wdGlvbnNLZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gKF9hID0gb3B0aW9ucy5jb250ZXh0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgdmFyIGV2ZW50T3ZlcnJpZGVzID0ge307XG4gICAgICAgIHByb3ZpZGVkT3B0aW9uc0tleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnY29udGV4dCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnRPdmVycmlkZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGRzZXQoZXZlbnRPdmVycmlkZXMsIGtleSwgb3B0aW9uc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzZXQoY29udGV4dCwga2V5LCBvcHRpb25zW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtjb250ZXh0LCBldmVudE92ZXJyaWRlc107XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIGludGVncmF0aW9uQm9vbGVhbnMgPSBPYmplY3Qua2V5cygoX2EgPSBldmVudC5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KS5yZWR1Y2UoZnVuY3Rpb24gKGludGVncmF0aW9uTmFtZXMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW50ZWdyYXRpb25OYW1lcyksIChfYSA9IHt9LCBfYVtuYW1lXSA9IEJvb2xlYW4oKF9iID0gZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbbmFtZV0pLCBfYSkpO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGZpbHRlciBvdXQgYW55IHVuZGVmaW5lZCBvcHRpb25zXG4gICAgICAgIGV2ZW50Lm9wdGlvbnMgPSBwaWNrQnkoZXZlbnQub3B0aW9ucyB8fCB7fSwgZnVuY3Rpb24gKF8sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJldHR5IHRyaXBweSwgYnV0IGhlcmUncyB3aGF0J3MgZ29pbmcgb246XG4gICAgICAgIC8vIC0gYSkgV2UgZG9uJ3QgcGFzcyBpbml0aWFsIGludGVncmF0aW9uIG9wdGlvbnMgYXMgcGFydCBvZiB0aGUgZXZlbnQsIG9ubHkgaWYgdGhleSdyZSB0cnVlIG9yIGZhbHNlXG4gICAgICAgIC8vIC0gYikgV2UgZG8gYWNjZXB0IHBlciBpbnRlZ3JhdGlvbiBvdmVycmlkZXMgKGxpa2UgaW50ZWdyYXRpb25zLkFtcGxpdHVkZS5zZXNzaW9uSWQpIGF0IHRoZSBldmVudCBsZXZlbFxuICAgICAgICAvLyBIZW5jZSB0aGUgbmVlZCB0byBjb252ZXJ0IGJhc2UgaW50ZWdyYXRpb24gb3B0aW9ucyB0byBib29sZWFucywgYnV0IG1haW50YWluIHBlciBldmVudCBpbnRlZ3JhdGlvbiBvdmVycmlkZXNcbiAgICAgICAgdmFyIGFsbEludGVncmF0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvbkJvb2xlYW5zKSwgKF9iID0gZXZlbnQub3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmludGVncmF0aW9ucyk7XG4gICAgICAgIHZhciBfYyA9IGV2ZW50Lm9wdGlvbnNcbiAgICAgICAgICAgID8gdGhpcy5jb250ZXh0KGV2ZW50Lm9wdGlvbnMpXG4gICAgICAgICAgICA6IFtdLCBjb250ZXh0ID0gX2NbMF0sIG92ZXJyaWRlcyA9IF9jWzFdO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGV2ZW50Lm9wdGlvbnMsIHJlc3QgPSBfX3Jlc3QoZXZlbnQsIFtcIm9wdGlvbnNcIl0pO1xuICAgICAgICB2YXIgZXZ0ID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSwgcmVzdCksIHsgY29udGV4dDogY29udGV4dCwgaW50ZWdyYXRpb25zOiBhbGxJbnRlZ3JhdGlvbnMgfSksIG92ZXJyaWRlcyksIHsgbWVzc2FnZUlkOiBvcHRpb25zLm1lc3NhZ2VJZCB8fCB0aGlzLnNldHRpbmdzLmNyZWF0ZU1lc3NhZ2VJZCgpIH0pO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRmluaXNoZWRFdmVudChldnQpO1xuICAgICAgICB2YWxpZGF0ZUV2ZW50KGV2dCk7XG4gICAgICAgIHJldHVybiBldnQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUV2ZW50RmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBDb3JlRXZlbnRGYWN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/logger/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreLogger: () => (/* binding */ CoreLogger)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar CoreLogger = /** @class */ (function () {\n    function CoreLogger() {\n        this._logs = [];\n    }\n    CoreLogger.prototype.log = function (level, message, extras) {\n        var time = new Date();\n        this._logs.push({\n            level: level,\n            message: message,\n            time: time,\n            extras: extras,\n        });\n    };\n    Object.defineProperty(CoreLogger.prototype, \"logs\", {\n        get: function () {\n            return this._logs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreLogger.prototype.flush = function () {\n        if (this.logs.length > 1) {\n            var formatted = this._logs.reduce(function (logs, log) {\n                var _a;\n                var _b, _c;\n                var line = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, log), { json: JSON.stringify(log.extras, null, ' '), extras: log.extras });\n                delete line['time'];\n                var key = (_c = (_b = log.time) === null || _b === void 0 ? void 0 : _b.toISOString()) !== null && _c !== void 0 ? _c : '';\n                if (logs[key]) {\n                    key = \"\".concat(key, \"-\").concat(Math.random());\n                }\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, logs), (_a = {}, _a[key] = line, _a));\n            }, {});\n            // ie doesn't like console.table\n            if (console.table) {\n                console.table(formatted);\n            }\n            else {\n                console.log(formatted);\n            }\n        }\n        else {\n            this.logs.forEach(function (logEntry) {\n                var level = logEntry.level, message = logEntry.message, extras = logEntry.extras;\n                if (level === 'info' || level === 'debug') {\n                    console.log(message, extras !== null && extras !== void 0 ? extras : '');\n                }\n                else {\n                    console[level](message, extras !== null && extras !== void 0 ? extras : '');\n                }\n            });\n        }\n        this._logs = [];\n    };\n    return CoreLogger;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxVQUFVLGlFQUFpRTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxpQkFBaUI7QUFDNUQsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3FCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzPzg3MTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbnZhciBDb3JlTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvcmVMb2dnZXIoKSB7XG4gICAgICAgIHRoaXMuX2xvZ3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZUxvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLl9sb2dzLnB1c2goe1xuICAgICAgICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgICBleHRyYXM6IGV4dHJhcyxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29yZUxvZ2dlci5wcm90b3R5cGUsIFwibG9nc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb3JlTG9nZ2VyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5fbG9ncy5yZWR1Y2UoZnVuY3Rpb24gKGxvZ3MsIGxvZykge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxvZyksIHsganNvbjogSlNPTi5zdHJpbmdpZnkobG9nLmV4dHJhcywgbnVsbCwgJyAnKSwgZXh0cmFzOiBsb2cuZXh0cmFzIH0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBsaW5lWyd0aW1lJ107XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IChfYyA9IChfYiA9IGxvZy50aW1lKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9JU09TdHJpbmcoKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgICAgICAgICAgICAgaWYgKGxvZ3Nba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBcIlwiLmNvbmNhdChrZXksIFwiLVwiKS5jb25jYXQoTWF0aC5yYW5kb20oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbG9ncyksIChfYSA9IHt9LCBfYVtrZXldID0gbGluZSwgX2EpKTtcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIC8vIGllIGRvZXNuJ3QgbGlrZSBjb25zb2xlLnRhYmxlXG4gICAgICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUudGFibGUoZm9ybWF0dGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MuZm9yRWFjaChmdW5jdGlvbiAobG9nRW50cnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSBsb2dFbnRyeS5sZXZlbCwgbWVzc2FnZSA9IGxvZ0VudHJ5Lm1lc3NhZ2UsIGV4dHJhcyA9IGxvZ0VudHJ5LmV4dHJhcztcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT09ICdpbmZvJyB8fCBsZXZlbCA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlW2xldmVsXShtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9ncyA9IFtdO1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVMb2dnZXI7XG59KCkpO1xuZXhwb3J0IHsgQ29yZUxvZ2dlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backoff: () => (/* binding */ backoff)\n/* harmony export */ });\nfunction backoff(params) {\n    var random = Math.random() + 1;\n    var _a = params.minTimeout, minTimeout = _a === void 0 ? 500 : _a, _b = params.factor, factor = _b === void 0 ? 2 : _b, attempt = params.attempt, _c = params.maxTimeout, maxTimeout = _c === void 0 ? Infinity : _c;\n    return Math.min(random * minTimeout * Math.pow(factor, attempt), maxTimeout);\n}\n//# sourceMappingURL=backoff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcz8yYTYxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBiYWNrb2ZmKHBhcmFtcykge1xuICAgIHZhciByYW5kb20gPSBNYXRoLnJhbmRvbSgpICsgMTtcbiAgICB2YXIgX2EgPSBwYXJhbXMubWluVGltZW91dCwgbWluVGltZW91dCA9IF9hID09PSB2b2lkIDAgPyA1MDAgOiBfYSwgX2IgPSBwYXJhbXMuZmFjdG9yLCBmYWN0b3IgPSBfYiA9PT0gdm9pZCAwID8gMiA6IF9iLCBhdHRlbXB0ID0gcGFyYW1zLmF0dGVtcHQsIF9jID0gcGFyYW1zLm1heFRpbWVvdXQsIG1heFRpbWVvdXQgPSBfYyA9PT0gdm9pZCAwID8gSW5maW5pdHkgOiBfYztcbiAgICByZXR1cm4gTWF0aC5taW4ocmFuZG9tICogbWluVGltZW91dCAqIE1hdGgucG93KGZhY3RvciwgYXR0ZW1wdCksIG1heFRpbWVvdXQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFja29mZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ON_REMOVE_FROM_FUTURE: () => (/* binding */ ON_REMOVE_FROM_FUTURE),\n/* harmony export */   PriorityQueue: () => (/* binding */ PriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _backoff__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backoff */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n\n\n\n/**\n * @internal\n */\nvar ON_REMOVE_FROM_FUTURE = 'onRemoveFromFuture';\nvar PriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(PriorityQueue, _super);\n    function PriorityQueue(maxAttempts, queue, seen) {\n        var _this = _super.call(this) || this;\n        _this.future = [];\n        _this.maxAttempts = maxAttempts;\n        _this.queue = queue;\n        _this.seen = seen !== null && seen !== void 0 ? seen : {};\n        return _this;\n    }\n    PriorityQueue.prototype.push = function () {\n        var _this = this;\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var accepted = items.map(function (operation) {\n            var attempts = _this.updateAttempts(operation);\n            if (attempts > _this.maxAttempts || _this.includes(operation)) {\n                return false;\n            }\n            _this.queue.push(operation);\n            return true;\n        });\n        this.queue = this.queue.sort(function (a, b) { return _this.getAttempts(a) - _this.getAttempts(b); });\n        return accepted;\n    };\n    PriorityQueue.prototype.pushWithBackoff = function (item, minTimeout) {\n        var _this = this;\n        if (minTimeout === void 0) { minTimeout = 0; }\n        // One immediate retry unless we have a minimum timeout (e.g. for rate limiting)\n        if (minTimeout == 0 && this.getAttempts(item) === 0) {\n            return this.push(item)[0];\n        }\n        var attempt = this.updateAttempts(item);\n        if (attempt > this.maxAttempts || this.includes(item)) {\n            return false;\n        }\n        var timeout = (0,_backoff__WEBPACK_IMPORTED_MODULE_1__.backoff)({ attempt: attempt - 1 });\n        if (minTimeout > 0 && timeout < minTimeout) {\n            timeout = minTimeout;\n        }\n        setTimeout(function () {\n            _this.queue.push(item);\n            // remove from future list\n            _this.future = _this.future.filter(function (f) { return f.id !== item.id; });\n            // Lets listeners know that a 'future' message is now available in the queue\n            _this.emit(ON_REMOVE_FROM_FUTURE);\n        }, timeout);\n        this.future.push(item);\n        return true;\n    };\n    PriorityQueue.prototype.getAttempts = function (item) {\n        var _a;\n        return (_a = this.seen[item.id]) !== null && _a !== void 0 ? _a : 0;\n    };\n    PriorityQueue.prototype.updateAttempts = function (item) {\n        this.seen[item.id] = this.getAttempts(item) + 1;\n        return this.getAttempts(item);\n    };\n    PriorityQueue.prototype.includes = function (item) {\n        return (this.queue.includes(item) ||\n            this.future.includes(item) ||\n            Boolean(this.queue.find(function (i) { return i.id === item.id; })) ||\n            Boolean(this.future.find(function (i) { return i.id === item.id; })));\n    };\n    PriorityQueue.prototype.pop = function () {\n        return this.queue.shift();\n    };\n    Object.defineProperty(PriorityQueue.prototype, \"length\", {\n        get: function () {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"todo\", {\n        get: function () {\n            return this.queue.length + this.future.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PriorityQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__.Emitter));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDeUI7QUFDdkI7QUFDcEM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdURBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFPLEdBQUcsc0JBQXNCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwwQkFBMEI7QUFDeEY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBCQUEwQjtBQUM3RSxvREFBb0QsMEJBQTBCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDLENBQUMscUVBQU87QUFDZ0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9wcmlvcml0eS1xdWV1ZS9pbmRleC5qcz9iMTFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGJhY2tvZmYgfSBmcm9tICcuL2JhY2tvZmYnO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBPTl9SRU1PVkVfRlJPTV9GVVRVUkUgPSAnb25SZW1vdmVGcm9tRnV0dXJlJztcbnZhciBQcmlvcml0eVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcmlvcml0eVF1ZXVlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUobWF4QXR0ZW1wdHMsIHF1ZXVlLCBzZWVuKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZ1dHVyZSA9IFtdO1xuICAgICAgICBfdGhpcy5tYXhBdHRlbXB0cyA9IG1heEF0dGVtcHRzO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBfdGhpcy5zZWVuID0gc2VlbiAhPT0gbnVsbCAmJiBzZWVuICE9PSB2b2lkIDAgPyBzZWVuIDoge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBpdGVtc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhY2NlcHRlZCA9IGl0ZW1zLm1hcChmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBfdGhpcy51cGRhdGVBdHRlbXB0cyhvcGVyYXRpb24pO1xuICAgICAgICAgICAgaWYgKGF0dGVtcHRzID4gX3RoaXMubWF4QXR0ZW1wdHMgfHwgX3RoaXMuaW5jbHVkZXMob3BlcmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHRoaXMucXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gX3RoaXMuZ2V0QXR0ZW1wdHMoYSkgLSBfdGhpcy5nZXRBdHRlbXB0cyhiKTsgfSk7XG4gICAgICAgIHJldHVybiBhY2NlcHRlZDtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnB1c2hXaXRoQmFja29mZiA9IGZ1bmN0aW9uIChpdGVtLCBtaW5UaW1lb3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChtaW5UaW1lb3V0ID09PSB2b2lkIDApIHsgbWluVGltZW91dCA9IDA7IH1cbiAgICAgICAgLy8gT25lIGltbWVkaWF0ZSByZXRyeSB1bmxlc3Mgd2UgaGF2ZSBhIG1pbmltdW0gdGltZW91dCAoZS5nLiBmb3IgcmF0ZSBsaW1pdGluZylcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPT0gMCAmJiB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGl0ZW0pWzBdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdHRlbXB0ID0gdGhpcy51cGRhdGVBdHRlbXB0cyhpdGVtKTtcbiAgICAgICAgaWYgKGF0dGVtcHQgPiB0aGlzLm1heEF0dGVtcHRzIHx8IHRoaXMuaW5jbHVkZXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGltZW91dCA9IGJhY2tvZmYoeyBhdHRlbXB0OiBhdHRlbXB0IC0gMSB9KTtcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPiAwICYmIHRpbWVvdXQgPCBtaW5UaW1lb3V0KSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbWluVGltZW91dDtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBmdXR1cmUgbGlzdFxuICAgICAgICAgICAgX3RoaXMuZnV0dXJlID0gX3RoaXMuZnV0dXJlLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5pZCAhPT0gaXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAvLyBMZXRzIGxpc3RlbmVycyBrbm93IHRoYXQgYSAnZnV0dXJlJyBtZXNzYWdlIGlzIG5vdyBhdmFpbGFibGUgaW4gdGhlIHF1ZXVlXG4gICAgICAgICAgICBfdGhpcy5lbWl0KE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmZ1dHVyZS5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldEF0dGVtcHRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zZWVuW2l0ZW0uaWRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgIH07XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUudXBkYXRlQXR0ZW1wdHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnNlZW5baXRlbS5pZF0gPSB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pICsgMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0ZW1wdHMoaXRlbSk7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5xdWV1ZS5pbmNsdWRlcyhpdGVtKSB8fFxuICAgICAgICAgICAgdGhpcy5mdXR1cmUuaW5jbHVkZXMoaXRlbSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5xdWV1ZS5maW5kKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLmlkID09PSBpdGVtLmlkOyB9KSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5mdXR1cmUuZmluZChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5pZCA9PT0gaXRlbS5pZDsgfSkpKTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJ0b2RvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggKyB0aGlzLmZ1dHVyZS5sZW5ndGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUHJpb3JpdHlRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgUHJpb3JpdHlRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attempt: () => (/* binding */ attempt),\n/* harmony export */   ensure: () => (/* binding */ ensure)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n\n\nfunction tryAsync(fn) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, fn()];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, Promise.reject(err_1)];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction attempt(ctx, plugin) {\n    ctx.log('debug', 'plugin', { plugin: plugin.name });\n    var start = new Date().getTime();\n    var hook = plugin[ctx.event.type];\n    if (hook === undefined) {\n        return Promise.resolve(ctx);\n    }\n    var newCtx = tryAsync(function () { return hook.apply(plugin, [ctx]); })\n        .then(function (ctx) {\n        var done = new Date().getTime() - start;\n        ctx.stats.gauge('plugin_time', done, [\"plugin:\".concat(plugin.name)]);\n        return ctx;\n    })\n        .catch(function (err) {\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation &&\n            err.type === 'middleware_cancellation') {\n            throw err;\n        }\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation) {\n            ctx.log('warn', err.type, {\n                plugin: plugin.name,\n                error: err,\n            });\n            return err;\n        }\n        ctx.log('error', 'plugin Error', {\n            plugin: plugin.name,\n            error: err,\n        });\n        ctx.stats.increment('plugin_error', 1, [\"plugin:\".concat(plugin.name)]);\n        return err;\n    });\n    return newCtx;\n}\nfunction ensure(ctx, plugin) {\n    return attempt(ctx, plugin).then(function (newContext) {\n        if (newContext instanceof _context__WEBPACK_IMPORTED_MODULE_1__.CoreContext) {\n            return newContext;\n        }\n        ctx.log('debug', 'Context canceled');\n        ctx.stats.increment('context_canceled');\n        ctx.cancel(newContext);\n    });\n}\n//# sourceMappingURL=delivery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNjO0FBQzdEO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxpQ0FBaUMscUJBQXFCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUNBQW1DO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLHdEQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQ0FBa0MsaURBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanM/YmNkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb3JlQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vY29udGV4dCc7XG5mdW5jdGlvbiB0cnlBc3luYyhmbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVycl8xO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbigpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlamVjdChlcnJfMSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhdHRlbXB0KGN0eCwgcGx1Z2luKSB7XG4gICAgY3R4LmxvZygnZGVidWcnLCAncGx1Z2luJywgeyBwbHVnaW46IHBsdWdpbi5uYW1lIH0pO1xuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHZhciBob29rID0gcGx1Z2luW2N0eC5ldmVudC50eXBlXTtcbiAgICBpZiAoaG9vayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3R4KTtcbiAgICB9XG4gICAgdmFyIG5ld0N0eCA9IHRyeUFzeW5jKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGhvb2suYXBwbHkocGx1Z2luLCBbY3R4XSk7IH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIGRvbmUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0O1xuICAgICAgICBjdHguc3RhdHMuZ2F1Z2UoJ3BsdWdpbl90aW1lJywgZG9uZSwgW1wicGx1Z2luOlwiLmNvbmNhdChwbHVnaW4ubmFtZSldKTtcbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uICYmXG4gICAgICAgICAgICBlcnIudHlwZSA9PT0gJ21pZGRsZXdhcmVfY2FuY2VsbGF0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBDb250ZXh0Q2FuY2VsYXRpb24pIHtcbiAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCBlcnIudHlwZSwge1xuICAgICAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luLm5hbWUsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdlcnJvcicsICdwbHVnaW4gRXJyb3InLCB7XG4gICAgICAgICAgICBwbHVnaW46IHBsdWdpbi5uYW1lLFxuICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ3BsdWdpbl9lcnJvcicsIDEsIFtcInBsdWdpbjpcIi5jb25jYXQocGx1Z2luLm5hbWUpXSk7XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld0N0eDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmUoY3R4LCBwbHVnaW4pIHtcbiAgICByZXR1cm4gYXR0ZW1wdChjdHgsIHBsdWdpbikudGhlbihmdW5jdGlvbiAobmV3Q29udGV4dCkge1xuICAgICAgICBpZiAobmV3Q29udGV4dCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3Q29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdDb250ZXh0IGNhbmNlbGVkJyk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2NvbnRleHRfY2FuY2VsZWQnKTtcbiAgICAgICAgY3R4LmNhbmNlbChuZXdDb250ZXh0KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGl2ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventQueue: () => (/* binding */ CoreEventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _utils_group_by__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/group-by */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\");\n/* harmony import */ var _priority_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../priority-queue */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _task_task_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../task/task-group */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\");\n/* harmony import */ var _delivery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./delivery */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n\n\n\n\n\n\n\nvar CoreEventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(CoreEventQueue, _super);\n    function CoreEventQueue(priorityQueue) {\n        var _this = _super.call(this) || this;\n        /**\n         * All event deliveries get suspended until all the tasks in this task group are complete.\n         * For example: a middleware that augments the event object should be loaded safely as a\n         * critical task, this way, event queue will wait for it to be ready before sending events.\n         *\n         * This applies to all the events already in the queue, and the upcoming ones\n         */\n        _this.criticalTasks = (0,_task_task_group__WEBPACK_IMPORTED_MODULE_1__.createTaskGroup)();\n        _this.plugins = [];\n        _this.failedInitializations = [];\n        _this.flushing = false;\n        _this.queue = priorityQueue;\n        _this.queue.on(_priority_queue__WEBPACK_IMPORTED_MODULE_2__.ON_REMOVE_FROM_FUTURE, function () {\n            _this.scheduleFlush(0);\n        });\n        return _this;\n    }\n    CoreEventQueue.prototype.register = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var handleLoadError, err_1;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.plugins.push(plugin);\n                        handleLoadError = function (err) {\n                            _this.failedInitializations.push(plugin.name);\n                            _this.emit('initialization_failure', plugin);\n                            console.warn(plugin.name, err);\n                            ctx.log('warn', 'Failed to load destination', {\n                                plugin: plugin.name,\n                                error: err,\n                            });\n                            // Filter out the failed plugin by excluding it from the list\n                            _this.plugins = _this.plugins.filter(function (p) { return p !== plugin; });\n                        };\n                        if (!(plugin.type === 'destination' && plugin.name !== 'Segment.io')) return [3 /*break*/, 1];\n                        plugin.load(ctx, instance).catch(handleLoadError);\n                        return [3 /*break*/, 4];\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, plugin.load(ctx, instance)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        handleLoadError(err_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.deregister = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var e_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        if (!plugin.unload) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.resolve(plugin.unload(ctx, instance))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        this.plugins = this.plugins.filter(function (p) { return p.name !== plugin.name; });\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        ctx.log('warn', 'Failed to unload destination', {\n                            plugin: plugin.name,\n                            error: e_1,\n                        });\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatch = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var willDeliver;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.push(ctx);\n                willDeliver = this.subscribeToDelivery(ctx);\n                this.scheduleFlush(0);\n                return [2 /*return*/, willDeliver];\n            });\n        });\n    };\n    CoreEventQueue.prototype.subscribeToDelivery = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var onDeliver = function (flushed, delivered) {\n                            if (flushed.isSame(ctx)) {\n                                _this.off('flush', onDeliver);\n                                if (delivered) {\n                                    resolve(flushed);\n                                }\n                                else {\n                                    resolve(flushed);\n                                }\n                            }\n                        };\n                        _this.on('flush', onDeliver);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatchSingle = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.updateAttempts(ctx);\n                ctx.attempts = 1;\n                return [2 /*return*/, this.deliver(ctx).catch(function (err) {\n                        var accepted = _this.enqueuRetry(err, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err });\n                            return ctx;\n                        }\n                        return _this.subscribeToDelivery(ctx);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.isEmpty = function () {\n        return this.queue.length === 0;\n    };\n    CoreEventQueue.prototype.scheduleFlush = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = 500; }\n        if (this.flushing) {\n            return;\n        }\n        this.flushing = true;\n        setTimeout(function () {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            _this.flush().then(function () {\n                setTimeout(function () {\n                    _this.flushing = false;\n                    if (_this.queue.length) {\n                        _this.scheduleFlush(0);\n                    }\n                }, 0);\n            });\n        }, timeout);\n    };\n    CoreEventQueue.prototype.deliver = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var start, done, err_2, error;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.criticalTasks.done()];\n                    case 1:\n                        _a.sent();\n                        start = Date.now();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.flushOne(ctx)];\n                    case 3:\n                        ctx = _a.sent();\n                        done = Date.now() - start;\n                        this.emit('delivery_success', ctx);\n                        ctx.stats.gauge('delivered', done);\n                        ctx.log('debug', 'Delivered', ctx.event);\n                        return [2 /*return*/, ctx];\n                    case 4:\n                        err_2 = _a.sent();\n                        error = err_2;\n                        ctx.log('error', 'Failed to deliver', error);\n                        this.emit('delivery_failure', ctx, error);\n                        ctx.stats.increment('delivery_failed');\n                        throw err_2;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.enqueuRetry = function (err, ctx) {\n        var retriable = !(err instanceof _context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation) || err.retry;\n        if (!retriable) {\n            return false;\n        }\n        return this.queue.pushWithBackoff(ctx);\n    };\n    CoreEventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, err_3, accepted;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length === 0) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx = this.queue.pop();\n                        if (!ctx) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx.attempts = this.queue.getAttempts(ctx);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.deliver(ctx)];\n                    case 2:\n                        ctx = _a.sent();\n                        this.emit('flush', ctx, true);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        accepted = this.enqueuRetry(err_3, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err_3 });\n                            this.emit('flush', ctx, false);\n                        }\n                        return [2 /*return*/, []];\n                    case 4: return [2 /*return*/, [ctx]];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.isReady = function () {\n        // return this.plugins.every((p) => p.isLoaded())\n        // should we wait for every plugin to load?\n        return true;\n    };\n    CoreEventQueue.prototype.availableExtensions = function (denyList) {\n        var available = this.plugins.filter(function (p) {\n            var _a, _b, _c;\n            // Only filter out destination plugins or the Segment.io plugin\n            if (p.type !== 'destination' && p.name !== 'Segment.io') {\n                return true;\n            }\n            var alternativeNameMatch = undefined;\n            (_a = p.alternativeNames) === null || _a === void 0 ? void 0 : _a.forEach(function (name) {\n                if (denyList[name] !== undefined) {\n                    alternativeNameMatch = denyList[name];\n                }\n            });\n            // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n            return ((_c = (_b = denyList[p.name]) !== null && _b !== void 0 ? _b : alternativeNameMatch) !== null && _c !== void 0 ? _c : (p.name === 'Segment.io' ? true : denyList.All) !== false);\n        });\n        var _a = (0,_utils_group_by__WEBPACK_IMPORTED_MODULE_4__.groupBy)(available, 'type'), _b = _a.before, before = _b === void 0 ? [] : _b, _c = _a.enrichment, enrichment = _c === void 0 ? [] : _c, _d = _a.destination, destination = _d === void 0 ? [] : _d, _e = _a.after, after = _e === void 0 ? [] : _e;\n        return {\n            before: before,\n            enrichment: enrichment,\n            destinations: destination,\n            after: after,\n        };\n    };\n    CoreEventQueue.prototype.flushOne = function (ctx) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _c, before, enrichment, _i, before_1, beforeWare, temp, _d, enrichment_1, enrichmentWare, temp, _e, destinations, after, afterCalls;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!this.isReady()) {\n                            throw new Error('Not ready');\n                        }\n                        if (ctx.attempts > 1) {\n                            this.emit('delivery_retry', ctx);\n                        }\n                        _c = this.availableExtensions((_a = ctx.event.integrations) !== null && _a !== void 0 ? _a : {}), before = _c.before, enrichment = _c.enrichment;\n                        _i = 0, before_1 = before;\n                        _f.label = 1;\n                    case 1:\n                        if (!(_i < before_1.length)) return [3 /*break*/, 4];\n                        beforeWare = before_1[_i];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.ensure)(ctx, beforeWare)];\n                    case 2:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, beforeWare);\n                        _f.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d = 0, enrichment_1 = enrichment;\n                        _f.label = 5;\n                    case 5:\n                        if (!(_d < enrichment_1.length)) return [3 /*break*/, 8];\n                        enrichmentWare = enrichment_1[_d];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, enrichmentWare)];\n                    case 6:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, enrichmentWare);\n                        _f.label = 7;\n                    case 7:\n                        _d++;\n                        return [3 /*break*/, 5];\n                    case 8:\n                        _e = this.availableExtensions((_b = ctx.event.integrations) !== null && _b !== void 0 ? _b : {}), destinations = _e.destinations, after = _e.after;\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                setTimeout(function () {\n                                    var attempts = destinations.map(function (destination) {\n                                        return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, destination);\n                                    });\n                                    Promise.all(attempts).then(resolve).catch(reject);\n                                }, 0);\n                            })];\n                    case 9:\n                        _f.sent();\n                        ctx.stats.increment('message_delivered');\n                        this.emit('message_delivered', ctx);\n                        afterCalls = after.map(function (after) { return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, after); });\n                        return [4 /*yield*/, Promise.all(afterCalls)];\n                    case 10:\n                        _f.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    return CoreEventQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.Emitter));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZXZlbnQtcXVldWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDZDtBQUNjO0FBQ0c7QUFDRjtBQUNOO0FBQ1I7QUFDN0M7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlFQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFxQjtBQUM1QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxnRkFBZ0Ysc0JBQXNCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsZ0NBQWdDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxhQUFhO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5Qyx3REFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxlQUFlO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQix3REFBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SEFBdUg7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxpREFBTTtBQUNuRDtBQUNBO0FBQ0EsNENBQTRDLGlEQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtEQUFPO0FBQ3BEO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVIQUF1SDtBQUN2SDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0RBQU87QUFDdEQscUNBQXFDO0FBQ3JDO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxPQUFPLGtEQUFPLGVBQWU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUMsQ0FBQyxxRUFBTztBQUNpQjtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzP2JiNWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnLi4vdXRpbHMvZ3JvdXAtYnknO1xuaW1wb3J0IHsgT05fUkVNT1ZFX0ZST01fRlVUVVJFIH0gZnJvbSAnLi4vcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgQ29yZUNvbnRleHQsIENvbnRleHRDYW5jZWxhdGlvbiB9IGZyb20gJy4uL2NvbnRleHQnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVRhc2tHcm91cCB9IGZyb20gJy4uL3Rhc2svdGFzay1ncm91cCc7XG5pbXBvcnQgeyBhdHRlbXB0LCBlbnN1cmUgfSBmcm9tICcuL2RlbGl2ZXJ5JztcbnZhciBDb3JlRXZlbnRRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29yZUV2ZW50UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIGV2ZW50IGRlbGl2ZXJpZXMgZ2V0IHN1c3BlbmRlZCB1bnRpbCBhbGwgdGhlIHRhc2tzIGluIHRoaXMgdGFzayBncm91cCBhcmUgY29tcGxldGUuXG4gICAgICAgICAqIEZvciBleGFtcGxlOiBhIG1pZGRsZXdhcmUgdGhhdCBhdWdtZW50cyB0aGUgZXZlbnQgb2JqZWN0IHNob3VsZCBiZSBsb2FkZWQgc2FmZWx5IGFzIGFcbiAgICAgICAgICogY3JpdGljYWwgdGFzaywgdGhpcyB3YXksIGV2ZW50IHF1ZXVlIHdpbGwgd2FpdCBmb3IgaXQgdG8gYmUgcmVhZHkgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGFwcGxpZXMgdG8gYWxsIHRoZSBldmVudHMgYWxyZWFkeSBpbiB0aGUgcXVldWUsIGFuZCB0aGUgdXBjb21pbmcgb25lc1xuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3JpdGljYWxUYXNrcyA9IGNyZWF0ZVRhc2tHcm91cCgpO1xuICAgICAgICBfdGhpcy5wbHVnaW5zID0gW107XG4gICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucyA9IFtdO1xuICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHByaW9yaXR5UXVldWU7XG4gICAgICAgIF90aGlzLnF1ZXVlLm9uKE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGN0eCwgcGx1Z2luLCBpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlTG9hZEVycm9yLCBlcnJfMTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucy5wdXNoKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KCdpbml0aWFsaXphdGlvbl9mYWlsdXJlJywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4ocGx1Z2luLm5hbWUsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnd2FybicsICdGYWlsZWQgdG8gbG9hZCBkZXN0aW5hdGlvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IHRoZSBmYWlsZWQgcGx1Z2luIGJ5IGV4Y2x1ZGluZyBpdCBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGx1Z2lucyA9IF90aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSBwbHVnaW47IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsdWdpbi50eXBlID09PSAnZGVzdGluYXRpb24nICYmIHBsdWdpbi5uYW1lICE9PSAnU2VnbWVudC5pbycpKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpLmNhdGNoKGhhbmRsZUxvYWRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yKGVycl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVyZWdpc3RlciA9IGZ1bmN0aW9uIChjdHgsIHBsdWdpbiwgaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi51bmxvYWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5yZXNvbHZlKHBsdWdpbi51bmxvYWQoY3R4LCBpbnN0YW5jZSkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMgPSB0aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm5hbWUgIT09IHBsdWdpbi5uYW1lOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgJ0ZhaWxlZCB0byB1bmxvYWQgZGVzdGluYXRpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZV8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lsbERlbGl2ZXI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICB3aWxsRGVsaXZlciA9IHRoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgd2lsbERlbGl2ZXJdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnN1YnNjcmliZVRvRGVsaXZlcnkgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25EZWxpdmVyID0gZnVuY3Rpb24gKGZsdXNoZWQsIGRlbGl2ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbHVzaGVkLmlzU2FtZShjdHgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsaXZlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZsdXNoZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmbHVzaGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGlzcGF0Y2hTaW5nbGUgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnVwZGF0ZUF0dGVtcHRzKGN0eCk7XG4gICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5kZWxpdmVyKGN0eCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY2VwdGVkID0gX3RoaXMuZW5xdWV1UmV0cnkoZXJyLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY2NlcHRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zZXRGYWlsZWREZWxpdmVyeSh7IHJlYXNvbjogZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoID09PSAwO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7IHRpbWVvdXQgPSA1MDA7IH1cbiAgICAgICAgaWYgKHRoaXMuZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgICAgICBfdGhpcy5mbHVzaCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY2hlZHVsZUZsdXNoKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVsaXZlciA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0LCBkb25lLCBlcnJfMiwgZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY3JpdGljYWxUYXNrcy5kb25lKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZsdXNoT25lKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9zdWNjZXNzJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnZGVsaXZlcmVkJywgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdEZWxpdmVyZWQnLCBjdHguZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBlcnJfMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ2Vycm9yJywgJ0ZhaWxlZCB0byBkZWxpdmVyJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9mYWlsdXJlJywgY3R4LCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdkZWxpdmVyeV9mYWlsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycl8yO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZW5xdWV1UmV0cnkgPSBmdW5jdGlvbiAoZXJyLCBjdHgpIHtcbiAgICAgICAgdmFyIHJldHJpYWJsZSA9ICEoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uKSB8fCBlcnIucmV0cnk7XG4gICAgICAgIGlmICghcmV0cmlhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUucHVzaFdpdGhCYWNrb2ZmKGN0eCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHgsIGVycl8zLCBhY2NlcHRlZDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLnF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gdGhpcy5xdWV1ZS5nZXRBdHRlbXB0cyhjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxpdmVyKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2ZsdXNoJywgY3R4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdGVkID0gdGhpcy5lbnF1ZXVSZXRyeShlcnJfMywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2V0RmFpbGVkRGVsaXZlcnkoeyByZWFzb246IGVycl8zIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmx1c2gnLCBjdHgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtjdHhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMucGx1Z2lucy5ldmVyeSgocCkgPT4gcC5pc0xvYWRlZCgpKVxuICAgICAgICAvLyBzaG91bGQgd2Ugd2FpdCBmb3IgZXZlcnkgcGx1Z2luIHRvIGxvYWQ/XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmF2YWlsYWJsZUV4dGVuc2lvbnMgPSBmdW5jdGlvbiAoZGVueUxpc3QpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgLy8gT25seSBmaWx0ZXIgb3V0IGRlc3RpbmF0aW9uIHBsdWdpbnMgb3IgdGhlIFNlZ21lbnQuaW8gcGx1Z2luXG4gICAgICAgICAgICBpZiAocC50eXBlICE9PSAnZGVzdGluYXRpb24nICYmIHAubmFtZSAhPT0gJ1NlZ21lbnQuaW8nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAoX2EgPSBwLmFsdGVybmF0aXZlTmFtZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlbnlMaXN0W25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSBkZW55TGlzdFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEV4cGxpY2l0IGludGVncmF0aW9uIG9wdGlvbiB0YWtlcyBwcmVjZWRlbmNlLCBgQWxsOiBmYWxzZWAgZG9lcyBub3QgYXBwbHkgdG8gU2VnbWVudC5pb1xuICAgICAgICAgICAgcmV0dXJuICgoX2MgPSAoX2IgPSBkZW55TGlzdFtwLm5hbWVdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBhbHRlcm5hdGl2ZU5hbWVNYXRjaCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogKHAubmFtZSA9PT0gJ1NlZ21lbnQuaW8nID8gdHJ1ZSA6IGRlbnlMaXN0LkFsbCkgIT09IGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfYSA9IGdyb3VwQnkoYXZhaWxhYmxlLCAndHlwZScpLCBfYiA9IF9hLmJlZm9yZSwgYmVmb3JlID0gX2IgPT09IHZvaWQgMCA/IFtdIDogX2IsIF9jID0gX2EuZW5yaWNobWVudCwgZW5yaWNobWVudCA9IF9jID09PSB2b2lkIDAgPyBbXSA6IF9jLCBfZCA9IF9hLmRlc3RpbmF0aW9uLCBkZXN0aW5hdGlvbiA9IF9kID09PSB2b2lkIDAgPyBbXSA6IF9kLCBfZSA9IF9hLmFmdGVyLCBhZnRlciA9IF9lID09PSB2b2lkIDAgPyBbXSA6IF9lO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVmb3JlOiBiZWZvcmUsXG4gICAgICAgICAgICBlbnJpY2htZW50OiBlbnJpY2htZW50LFxuICAgICAgICAgICAgZGVzdGluYXRpb25zOiBkZXN0aW5hdGlvbixcbiAgICAgICAgICAgIGFmdGVyOiBhZnRlcixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5mbHVzaE9uZSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9jLCBiZWZvcmUsIGVucmljaG1lbnQsIF9pLCBiZWZvcmVfMSwgYmVmb3JlV2FyZSwgdGVtcCwgX2QsIGVucmljaG1lbnRfMSwgZW5yaWNobWVudFdhcmUsIHRlbXAsIF9lLCBkZXN0aW5hdGlvbnMsIGFmdGVyLCBhZnRlckNhbGxzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2YubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IHJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmF0dGVtcHRzID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVsaXZlcnlfcmV0cnknLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzLmF2YWlsYWJsZUV4dGVuc2lvbnMoKF9hID0gY3R4LmV2ZW50LmludGVncmF0aW9ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pLCBiZWZvcmUgPSBfYy5iZWZvcmUsIGVucmljaG1lbnQgPSBfYy5lbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBiZWZvcmVfMSA9IGJlZm9yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBiZWZvcmVfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVdhcmUgPSBiZWZvcmVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBlbnN1cmUoY3R4LCBiZWZvcmVXYXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBfZi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZV9lbnJpY2hlZCcsIGN0eCwgYmVmb3JlV2FyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSAwLCBlbnJpY2htZW50XzEgPSBlbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2YubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfZCA8IGVucmljaG1lbnRfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVucmljaG1lbnRXYXJlID0gZW5yaWNobWVudF8xW19kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF0dGVtcHQoY3R4LCBlbnJpY2htZW50V2FyZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgaW5zdGFuY2VvZiBDb3JlQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZW5yaWNoZWQnLCBjdHgsIGVucmljaG1lbnRXYXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gNztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZSA9IHRoaXMuYXZhaWxhYmxlRXh0ZW5zaW9ucygoX2IgPSBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSksIGRlc3RpbmF0aW9ucyA9IF9lLmRlc3RpbmF0aW9ucywgYWZ0ZXIgPSBfZS5hZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBkZXN0aW5hdGlvbnMubWFwKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0KGN0eCwgZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChhdHRlbXB0cykudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ21lc3NhZ2VfZGVsaXZlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZGVsaXZlcmVkJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyQ2FsbHMgPSBhZnRlci5tYXAoZnVuY3Rpb24gKGFmdGVyKSB7IHJldHVybiBhdHRlbXB0KGN0eCwgYWZ0ZXIpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGFmdGVyQ2FsbHMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlRXZlbnRRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgQ29yZUV2ZW50UXVldWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/stats/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreStats: () => (/* binding */ CoreStats),\n/* harmony export */   NullStats: () => (/* binding */ NullStats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar compactMetricType = function (type) {\n    var enums = {\n        gauge: 'g',\n        counter: 'c',\n    };\n    return enums[type];\n};\nvar CoreStats = /** @class */ (function () {\n    function CoreStats() {\n        this.metrics = [];\n    }\n    CoreStats.prototype.increment = function (metric, by, tags) {\n        if (by === void 0) { by = 1; }\n        this.metrics.push({\n            metric: metric,\n            value: by,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'counter',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.gauge = function (metric, value, tags) {\n        this.metrics.push({\n            metric: metric,\n            value: value,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'gauge',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.flush = function () {\n        var formatted = this.metrics.map(function (m) { return ((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, m), { tags: m.tags.join(',') })); });\n        // ie doesn't like console.table\n        if (console.table) {\n            console.table(formatted);\n        }\n        else {\n            console.log(formatted);\n        }\n        this.metrics = [];\n    };\n    /**\n     * compact keys for smaller payload\n     */\n    CoreStats.prototype.serialize = function () {\n        return this.metrics.map(function (m) {\n            return {\n                m: m.metric,\n                v: m.value,\n                t: m.tags,\n                k: compactMetricType(m.type),\n                e: m.timestamp,\n            };\n        });\n    };\n    return CoreStats;\n}());\n\nvar NullStats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(NullStats, _super);\n    function NullStats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullStats.prototype.gauge = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.increment = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.flush = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.serialize = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n        return [];\n    };\n    return NullStats;\n}(CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0RBQXdELFFBQVEsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLFFBQVEsd0JBQXdCLEtBQUs7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanM/ZTE4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgY29tcGFjdE1ldHJpY1R5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBlbnVtcyA9IHtcbiAgICAgICAgZ2F1Z2U6ICdnJyxcbiAgICAgICAgY291bnRlcjogJ2MnLFxuICAgIH07XG4gICAgcmV0dXJuIGVudW1zW3R5cGVdO1xufTtcbnZhciBDb3JlU3RhdHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZVN0YXRzKCkge1xuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAobWV0cmljLCBieSwgdGFncykge1xuICAgICAgICBpZiAoYnkgPT09IHZvaWQgMCkgeyBieSA9IDE7IH1cbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogYnksXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdjb3VudGVyJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlU3RhdHMucHJvdG90eXBlLmdhdWdlID0gZnVuY3Rpb24gKG1ldHJpYywgdmFsdWUsIHRhZ3MpIHtcbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdnYXVnZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMubWV0cmljcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbSksIHsgdGFnczogbS50YWdzLmpvaW4oJywnKSB9KSk7IH0pO1xuICAgICAgICAvLyBpZSBkb2Vzbid0IGxpa2UgY29uc29sZS50YWJsZVxuICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgY29uc29sZS50YWJsZShmb3JtYXR0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZm9ybWF0dGVkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGNvbXBhY3Qga2V5cyBmb3Igc21hbGxlciBwYXlsb2FkXG4gICAgICovXG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5zZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldHJpY3MubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG06IG0ubWV0cmljLFxuICAgICAgICAgICAgICAgIHY6IG0udmFsdWUsXG4gICAgICAgICAgICAgICAgdDogbS50YWdzLFxuICAgICAgICAgICAgICAgIGs6IGNvbXBhY3RNZXRyaWNUeXBlKG0udHlwZSksXG4gICAgICAgICAgICAgICAgZTogbS50aW1lc3RhbXAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlU3RhdHM7XG59KCkpO1xuZXhwb3J0IHsgQ29yZVN0YXRzIH07XG52YXIgTnVsbFN0YXRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOdWxsU3RhdHMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTnVsbFN0YXRzKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE51bGxTdGF0cy5wcm90b3R5cGUuZ2F1Z2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOdWxsU3RhdHMucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuICAgIHJldHVybiBOdWxsU3RhdHM7XG59KENvcmVTdGF0cykpO1xuZXhwb3J0IHsgTnVsbFN0YXRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/task/task-group.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTaskGroup: () => (/* binding */ createTaskGroup)\n/* harmony export */ });\n/* harmony import */ var _utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-thenable */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\");\n\nvar createTaskGroup = function () {\n    var taskCompletionPromise;\n    var resolvePromise;\n    var count = 0;\n    return {\n        done: function () { return taskCompletionPromise; },\n        run: function (op) {\n            var returnValue = op();\n            if ((0,_utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__.isThenable)(returnValue)) {\n                if (++count === 1) {\n                    taskCompletionPromise = new Promise(function (res) { return (resolvePromise = res); });\n                }\n                returnValue.finally(function () { return --count === 0 && resolvePromise(); });\n            }\n            return returnValue;\n        },\n    };\n};\n//# sourceMappingURL=task-group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdGFzay90YXNrLWdyb3VwLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBQzNDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQVU7QUFDMUI7QUFDQSx5RUFBeUUsZ0NBQWdDO0FBQ3pHO0FBQ0Esa0RBQWtELDJDQUEyQztBQUM3RjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3Rhc2svdGFzay1ncm91cC5qcz80ODlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVGhlbmFibGUgfSBmcm9tICcuLi91dGlscy9pcy10aGVuYWJsZSc7XG5leHBvcnQgdmFyIGNyZWF0ZVRhc2tHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGFza0NvbXBsZXRpb25Qcm9taXNlO1xuICAgIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvbmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRhc2tDb21wbGV0aW9uUHJvbWlzZTsgfSxcbiAgICAgICAgcnVuOiBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IG9wKCk7XG4gICAgICAgICAgICBpZiAoaXNUaGVuYWJsZShyZXR1cm5WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKytjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ29tcGxldGlvblByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7IHJldHVybiAocmVzb2x2ZVByb21pc2UgPSByZXMpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiAtLWNvdW50ID09PSAwICYmIHJlc29sdmVQcm9taXNlKCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFzay1ncm91cC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindAll: () => (/* binding */ bindAll)\n/* harmony export */ });\nfunction bindAll(obj) {\n    var proto = obj.constructor.prototype;\n    for (var _i = 0, _a = Object.getOwnPropertyNames(proto); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key !== 'constructor') {\n            var desc = Object.getOwnPropertyDescriptor(obj.constructor.prototype, key);\n            if (!!desc && typeof desc.value === 'function') {\n                obj[key] = obj[key].bind(obj);\n            }\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=bind-all.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvYmluZC1hbGwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQSw2REFBNkQsZ0JBQWdCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9iaW5kLWFsbC5qcz9lMmRhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBiaW5kQWxsKG9iaikge1xuICAgIHZhciBwcm90byA9IG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgaWYgKGtleSAhPT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGtleSk7XG4gICAgICAgICAgICBpZiAoISFkZXNjICYmIHR5cGVvZiBkZXNjLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb2JqW2tleV0gPSBvYmpba2V5XS5iaW5kKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmQtYWxsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupBy: () => (/* binding */ groupBy)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction groupBy(collection, grouper) {\n    var results = {};\n    collection.forEach(function (item) {\n        var _a;\n        var key = undefined;\n        if (typeof grouper === 'string') {\n            var suggestedKey = item[grouper];\n            key =\n                typeof suggestedKey !== 'string'\n                    ? JSON.stringify(suggestedKey)\n                    : suggestedKey;\n        }\n        else if (grouper instanceof Function) {\n            key = grouper(item);\n        }\n        if (key === undefined) {\n            return;\n        }\n        results[key] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], ((_a = results[key]) !== null && _a !== void 0 ? _a : []), true), [item], false);\n    });\n    return results;\n}\n//# sourceMappingURL=group-by.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvZ3JvdXAtYnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDL0I7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFhLENBQUMsb0RBQWE7QUFDbEQsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dyb3VwLWJ5LmpzPzQwNzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnkoY29sbGVjdGlvbiwgZ3JvdXBlcikge1xuICAgIHZhciByZXN1bHRzID0ge307XG4gICAgY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHR5cGVvZiBncm91cGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFyIHN1Z2dlc3RlZEtleSA9IGl0ZW1bZ3JvdXBlcl07XG4gICAgICAgICAgICBrZXkgPVxuICAgICAgICAgICAgICAgIHR5cGVvZiBzdWdnZXN0ZWRLZXkgIT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoc3VnZ2VzdGVkS2V5KVxuICAgICAgICAgICAgICAgICAgICA6IHN1Z2dlc3RlZEtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChncm91cGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGtleSA9IGdyb3VwZXIoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0c1trZXldID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCAoKF9hID0gcmVzdWx0c1trZXldKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSksIHRydWUpLCBbaXRlbV0sIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwLWJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvaXMtdGhlbmFibGUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9pcy10aGVuYWJsZS5qcz83ODBjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIENoZWNrIGlmICB0aGVuYWJsZVxuICogIChpbnN0YW5jZW9mIFByb21pc2UgZG9lc24ndCByZXNwZWN0IHJlYWxtcylcbiAqL1xuZXhwb3J0IHZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgJ3RoZW4nIGluIHZhbHVlICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLXRoZW5hYmxlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/pick.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickBy: () => (/* binding */ pickBy)\n/* harmony export */ });\nvar pickBy = function (obj, fn) {\n    return Object.keys(obj)\n        .filter(function (k) { return fn(k, obj[k]); })\n        .reduce(function (acc, key) { return ((acc[key] = obj[key]), acc); }, {});\n};\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvcGljay5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBLCtCQUErQix1QkFBdUI7QUFDdEQsc0NBQXNDLHNDQUFzQyxJQUFJO0FBQ2hGO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9waWNrLmpzPzE4NzAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBwaWNrQnkgPSBmdW5jdGlvbiAob2JqLCBmbikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGZuKGssIG9ialtrXSk7IH0pXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiAoKGFjY1trZXldID0gb2JqW2tleV0pLCBhY2MpOyB9LCB7fSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGljay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertEventExists: () => (/* binding */ assertEventExists),\n/* harmony export */   assertEventType: () => (/* binding */ assertEventType),\n/* harmony export */   assertMessageId: () => (/* binding */ assertMessageId),\n/* harmony export */   assertTrackEventName: () => (/* binding */ assertTrackEventName),\n/* harmony export */   assertTrackEventProperties: () => (/* binding */ assertTrackEventProperties),\n/* harmony export */   assertTraits: () => (/* binding */ assertTraits),\n/* harmony export */   assertUserIdentity: () => (/* binding */ assertUserIdentity),\n/* harmony export */   validateEvent: () => (/* binding */ validateEvent)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\nvar stringError = 'is not a string';\nvar objError = 'is not an object';\nvar nilError = 'is nil';\n// user identity check could hypothetically could be used in the browser event factory, but not 100% sure -- so this is node only for now\nfunction assertUserIdentity(event) {\n    var USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId';\n    var getAnyUserId = function (event) { var _a, _b, _c; return (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId; };\n    var id = getAnyUserId(event);\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, nilError);\n    }\n    else if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, stringError);\n    }\n}\nfunction assertEventExists(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', nilError);\n    }\n    if (typeof event !== 'object') {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', objError);\n    }\n}\nfunction assertEventType(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.type)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.type', stringError);\n    }\n}\nfunction assertTrackEventName(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.event', stringError);\n    }\n}\nfunction assertTrackEventProperties(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.properties)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.properties', objError);\n    }\n}\nfunction assertTraits(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.traits)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.traits', objError);\n    }\n}\nfunction assertMessageId(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.messageId)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.messageId', stringError);\n    }\n}\nfunction validateEvent(event) {\n    assertEventExists(event);\n    assertEventType(event);\n    assertMessageId(event);\n    if (event.type === 'track') {\n        assertTrackEventName(event);\n        assertTrackEventProperties(event);\n    }\n    if (['group', 'identify'].includes(event.type)) {\n        assertTraits(event);\n    }\n}\n//# sourceMappingURL=assertions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMENBQTBDLGdCQUFnQjtBQUMxRDtBQUNBLFNBQVMsZ0RBQU07QUFDZixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQSxjQUFjLGtEQUFRO0FBQ3RCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGdEQUFNO0FBQ2Ysa0JBQWtCLG9EQUFlO0FBQ2pDO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzP2RkNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzUGxhaW5PYmplY3QsIGV4aXN0cyB9IGZyb20gJy4vaGVscGVycyc7XG52YXIgc3RyaW5nRXJyb3IgPSAnaXMgbm90IGEgc3RyaW5nJztcbnZhciBvYmpFcnJvciA9ICdpcyBub3QgYW4gb2JqZWN0JztcbnZhciBuaWxFcnJvciA9ICdpcyBuaWwnO1xuLy8gdXNlciBpZGVudGl0eSBjaGVjayBjb3VsZCBoeXBvdGhldGljYWxseSBjb3VsZCBiZSB1c2VkIGluIHRoZSBicm93c2VyIGV2ZW50IGZhY3RvcnksIGJ1dCBub3QgMTAwJSBzdXJlIC0tIHNvIHRoaXMgaXMgbm9kZSBvbmx5IGZvciBub3dcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRVc2VySWRlbnRpdHkoZXZlbnQpIHtcbiAgICB2YXIgVVNFUl9GSUVMRF9OQU1FID0gJy51c2VySWQvYW5vbnltb3VzSWQvcHJldmlvdXNJZC9ncm91cElkJztcbiAgICB2YXIgZ2V0QW55VXNlcklkID0gZnVuY3Rpb24gKGV2ZW50KSB7IHZhciBfYSwgX2IsIF9jOyByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gZXZlbnQudXNlcklkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBldmVudC5hbm9ueW1vdXNJZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZXZlbnQuZ3JvdXBJZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZXZlbnQucHJldmlvdXNJZDsgfTtcbiAgICB2YXIgaWQgPSBnZXRBbnlVc2VySWQoZXZlbnQpO1xuICAgIGlmICghZXhpc3RzKGlkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFVTRVJfRklFTERfTkFNRSwgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIGlmICghaXNTdHJpbmcoaWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoVVNFUl9GSUVMRF9OQU1FLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KSB7XG4gICAgaWYgKCFleGlzdHMoZXZlbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0V2ZW50JywgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGV2ZW50ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdFdmVudCcsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RXZlbnRUeXBlKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC50eXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHlwZScsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50LmV2ZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcuZXZlbnQnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRyYWNrRXZlbnRQcm9wZXJ0aWVzKGV2ZW50KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGV2ZW50LnByb3BlcnRpZXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJy5wcm9wZXJ0aWVzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUcmFpdHMoZXZlbnQpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZXZlbnQudHJhaXRzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHJhaXRzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRNZXNzYWdlSWQoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50Lm1lc3NhZ2VJZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLm1lc3NhZ2VJZCcsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFdmVudChldmVudCkge1xuICAgIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KTtcbiAgICBhc3NlcnRFdmVudFR5cGUoZXZlbnQpO1xuICAgIGFzc2VydE1lc3NhZ2VJZChldmVudCk7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0cmFjaycpIHtcbiAgICAgICAgYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpO1xuICAgICAgICBhc3NlcnRUcmFja0V2ZW50UHJvcGVydGllcyhldmVudCk7XG4gICAgfVxuICAgIGlmIChbJ2dyb3VwJywgJ2lkZW50aWZ5J10uaW5jbHVkZXMoZXZlbnQudHlwZSkpIHtcbiAgICAgICAgYXNzZXJ0VHJhaXRzKGV2ZW50KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/errors.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar ValidationError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(ValidationError, _super);\n    function ValidationError(field, message) {\n        var _this = _super.call(this, \"\".concat(field, \" \").concat(message)) || this;\n        _this.field = field;\n        return _this;\n    }\n    return ValidationError;\n}(Error));\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUMwQjtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vZXJyb3JzLmpzP2U1MTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgVmFsaWRhdGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWYWxpZGF0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKGZpZWxkLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiXCIuY29uY2F0KGZpZWxkLCBcIiBcIikuY29uY2F0KG1lc3NhZ2UpKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBWYWxpZGF0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   isString: () => (/* binding */ isString)\n/* harmony export */ });\nfunction isString(obj) {\n    return typeof obj === 'string';\n}\nfunction isNumber(obj) {\n    return typeof obj === 'number';\n}\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\nfunction exists(val) {\n    return val !== undefined && val !== null;\n}\nfunction isPlainObject(obj) {\n    return (Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object');\n}\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS92YWxpZGF0aW9uL2hlbHBlcnMuanM/OWI2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4aXN0cyh2YWwpIHtcbiAgICByZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKSA9PT0gJ29iamVjdCcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred)\n/* harmony export */ });\n/**\n * Return a promise that can be externally resolved\n */\nvar createDeferred = function () {\n    var resolve;\n    var reject;\n    var settled = false;\n    var promise = new Promise(function (_resolve, _reject) {\n        resolve = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _resolve.apply(void 0, args);\n        };\n        reject = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _reject.apply(void 0, args);\n        };\n    });\n    return {\n        resolve: resolve,\n        reject: reject,\n        promise: promise,\n        isSettled: function () { return settled; },\n    };\n};\n//# sourceMappingURL=create-deferred.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vY3JlYXRlLWRlZmVycmVkL2NyZWF0ZS1kZWZlcnJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9jcmVhdGUtZGVmZXJyZWQvY3JlYXRlLWRlZmVycmVkLmpzP2U2M2IiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm4gYSBwcm9taXNlIHRoYXQgY2FuIGJlIGV4dGVybmFsbHkgcmVzb2x2ZWRcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVEZWZlcnJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzb2x2ZTtcbiAgICB2YXIgcmVqZWN0O1xuICAgIHZhciBzZXR0bGVkID0gZmFsc2U7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoX3Jlc29sdmUsIF9yZWplY3QpIHtcbiAgICAgICAgcmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgX3Jlc29sdmUuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICBfcmVqZWN0LmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0OiByZWplY3QsXG4gICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgIGlzU2V0dGxlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0dGxlZDsgfSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1kZWZlcnJlZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Emitter: () => (/* binding */ Emitter)\n/* harmony export */ });\n/**\n * Event Emitter that takes the expected contract as a generic\n * @example\n * ```ts\n *  type Contract = {\n *    delivery_success: [DeliverySuccessResponse, Metrics],\n *    delivery_failure: [DeliveryError]\n * }\n *  new Emitter<Contract>()\n *  .on('delivery_success', (res, metrics) => ...)\n *  .on('delivery_failure', (err) => ...)\n * ```\n */\nvar Emitter = /** @class */ (function () {\n    function Emitter(options) {\n        var _a;\n        this.callbacks = {};\n        this.warned = false;\n        this.maxListeners = (_a = options === null || options === void 0 ? void 0 : options.maxListeners) !== null && _a !== void 0 ? _a : 10;\n    }\n    Emitter.prototype.warnIfPossibleMemoryLeak = function (event) {\n        if (this.warned) {\n            return;\n        }\n        if (this.maxListeners &&\n            this.callbacks[event].length > this.maxListeners) {\n            console.warn(\"Event Emitter: Possible memory leak detected; \".concat(String(event), \" has exceeded \").concat(this.maxListeners, \" listeners.\"));\n            this.warned = true;\n        }\n    };\n    Emitter.prototype.on = function (event, callback) {\n        if (!this.callbacks[event]) {\n            this.callbacks[event] = [callback];\n        }\n        else {\n            this.callbacks[event].push(callback);\n            this.warnIfPossibleMemoryLeak(event);\n        }\n        return this;\n    };\n    Emitter.prototype.once = function (event, callback) {\n        var _this = this;\n        var on = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.off(event, on);\n            callback.apply(_this, args);\n        };\n        this.on(event, on);\n        return this;\n    };\n    Emitter.prototype.off = function (event, callback) {\n        var _a;\n        var fns = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        var without = fns.filter(function (fn) { return fn !== callback; });\n        this.callbacks[event] = without;\n        return this;\n    };\n    Emitter.prototype.emit = function (event) {\n        var _this = this;\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var callbacks = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        callbacks.forEach(function (callback) {\n            callback.apply(_this, args);\n        });\n        return this;\n    };\n    return Emitter;\n}());\n\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vZW1pdHRlci9lbWl0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQseUJBQXlCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDa0I7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9lbWl0dGVyL2VtaXR0ZXIuanM/ODM5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEV2ZW50IEVtaXR0ZXIgdGhhdCB0YWtlcyB0aGUgZXhwZWN0ZWQgY29udHJhY3QgYXMgYSBnZW5lcmljXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqICB0eXBlIENvbnRyYWN0ID0ge1xuICogICAgZGVsaXZlcnlfc3VjY2VzczogW0RlbGl2ZXJ5U3VjY2Vzc1Jlc3BvbnNlLCBNZXRyaWNzXSxcbiAqICAgIGRlbGl2ZXJ5X2ZhaWx1cmU6IFtEZWxpdmVyeUVycm9yXVxuICogfVxuICogIG5ldyBFbWl0dGVyPENvbnRyYWN0PigpXG4gKiAgLm9uKCdkZWxpdmVyeV9zdWNjZXNzJywgKHJlcywgbWV0cmljcykgPT4gLi4uKVxuICogIC5vbignZGVsaXZlcnlfZmFpbHVyZScsIChlcnIpID0+IC4uLilcbiAqIGBgYFxuICovXG52YXIgRW1pdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbWl0dGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLndhcm5lZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1heExpc3RlbmVycyA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tYXhMaXN0ZW5lcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEwO1xuICAgIH1cbiAgICBFbWl0dGVyLnByb3RvdHlwZS53YXJuSWZQb3NzaWJsZU1lbW9yeUxlYWsgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMud2FybmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4TGlzdGVuZXJzICYmXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ubGVuZ3RoID4gdGhpcy5tYXhMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkV2ZW50IEVtaXR0ZXI6IFBvc3NpYmxlIG1lbW9yeSBsZWFrIGRldGVjdGVkOyBcIi5jb25jYXQoU3RyaW5nKGV2ZW50KSwgXCIgaGFzIGV4Y2VlZGVkIFwiKS5jb25jYXQodGhpcy5tYXhMaXN0ZW5lcnMsIFwiIGxpc3RlbmVycy5cIikpO1xuICAgICAgICAgICAgdGhpcy53YXJuZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbGxiYWNrc1tldmVudF0pIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XSA9IFtjYWxsYmFja107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLndhcm5JZlBvc3NpYmxlTWVtb3J5TGVhayhldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5vZmYoZXZlbnQsIG9uKTtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KF90aGlzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbihldmVudCwgb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgZm5zID0gKF9hID0gdGhpcy5jYWxsYmFja3NbZXZlbnRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgdmFyIHdpdGhvdXQgPSBmbnMuZmlsdGVyKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4gIT09IGNhbGxiYWNrOyB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdID0gd2l0aG91dDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IChfYSA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gRW1pdHRlcjtcbn0oKSk7XG5leHBvcnQgeyBFbWl0dGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* binding */ Analytics)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./settings */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../generated/version */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../plugins/segmentio */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js\");\n/* harmony import */ var _event_factory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event-factory */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js\");\n/* harmony import */ var _dispatch_emit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dispatch-emit */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js\");\n/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./emitter */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./context */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n/* harmony import */ var _event_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./event-queue */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js\");\n/* harmony import */ var _lib_http_client__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/http-client */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\");\n\n\n\n\n\n\n\n\n\n\nclass Analytics extends _emitter__WEBPACK_IMPORTED_MODULE_5__.NodeEmitter {\n    _eventFactory;\n    _isClosed = false;\n    _pendingEvents = 0;\n    _closeAndFlushDefaultTimeout;\n    _publisher;\n    _isFlushing = false;\n    _queue;\n    ready;\n    constructor(settings) {\n        super();\n        (0,_settings__WEBPACK_IMPORTED_MODULE_0__.validateSettings)(settings);\n        this._eventFactory = new _event_factory__WEBPACK_IMPORTED_MODULE_3__.NodeEventFactory();\n        this._queue = new _event_queue__WEBPACK_IMPORTED_MODULE_7__.NodeEventQueue();\n        const flushInterval = settings.flushInterval ?? 10000;\n        this._closeAndFlushDefaultTimeout = flushInterval * 1.25; // add arbitrary multiplier in case an event is in a plugin.\n        const { plugin, publisher } = (0,_plugins_segmentio__WEBPACK_IMPORTED_MODULE_2__.createConfiguredNodePlugin)({\n            writeKey: settings.writeKey,\n            host: settings.host,\n            path: settings.path,\n            maxRetries: settings.maxRetries ?? 3,\n            flushAt: settings.flushAt ?? settings.maxEventsInBatch ?? 15,\n            httpRequestTimeout: settings.httpRequestTimeout,\n            disable: settings.disable,\n            flushInterval,\n            httpClient: typeof settings.httpClient === 'function'\n                ? new _lib_http_client__WEBPACK_IMPORTED_MODULE_8__.FetchHTTPClient(settings.httpClient)\n                : settings.httpClient ?? new _lib_http_client__WEBPACK_IMPORTED_MODULE_8__.FetchHTTPClient(),\n            oauthSettings: settings.oauthSettings,\n        }, this);\n        this._publisher = publisher;\n        this.ready = this.register(plugin).then(() => undefined);\n        this.emit('initialize', settings);\n        (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_9__.bindAll)(this);\n    }\n    get VERSION() {\n        return _generated_version__WEBPACK_IMPORTED_MODULE_1__.version;\n    }\n    /**\n     * Call this method to stop collecting new events and flush all existing events.\n     * This method also waits for any event method-specific callbacks to be triggered,\n     * and any of their subsequent promises to be resolved/rejected.\n     */\n    closeAndFlush({ timeout = this._closeAndFlushDefaultTimeout, } = {}) {\n        return this.flush({ timeout, close: true });\n    }\n    /**\n     * Call this method to flush all existing events..\n     * This method also waits for any event method-specific callbacks to be triggered,\n     * and any of their subsequent promises to be resolved/rejected.\n     */\n    async flush({ timeout, close = false, } = {}) {\n        if (this._isFlushing) {\n            // if we're already flushing, then we don't need to do anything\n            console.warn('Overlapping flush calls detected. Please wait for the previous flush to finish before calling .flush again');\n            return;\n        }\n        else {\n            this._isFlushing = true;\n        }\n        if (close) {\n            this._isClosed = true;\n        }\n        this._publisher.flush(this._pendingEvents);\n        const promise = new Promise((resolve) => {\n            if (!this._pendingEvents) {\n                resolve();\n            }\n            else {\n                this.once('drained', () => {\n                    resolve();\n                });\n            }\n        }).finally(() => {\n            this._isFlushing = false;\n        });\n        return timeout ? (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_10__.pTimeout)(promise, timeout).catch(() => undefined) : promise;\n    }\n    _dispatch(segmentEvent, callback) {\n        if (this._isClosed) {\n            this.emit('call_after_close', segmentEvent);\n            return undefined;\n        }\n        this._pendingEvents++;\n        (0,_dispatch_emit__WEBPACK_IMPORTED_MODULE_4__.dispatchAndEmit)(segmentEvent, this._queue, this, callback)\n            .catch((ctx) => ctx)\n            .finally(() => {\n            this._pendingEvents--;\n            if (!this._pendingEvents) {\n                this.emit('drained');\n            }\n        });\n    }\n    /**\n     * Combines two unassociated user identities.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#alias\n     */\n    alias({ userId, previousId, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.alias(userId, previousId, {\n            context,\n            integrations,\n            timestamp,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Associates an identified user with a collective.\n     *  @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#group\n     */\n    group({ timestamp, groupId, userId, anonymousId, traits = {}, context, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.group(groupId, traits, {\n            context,\n            anonymousId,\n            userId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Includes a unique userId and (maybe anonymousId) and any optional traits you know about them.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#identify\n     */\n    identify({ userId, anonymousId, traits = {}, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.identify(userId, traits, {\n            context,\n            anonymousId,\n            userId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * The page method lets you record page views on your website, along with optional extra information about the page being viewed.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#page\n     */\n    page({ userId, anonymousId, category, name, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.page(category ?? null, name ?? null, properties, { context, anonymousId, userId, timestamp, integrations, messageId });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Records screen views on your app, along with optional extra information\n     * about the screen viewed by the user.\n     *\n     * TODO: This is not documented on the segment docs ATM (for node).\n     */\n    screen({ userId, anonymousId, category, name, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.screen(category ?? null, name ?? null, properties, { context, anonymousId, userId, timestamp, integrations, messageId });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Records actions your users perform.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#track\n     */\n    track({ userId, anonymousId, event, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.track(event, properties, {\n            context,\n            userId,\n            anonymousId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Registers one or more plugins to augment Analytics functionality.\n     * @param plugins\n     */\n    register(...plugins) {\n        return this._queue.criticalTasks.run(async () => {\n            const ctx = _context__WEBPACK_IMPORTED_MODULE_6__.Context.system();\n            const registrations = plugins.map((xt) => this._queue.register(ctx, xt, this));\n            await Promise.all(registrations);\n            this.emit('register', plugins.map((el) => el.name));\n        });\n    }\n    /**\n     * Deregisters one or more plugins based on their names.\n     * @param pluginNames - The names of one or more plugins to deregister.\n     */\n    async deregister(...pluginNames) {\n        const ctx = _context__WEBPACK_IMPORTED_MODULE_6__.Context.system();\n        const deregistrations = pluginNames.map((pl) => {\n            const plugin = this._queue.plugins.find((p) => p.name === pl);\n            if (plugin) {\n                return this._queue.deregister(ctx, plugin, this);\n            }\n            else {\n                ctx.log('warn', `plugin ${pl} not found`);\n            }\n        });\n        await Promise.all(deregistrations);\n        this.emit('deregister', pluginNames);\n    }\n}\n//# sourceMappingURL=analytics-node.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2FuYWx5dGljcy1ub2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE0RDtBQUNkO0FBQ0M7QUFDbUI7QUFDZjtBQUNEO0FBQ1Y7QUFDSjtBQUNXO0FBQ007QUFDOUMsd0JBQXdCLGlEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBZ0I7QUFDeEIsaUNBQWlDLDREQUFnQjtBQUNqRCwwQkFBMEIsd0RBQWM7QUFDeEM7QUFDQSxrRUFBa0U7QUFDbEUsZ0JBQWdCLG9CQUFvQixFQUFFLDhFQUEwQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkRBQWU7QUFDckMsNkNBQTZDLDZEQUFlO0FBQzVEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQU87QUFDZjtBQUNBO0FBQ0EsZUFBZSx1REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0NBQStDLElBQUk7QUFDdkUsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEJBQTBCLElBQUk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1QseUJBQXlCLGtFQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0VBQWtFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBb0QscUNBQXFDO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0NBQWdDLGdEQUFnRDtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtGQUErRjtBQUMxRyxtR0FBbUcsa0VBQWtFO0FBQ3JLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtGQUErRjtBQUM1RyxxR0FBcUcsa0VBQWtFO0FBQ3ZLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0ZBQXNGO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkNBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2Q0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsSUFBSTtBQUM5QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2FuYWx5dGljcy1ub2RlLmpzP2U1OTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmluZEFsbCwgcFRpbWVvdXQgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyB2YWxpZGF0ZVNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vZ2VuZXJhdGVkL3ZlcnNpb24nO1xuaW1wb3J0IHsgY3JlYXRlQ29uZmlndXJlZE5vZGVQbHVnaW4gfSBmcm9tICcuLi9wbHVnaW5zL3NlZ21lbnRpbyc7XG5pbXBvcnQgeyBOb2RlRXZlbnRGYWN0b3J5IH0gZnJvbSAnLi9ldmVudC1mYWN0b3J5JztcbmltcG9ydCB7IGRpc3BhdGNoQW5kRW1pdCB9IGZyb20gJy4vZGlzcGF0Y2gtZW1pdCc7XG5pbXBvcnQgeyBOb2RlRW1pdHRlciB9IGZyb20gJy4vZW1pdHRlcic7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0JztcbmltcG9ydCB7IE5vZGVFdmVudFF1ZXVlIH0gZnJvbSAnLi9ldmVudC1xdWV1ZSc7XG5pbXBvcnQgeyBGZXRjaEhUVFBDbGllbnQgfSBmcm9tICcuLi9saWIvaHR0cC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEFuYWx5dGljcyBleHRlbmRzIE5vZGVFbWl0dGVyIHtcbiAgICBfZXZlbnRGYWN0b3J5O1xuICAgIF9pc0Nsb3NlZCA9IGZhbHNlO1xuICAgIF9wZW5kaW5nRXZlbnRzID0gMDtcbiAgICBfY2xvc2VBbmRGbHVzaERlZmF1bHRUaW1lb3V0O1xuICAgIF9wdWJsaXNoZXI7XG4gICAgX2lzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICBfcXVldWU7XG4gICAgcmVhZHk7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdmFsaWRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuX2V2ZW50RmFjdG9yeSA9IG5ldyBOb2RlRXZlbnRGYWN0b3J5KCk7XG4gICAgICAgIHRoaXMuX3F1ZXVlID0gbmV3IE5vZGVFdmVudFF1ZXVlKCk7XG4gICAgICAgIGNvbnN0IGZsdXNoSW50ZXJ2YWwgPSBzZXR0aW5ncy5mbHVzaEludGVydmFsID8/IDEwMDAwO1xuICAgICAgICB0aGlzLl9jbG9zZUFuZEZsdXNoRGVmYXVsdFRpbWVvdXQgPSBmbHVzaEludGVydmFsICogMS4yNTsgLy8gYWRkIGFyYml0cmFyeSBtdWx0aXBsaWVyIGluIGNhc2UgYW4gZXZlbnQgaXMgaW4gYSBwbHVnaW4uXG4gICAgICAgIGNvbnN0IHsgcGx1Z2luLCBwdWJsaXNoZXIgfSA9IGNyZWF0ZUNvbmZpZ3VyZWROb2RlUGx1Z2luKHtcbiAgICAgICAgICAgIHdyaXRlS2V5OiBzZXR0aW5ncy53cml0ZUtleSxcbiAgICAgICAgICAgIGhvc3Q6IHNldHRpbmdzLmhvc3QsXG4gICAgICAgICAgICBwYXRoOiBzZXR0aW5ncy5wYXRoLFxuICAgICAgICAgICAgbWF4UmV0cmllczogc2V0dGluZ3MubWF4UmV0cmllcyA/PyAzLFxuICAgICAgICAgICAgZmx1c2hBdDogc2V0dGluZ3MuZmx1c2hBdCA/PyBzZXR0aW5ncy5tYXhFdmVudHNJbkJhdGNoID8/IDE1LFxuICAgICAgICAgICAgaHR0cFJlcXVlc3RUaW1lb3V0OiBzZXR0aW5ncy5odHRwUmVxdWVzdFRpbWVvdXQsXG4gICAgICAgICAgICBkaXNhYmxlOiBzZXR0aW5ncy5kaXNhYmxlLFxuICAgICAgICAgICAgZmx1c2hJbnRlcnZhbCxcbiAgICAgICAgICAgIGh0dHBDbGllbnQ6IHR5cGVvZiBzZXR0aW5ncy5odHRwQ2xpZW50ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyBuZXcgRmV0Y2hIVFRQQ2xpZW50KHNldHRpbmdzLmh0dHBDbGllbnQpXG4gICAgICAgICAgICAgICAgOiBzZXR0aW5ncy5odHRwQ2xpZW50ID8/IG5ldyBGZXRjaEhUVFBDbGllbnQoKSxcbiAgICAgICAgICAgIG9hdXRoU2V0dGluZ3M6IHNldHRpbmdzLm9hdXRoU2V0dGluZ3MsXG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB0aGlzLl9wdWJsaXNoZXIgPSBwdWJsaXNoZXI7XG4gICAgICAgIHRoaXMucmVhZHkgPSB0aGlzLnJlZ2lzdGVyKHBsdWdpbikudGhlbigoKSA9PiB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2luaXRpYWxpemUnLCBzZXR0aW5ncyk7XG4gICAgICAgIGJpbmRBbGwodGhpcyk7XG4gICAgfVxuICAgIGdldCBWRVJTSU9OKCkge1xuICAgICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBzdG9wIGNvbGxlY3RpbmcgbmV3IGV2ZW50cyBhbmQgZmx1c2ggYWxsIGV4aXN0aW5nIGV2ZW50cy5cbiAgICAgKiBUaGlzIG1ldGhvZCBhbHNvIHdhaXRzIGZvciBhbnkgZXZlbnQgbWV0aG9kLXNwZWNpZmljIGNhbGxiYWNrcyB0byBiZSB0cmlnZ2VyZWQsXG4gICAgICogYW5kIGFueSBvZiB0aGVpciBzdWJzZXF1ZW50IHByb21pc2VzIHRvIGJlIHJlc29sdmVkL3JlamVjdGVkLlxuICAgICAqL1xuICAgIGNsb3NlQW5kRmx1c2goeyB0aW1lb3V0ID0gdGhpcy5fY2xvc2VBbmRGbHVzaERlZmF1bHRUaW1lb3V0LCB9ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1c2goeyB0aW1lb3V0LCBjbG9zZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBmbHVzaCBhbGwgZXhpc3RpbmcgZXZlbnRzLi5cbiAgICAgKiBUaGlzIG1ldGhvZCBhbHNvIHdhaXRzIGZvciBhbnkgZXZlbnQgbWV0aG9kLXNwZWNpZmljIGNhbGxiYWNrcyB0byBiZSB0cmlnZ2VyZWQsXG4gICAgICogYW5kIGFueSBvZiB0aGVpciBzdWJzZXF1ZW50IHByb21pc2VzIHRvIGJlIHJlc29sdmVkL3JlamVjdGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGZsdXNoKHsgdGltZW91dCwgY2xvc2UgPSBmYWxzZSwgfSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0ZsdXNoaW5nKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSdyZSBhbHJlYWR5IGZsdXNoaW5nLCB0aGVuIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignT3ZlcmxhcHBpbmcgZmx1c2ggY2FsbHMgZGV0ZWN0ZWQuIFBsZWFzZSB3YWl0IGZvciB0aGUgcHJldmlvdXMgZmx1c2ggdG8gZmluaXNoIGJlZm9yZSBjYWxsaW5nIC5mbHVzaCBhZ2FpbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faXNGbHVzaGluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsb3NlKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHVibGlzaGVyLmZsdXNoKHRoaXMuX3BlbmRpbmdFdmVudHMpO1xuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcGVuZGluZ0V2ZW50cykge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub25jZSgnZHJhaW5lZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2lzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aW1lb3V0ID8gcFRpbWVvdXQocHJvbWlzZSwgdGltZW91dCkuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKSA6IHByb21pc2U7XG4gICAgfVxuICAgIF9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0Nsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjYWxsX2FmdGVyX2Nsb3NlJywgc2VnbWVudEV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGVuZGluZ0V2ZW50cysrO1xuICAgICAgICBkaXNwYXRjaEFuZEVtaXQoc2VnbWVudEV2ZW50LCB0aGlzLl9xdWV1ZSwgdGhpcywgY2FsbGJhY2spXG4gICAgICAgICAgICAuY2F0Y2goKGN0eCkgPT4gY3R4KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0V2ZW50cy0tO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wZW5kaW5nRXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkcmFpbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0d28gdW5hc3NvY2lhdGVkIHVzZXIgaWRlbnRpdGllcy5cbiAgICAgKiBAbGluayBodHRwczovL3NlZ21lbnQuY29tL2RvY3MvY29ubmVjdGlvbnMvc291cmNlcy9jYXRhbG9nL2xpYnJhcmllcy9zZXJ2ZXIvbm9kZS8jYWxpYXNcbiAgICAgKi9cbiAgICBhbGlhcyh7IHVzZXJJZCwgcHJldmlvdXNJZCwgY29udGV4dCwgdGltZXN0YW1wLCBpbnRlZ3JhdGlvbnMsIG1lc3NhZ2VJZCwgfSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudEV2ZW50ID0gdGhpcy5fZXZlbnRGYWN0b3J5LmFsaWFzKHVzZXJJZCwgcHJldmlvdXNJZCwge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3NvY2lhdGVzIGFuIGlkZW50aWZpZWQgdXNlciB3aXRoIGEgY29sbGVjdGl2ZS5cbiAgICAgKiAgQGxpbmsgaHR0cHM6Ly9zZWdtZW50LmNvbS9kb2NzL2Nvbm5lY3Rpb25zL3NvdXJjZXMvY2F0YWxvZy9saWJyYXJpZXMvc2VydmVyL25vZGUvI2dyb3VwXG4gICAgICovXG4gICAgZ3JvdXAoeyB0aW1lc3RhbXAsIGdyb3VwSWQsIHVzZXJJZCwgYW5vbnltb3VzSWQsIHRyYWl0cyA9IHt9LCBjb250ZXh0LCBpbnRlZ3JhdGlvbnMsIG1lc3NhZ2VJZCwgfSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudEV2ZW50ID0gdGhpcy5fZXZlbnRGYWN0b3J5Lmdyb3VwKGdyb3VwSWQsIHRyYWl0cywge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGFub255bW91c0lkLFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY2x1ZGVzIGEgdW5pcXVlIHVzZXJJZCBhbmQgKG1heWJlIGFub255bW91c0lkKSBhbmQgYW55IG9wdGlvbmFsIHRyYWl0cyB5b3Uga25vdyBhYm91dCB0aGVtLlxuICAgICAqIEBsaW5rIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9ub2RlLyNpZGVudGlmeVxuICAgICAqL1xuICAgIGlkZW50aWZ5KHsgdXNlcklkLCBhbm9ueW1vdXNJZCwgdHJhaXRzID0ge30sIGNvbnRleHQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS5pZGVudGlmeSh1c2VySWQsIHRyYWl0cywge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGFub255bW91c0lkLFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBwYWdlIG1ldGhvZCBsZXRzIHlvdSByZWNvcmQgcGFnZSB2aWV3cyBvbiB5b3VyIHdlYnNpdGUsIGFsb25nIHdpdGggb3B0aW9uYWwgZXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHBhZ2UgYmVpbmcgdmlld2VkLlxuICAgICAqIEBsaW5rIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9ub2RlLyNwYWdlXG4gICAgICovXG4gICAgcGFnZSh7IHVzZXJJZCwgYW5vbnltb3VzSWQsIGNhdGVnb3J5LCBuYW1lLCBwcm9wZXJ0aWVzLCBjb250ZXh0LCB0aW1lc3RhbXAsIGludGVncmF0aW9ucywgbWVzc2FnZUlkLCB9LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBzZWdtZW50RXZlbnQgPSB0aGlzLl9ldmVudEZhY3RvcnkucGFnZShjYXRlZ29yeSA/PyBudWxsLCBuYW1lID8/IG51bGwsIHByb3BlcnRpZXMsIHsgY29udGV4dCwgYW5vbnltb3VzSWQsIHVzZXJJZCwgdGltZXN0YW1wLCBpbnRlZ3JhdGlvbnMsIG1lc3NhZ2VJZCB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZHMgc2NyZWVuIHZpZXdzIG9uIHlvdXIgYXBwLCBhbG9uZyB3aXRoIG9wdGlvbmFsIGV4dHJhIGluZm9ybWF0aW9uXG4gICAgICogYWJvdXQgdGhlIHNjcmVlbiB2aWV3ZWQgYnkgdGhlIHVzZXIuXG4gICAgICpcbiAgICAgKiBUT0RPOiBUaGlzIGlzIG5vdCBkb2N1bWVudGVkIG9uIHRoZSBzZWdtZW50IGRvY3MgQVRNIChmb3Igbm9kZSkuXG4gICAgICovXG4gICAgc2NyZWVuKHsgdXNlcklkLCBhbm9ueW1vdXNJZCwgY2F0ZWdvcnksIG5hbWUsIHByb3BlcnRpZXMsIGNvbnRleHQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS5zY3JlZW4oY2F0ZWdvcnkgPz8gbnVsbCwgbmFtZSA/PyBudWxsLCBwcm9wZXJ0aWVzLCB7IGNvbnRleHQsIGFub255bW91c0lkLCB1c2VySWQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmRzIGFjdGlvbnMgeW91ciB1c2VycyBwZXJmb3JtLlxuICAgICAqIEBsaW5rIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9ub2RlLyN0cmFja1xuICAgICAqL1xuICAgIHRyYWNrKHsgdXNlcklkLCBhbm9ueW1vdXNJZCwgZXZlbnQsIHByb3BlcnRpZXMsIGNvbnRleHQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS50cmFjayhldmVudCwgcHJvcGVydGllcywge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIGFub255bW91c0lkLFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBvbmUgb3IgbW9yZSBwbHVnaW5zIHRvIGF1Z21lbnQgQW5hbHl0aWNzIGZ1bmN0aW9uYWxpdHkuXG4gICAgICogQHBhcmFtIHBsdWdpbnNcbiAgICAgKi9cbiAgICByZWdpc3RlciguLi5wbHVnaW5zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5jcml0aWNhbFRhc2tzLnJ1bihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBDb250ZXh0LnN5c3RlbSgpO1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9ucyA9IHBsdWdpbnMubWFwKCh4dCkgPT4gdGhpcy5fcXVldWUucmVnaXN0ZXIoY3R4LCB4dCwgdGhpcykpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVnaXN0cmF0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlZ2lzdGVyJywgcGx1Z2lucy5tYXAoKGVsKSA9PiBlbC5uYW1lKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXJlZ2lzdGVycyBvbmUgb3IgbW9yZSBwbHVnaW5zIGJhc2VkIG9uIHRoZWlyIG5hbWVzLlxuICAgICAqIEBwYXJhbSBwbHVnaW5OYW1lcyAtIFRoZSBuYW1lcyBvZiBvbmUgb3IgbW9yZSBwbHVnaW5zIHRvIGRlcmVnaXN0ZXIuXG4gICAgICovXG4gICAgYXN5bmMgZGVyZWdpc3RlciguLi5wbHVnaW5OYW1lcykge1xuICAgICAgICBjb25zdCBjdHggPSBDb250ZXh0LnN5c3RlbSgpO1xuICAgICAgICBjb25zdCBkZXJlZ2lzdHJhdGlvbnMgPSBwbHVnaW5OYW1lcy5tYXAoKHBsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLl9xdWV1ZS5wbHVnaW5zLmZpbmQoKHApID0+IHAubmFtZSA9PT0gcGwpO1xuICAgICAgICAgICAgaWYgKHBsdWdpbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5kZXJlZ2lzdGVyKGN0eCwgcGx1Z2luLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCBgcGx1Z2luICR7cGx9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZGVyZWdpc3RyYXRpb25zKTtcbiAgICAgICAgdGhpcy5lbWl0KCdkZXJlZ2lzdGVyJywgcGx1Z2luTmFtZXMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuYWx5dGljcy1ub2RlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/context.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/context.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n// create a derived class since we may want to add node specific things to Context later\n\n// While this is not a type, it is a definition\nclass Context extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.CoreContext {\n    static system() {\n        return new this({ type: 'track', event: 'system' });\n    }\n}\n//# sourceMappingURL=context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNzRDtBQUN0RDtBQUNPLHNCQUFzQixnRUFBVztBQUN4QztBQUNBLDBCQUEwQixnQ0FBZ0M7QUFDMUQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2NvbnRleHQuanM/NGNhNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjcmVhdGUgYSBkZXJpdmVkIGNsYXNzIHNpbmNlIHdlIG1heSB3YW50IHRvIGFkZCBub2RlIHNwZWNpZmljIHRoaW5ncyB0byBDb250ZXh0IGxhdGVyXG5pbXBvcnQgeyBDb3JlQ29udGV4dCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbi8vIFdoaWxlIHRoaXMgaXMgbm90IGEgdHlwZSwgaXQgaXMgYSBkZWZpbml0aW9uXG5leHBvcnQgY2xhc3MgQ29udGV4dCBleHRlbmRzIENvcmVDb250ZXh0IHtcbiAgICBzdGF0aWMgc3lzdGVtKCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoeyB0eXBlOiAndHJhY2snLCBldmVudDogJ3N5c3RlbScgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGV4dC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatchAndEmit: () => (/* binding */ dispatchAndEmit)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./context */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n\n\nconst normalizeDispatchCb = (cb) => (ctx) => {\n    const failedDelivery = ctx.failedDelivery();\n    return failedDelivery ? cb(failedDelivery.reason, ctx) : cb(undefined, ctx);\n};\n/* Dispatch function, but swallow promise rejections and use event emitter instead */\nconst dispatchAndEmit = async (event, queue, emitter, callback) => {\n    try {\n        const context = new _context__WEBPACK_IMPORTED_MODULE_0__.Context(event);\n        const ctx = await (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.dispatch)(context, queue, emitter, {\n            ...(callback ? { callback: normalizeDispatchCb(callback) } : {}),\n        });\n        const failedDelivery = ctx.failedDelivery();\n        if (failedDelivery) {\n            emitter.emit('error', {\n                code: 'delivery_failure',\n                reason: failedDelivery.reason,\n                ctx: ctx,\n            });\n        }\n        else {\n            emitter.emit(event.type, ctx);\n        }\n    }\n    catch (err) {\n        emitter.emit('error', {\n            code: 'unknown',\n            reason: err,\n        });\n    }\n};\n//# sourceMappingURL=dispatch-emit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2Rpc3BhdGNoLWVtaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ2Y7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSw0QkFBNEIsNkNBQU87QUFDbkMsMEJBQTBCLGlFQUFRO0FBQ2xDLDZCQUE2QiwwQ0FBMEMsSUFBSTtBQUMzRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZGlzcGF0Y2gtZW1pdC5qcz8yN2Y0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRpc3BhdGNoIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4vY29udGV4dCc7XG5jb25zdCBub3JtYWxpemVEaXNwYXRjaENiID0gKGNiKSA9PiAoY3R4KSA9PiB7XG4gICAgY29uc3QgZmFpbGVkRGVsaXZlcnkgPSBjdHguZmFpbGVkRGVsaXZlcnkoKTtcbiAgICByZXR1cm4gZmFpbGVkRGVsaXZlcnkgPyBjYihmYWlsZWREZWxpdmVyeS5yZWFzb24sIGN0eCkgOiBjYih1bmRlZmluZWQsIGN0eCk7XG59O1xuLyogRGlzcGF0Y2ggZnVuY3Rpb24sIGJ1dCBzd2FsbG93IHByb21pc2UgcmVqZWN0aW9ucyBhbmQgdXNlIGV2ZW50IGVtaXR0ZXIgaW5zdGVhZCAqL1xuZXhwb3J0IGNvbnN0IGRpc3BhdGNoQW5kRW1pdCA9IGFzeW5jIChldmVudCwgcXVldWUsIGVtaXR0ZXIsIGNhbGxiYWNrKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IG5ldyBDb250ZXh0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY3R4ID0gYXdhaXQgZGlzcGF0Y2goY29udGV4dCwgcXVldWUsIGVtaXR0ZXIsIHtcbiAgICAgICAgICAgIC4uLihjYWxsYmFjayA/IHsgY2FsbGJhY2s6IG5vcm1hbGl6ZURpc3BhdGNoQ2IoY2FsbGJhY2spIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmYWlsZWREZWxpdmVyeSA9IGN0eC5mYWlsZWREZWxpdmVyeSgpO1xuICAgICAgICBpZiAoZmFpbGVkRGVsaXZlcnkpIHtcbiAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgY29kZTogJ2RlbGl2ZXJ5X2ZhaWx1cmUnLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogZmFpbGVkRGVsaXZlcnkucmVhc29uLFxuICAgICAgICAgICAgICAgIGN0eDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoZXZlbnQudHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjb2RlOiAndW5rbm93bicsXG4gICAgICAgICAgICByZWFzb246IGVycixcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3BhdGNoLWVtaXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/emitter.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEmitter: () => (/* binding */ NodeEmitter)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n\nclass NodeEmitter extends _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__.Emitter {\n}\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2VtaXR0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFDcEQsMEJBQTBCLHFFQUFPO0FBQ3hDO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZW1pdHRlci5qcz8zOTA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5leHBvcnQgY2xhc3MgTm9kZUVtaXR0ZXIgZXh0ZW5kcyBFbWl0dGVyIHtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtaXR0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEventFactory: () => (/* binding */ NodeEventFactory)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n/* harmony import */ var _lib_get_message_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/get-message-id */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js\");\n\n\nclass NodeEventFactory extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.CoreEventFactory {\n    constructor() {\n        super({\n            createMessageId: _lib_get_message_id__WEBPACK_IMPORTED_MODULE_0__.createMessageId,\n            onFinishedEvent: (event) => {\n                (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.assertUserIdentity)(event);\n            },\n        });\n    }\n}\n//# sourceMappingURL=event-factory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LWZhY3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRTtBQUN2QjtBQUNqRCwrQkFBK0IscUVBQWdCO0FBQ3REO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQSxnQkFBZ0IsMkVBQWtCO0FBQ2xDLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LWZhY3RvcnkuanM/YjAwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnRVc2VySWRlbnRpdHksIENvcmVFdmVudEZhY3RvcnkgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyBjcmVhdGVNZXNzYWdlSWQgfSBmcm9tICcuLi9saWIvZ2V0LW1lc3NhZ2UtaWQnO1xuZXhwb3J0IGNsYXNzIE5vZGVFdmVudEZhY3RvcnkgZXh0ZW5kcyBDb3JlRXZlbnRGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgY3JlYXRlTWVzc2FnZUlkLFxuICAgICAgICAgICAgb25GaW5pc2hlZEV2ZW50OiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NlcnRVc2VySWRlbnRpdHkoZXZlbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnQtZmFjdG9yeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEventQueue: () => (/* binding */ NodeEventQueue)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\");\n\nclass NodePriorityQueue extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.PriorityQueue {\n    constructor() {\n        super(1, []);\n    }\n    // do not use an internal \"seen\" map\n    getAttempts(ctx) {\n        return ctx.attempts ?? 0;\n    }\n    updateAttempts(ctx) {\n        ctx.attempts = this.getAttempts(ctx) + 1;\n        return this.getAttempts(ctx);\n    }\n}\nclass NodeEventQueue extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.CoreEventQueue {\n    constructor() {\n        super(new NodePriorityQueue());\n    }\n}\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LXF1ZXVlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RTtBQUN4RSxnQ0FBZ0Msa0VBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNkJBQTZCLG1FQUFjO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZXZlbnQtcXVldWUuanM/MWM3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb3JlRXZlbnRRdWV1ZSwgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmNsYXNzIE5vZGVQcmlvcml0eVF1ZXVlIGV4dGVuZHMgUHJpb3JpdHlRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKDEsIFtdKTtcbiAgICB9XG4gICAgLy8gZG8gbm90IHVzZSBhbiBpbnRlcm5hbCBcInNlZW5cIiBtYXBcbiAgICBnZXRBdHRlbXB0cyhjdHgpIHtcbiAgICAgICAgcmV0dXJuIGN0eC5hdHRlbXB0cyA/PyAwO1xuICAgIH1cbiAgICB1cGRhdGVBdHRlbXB0cyhjdHgpIHtcbiAgICAgICAgY3R4LmF0dGVtcHRzID0gdGhpcy5nZXRBdHRlbXB0cyhjdHgpICsgMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0ZW1wdHMoY3R4KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTm9kZUV2ZW50UXVldWUgZXh0ZW5kcyBDb3JlRXZlbnRRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKG5ldyBOb2RlUHJpb3JpdHlRdWV1ZSgpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudC1xdWV1ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/settings.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateSettings: () => (/* binding */ validateSettings)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n\nconst validateSettings = (settings) => {\n    if (!settings.writeKey) {\n        throw new _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.ValidationError('writeKey', 'writeKey is missing.');\n    }\n};\n//# sourceMappingURL=settings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL3NldHRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBEO0FBQ25EO0FBQ1A7QUFDQSxrQkFBa0Isb0VBQWU7QUFDakM7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL3NldHRpbmdzLmpzPzNkNjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlU2V0dGluZ3MgPSAoc2V0dGluZ3MpID0+IHtcbiAgICBpZiAoIXNldHRpbmdzLndyaXRlS2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ3dyaXRlS2V5JywgJ3dyaXRlS2V5IGlzIG1pc3NpbmcuJyk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldHRpbmdzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/generated/version.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n// This file is generated.\nconst version = '2.1.3';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vZ2VuZXJhdGVkL3ZlcnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2dlbmVyYXRlZC92ZXJzaW9uLmpzP2QyYWQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGdlbmVyYXRlZC5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uID0gJzIuMS4zJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/index.common.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/index.common.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* reexport safe */ _app_analytics_node__WEBPACK_IMPORTED_MODULE_0__.Analytics),\n/* harmony export */   Context: () => (/* reexport safe */ _app_context__WEBPACK_IMPORTED_MODULE_1__.Context),\n/* harmony export */   FetchHTTPClient: () => (/* reexport safe */ _lib_http_client__WEBPACK_IMPORTED_MODULE_2__.FetchHTTPClient)\n/* harmony export */ });\n/* harmony import */ var _app_analytics_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app/analytics-node */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js\");\n/* harmony import */ var _app_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app/context */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n/* harmony import */ var _lib_http_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/http-client */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\");\n\n\n\n//# sourceMappingURL=index.common.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vaW5kZXguY29tbW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRDtBQUNUO0FBQ2E7QUFDckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9pbmRleC5jb21tb24uanM/Yjk4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBBbmFseXRpY3MgfSBmcm9tICcuL2FwcC9hbmFseXRpY3Mtbm9kZSc7XG5leHBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi9hcHAvY29udGV4dCc7XG5leHBvcnQgeyBGZXRjaEhUVFBDbGllbnQsIH0gZnJvbSAnLi9saWIvaHR0cC1jbGllbnQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY29tbW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/index.common.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.Analytics),\n/* harmony export */   Context: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.Context),\n/* harmony export */   FetchHTTPClient: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.FetchHTTPClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _index_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.common */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/index.common.js\");\n\n// export Analytics as both a named export and a default export (for backwards-compat. reasons)\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_index_common__WEBPACK_IMPORTED_MODULE_0__.Analytics);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFDL0I7QUFDMkM7QUFDM0MsaUVBQWUsb0RBQVMsRUFBQztBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2luZGV4LmpzP2JjNDQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9pbmRleC5jb21tb24nO1xuLy8gZXhwb3J0IEFuYWx5dGljcyBhcyBib3RoIGEgbmFtZWQgZXhwb3J0IGFuZCBhIGRlZmF1bHQgZXhwb3J0IChmb3IgYmFja3dhcmRzLWNvbXBhdC4gcmVhc29ucylcbmltcG9ydCB7IEFuYWx5dGljcyB9IGZyb20gJy4vaW5kZXguY29tbW9uJztcbmV4cG9ydCBkZWZhdWx0IEFuYWx5dGljcztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/abort.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortController: () => (/* binding */ AbortController),\n/* harmony export */   AbortSignal: () => (/* binding */ AbortSignal),\n/* harmony export */   abortSignalAfterTimeout: () => (/* binding */ abortSignalAfterTimeout)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\");\n/**\n * use non-native event emitter for the benefit of non-node runtimes like CF workers.\n */\n\n\n/**\n * adapted from: https://www.npmjs.com/package/node-abort-controller\n */\nclass AbortSignal {\n    onabort = null;\n    aborted = false;\n    eventEmitter = new _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    toString() {\n        return '[object AbortSignal]';\n    }\n    get [Symbol.toStringTag]() {\n        return 'AbortSignal';\n    }\n    removeEventListener(...args) {\n        this.eventEmitter.off(...args);\n    }\n    addEventListener(...args) {\n        this.eventEmitter.on(...args);\n    }\n    dispatchEvent(type) {\n        const event = { type, target: this };\n        const handlerName = `on${type}`;\n        if (typeof this[handlerName] === 'function') {\n            ;\n            this[handlerName](event);\n        }\n        this.eventEmitter.emit(type, event);\n    }\n}\n/**\n * This polyfill is only neccessary to support versions of node < 14.17.\n * Can be removed once node 14 support is dropped.\n */\nclass AbortController {\n    signal = new AbortSignal();\n    abort() {\n        if (this.signal.aborted)\n            return;\n        this.signal.aborted = true;\n        this.signal.dispatchEvent('abort');\n    }\n    toString() {\n        return '[object AbortController]';\n    }\n    get [Symbol.toStringTag]() {\n        return 'AbortController';\n    }\n}\n/**\n * @param timeoutMs - Set a request timeout, after which the request is cancelled.\n */\nconst abortSignalAfterTimeout = (timeoutMs) => {\n    if ((0,_env__WEBPACK_IMPORTED_MODULE_0__.detectRuntime)() === 'cloudflare-worker') {\n        return []; // TODO: this is broken in cloudflare workers, otherwise results in \"A hanging Promise was canceled...\" error.\n    }\n    const ac = new (globalThis.AbortController || AbortController)();\n    const timeoutId = setTimeout(() => {\n        ac.abort();\n    }, timeoutMs);\n    // Allow Node.js processes to exit early if only the timeout is running\n    timeoutId?.unref?.();\n    return [ac.signal, timeoutId];\n};\n//# sourceMappingURL=abort.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Fib3J0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzJEO0FBQ3JCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHVCQUF1QixxRUFBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixpQ0FBaUMsS0FBSztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxRQUFRLG1EQUFhO0FBQ3JCLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Fib3J0LmpzPzU1ZmMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiB1c2Ugbm9uLW5hdGl2ZSBldmVudCBlbWl0dGVyIGZvciB0aGUgYmVuZWZpdCBvZiBub24tbm9kZSBydW50aW1lcyBsaWtlIENGIHdvcmtlcnMuXG4gKi9cbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5pbXBvcnQgeyBkZXRlY3RSdW50aW1lIH0gZnJvbSAnLi9lbnYnO1xuLyoqXG4gKiBhZGFwdGVkIGZyb206IGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL25vZGUtYWJvcnQtY29udHJvbGxlclxuICovXG5leHBvcnQgY2xhc3MgQWJvcnRTaWduYWwge1xuICAgIG9uYWJvcnQgPSBudWxsO1xuICAgIGFib3J0ZWQgPSBmYWxzZTtcbiAgICBldmVudEVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gJ1tvYmplY3QgQWJvcnRTaWduYWxdJztcbiAgICB9XG4gICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgICAgICByZXR1cm4gJ0Fib3J0U2lnbmFsJztcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lciguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZiguLi5hcmdzKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lciguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9uKC4uLmFyZ3MpO1xuICAgIH1cbiAgICBkaXNwYXRjaEV2ZW50KHR5cGUpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB7IHR5cGUsIHRhcmdldDogdGhpcyB9O1xuICAgICAgICBjb25zdCBoYW5kbGVyTmFtZSA9IGBvbiR7dHlwZX1gO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXNbaGFuZGxlck5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICB0aGlzW2hhbmRsZXJOYW1lXShldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCBldmVudCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIHBvbHlmaWxsIGlzIG9ubHkgbmVjY2Vzc2FyeSB0byBzdXBwb3J0IHZlcnNpb25zIG9mIG5vZGUgPCAxNC4xNy5cbiAqIENhbiBiZSByZW1vdmVkIG9uY2Ugbm9kZSAxNCBzdXBwb3J0IGlzIGRyb3BwZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBYm9ydENvbnRyb2xsZXIge1xuICAgIHNpZ25hbCA9IG5ldyBBYm9ydFNpZ25hbCgpO1xuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy5zaWduYWwuYWJvcnRlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zaWduYWwuYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQoJ2Fib3J0Jyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gJ1tvYmplY3QgQWJvcnRDb250cm9sbGVyXSc7XG4gICAgfVxuICAgIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICAgICAgcmV0dXJuICdBYm9ydENvbnRyb2xsZXInO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHRpbWVvdXRNcyAtIFNldCBhIHJlcXVlc3QgdGltZW91dCwgYWZ0ZXIgd2hpY2ggdGhlIHJlcXVlc3QgaXMgY2FuY2VsbGVkLlxuICovXG5leHBvcnQgY29uc3QgYWJvcnRTaWduYWxBZnRlclRpbWVvdXQgPSAodGltZW91dE1zKSA9PiB7XG4gICAgaWYgKGRldGVjdFJ1bnRpbWUoKSA9PT0gJ2Nsb3VkZmxhcmUtd29ya2VyJykge1xuICAgICAgICByZXR1cm4gW107IC8vIFRPRE86IHRoaXMgaXMgYnJva2VuIGluIGNsb3VkZmxhcmUgd29ya2Vycywgb3RoZXJ3aXNlIHJlc3VsdHMgaW4gXCJBIGhhbmdpbmcgUHJvbWlzZSB3YXMgY2FuY2VsZWQuLi5cIiBlcnJvci5cbiAgICB9XG4gICAgY29uc3QgYWMgPSBuZXcgKGdsb2JhbFRoaXMuQWJvcnRDb250cm9sbGVyIHx8IEFib3J0Q29udHJvbGxlcikoKTtcbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYWMuYWJvcnQoKTtcbiAgICB9LCB0aW1lb3V0TXMpO1xuICAgIC8vIEFsbG93IE5vZGUuanMgcHJvY2Vzc2VzIHRvIGV4aXQgZWFybHkgaWYgb25seSB0aGUgdGltZW91dCBpcyBydW5uaW5nXG4gICAgdGltZW91dElkPy51bnJlZj8uKCk7XG4gICAgcmV0dXJuIFthYy5zaWduYWwsIHRpbWVvdXRJZF07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWJvcnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tryCreateFormattedUrl: () => (/* binding */ tryCreateFormattedUrl)\n/* harmony export */ });\nconst stripTrailingSlash = (str) => str.replace(/\\/$/, '');\n/**\n *\n * @param host e.g. \"http://foo.com\"\n * @param path e.g. \"/bar\"\n * @returns \"e.g.\" \"http://foo.com/bar\"\n */\nconst tryCreateFormattedUrl = (host, path) => {\n    return stripTrailingSlash(new URL(path || '', host).href);\n};\n//# sourceMappingURL=create-url.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2NyZWF0ZS11cmwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9saWIvY3JlYXRlLXVybC5qcz8zOWZlIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHN0cmlwVHJhaWxpbmdTbGFzaCA9IChzdHIpID0+IHN0ci5yZXBsYWNlKC9cXC8kLywgJycpO1xuLyoqXG4gKlxuICogQHBhcmFtIGhvc3QgZS5nLiBcImh0dHA6Ly9mb28uY29tXCJcbiAqIEBwYXJhbSBwYXRoIGUuZy4gXCIvYmFyXCJcbiAqIEByZXR1cm5zIFwiZS5nLlwiIFwiaHR0cDovL2Zvby5jb20vYmFyXCJcbiAqL1xuZXhwb3J0IGNvbnN0IHRyeUNyZWF0ZUZvcm1hdHRlZFVybCA9IChob3N0LCBwYXRoKSA9PiB7XG4gICAgcmV0dXJuIHN0cmlwVHJhaWxpbmdTbGFzaChuZXcgVVJMKHBhdGggfHwgJycsIGhvc3QpLmhyZWYpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS11cmwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js":
/*!******************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/env.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   detectRuntime: () => (/* binding */ detectRuntime)\n/* harmony export */ });\nconst detectRuntime = () => {\n    if (typeof process === 'object' &&\n        process &&\n        typeof process.env === 'object' &&\n        process.env &&\n        typeof process.version === 'string') {\n        return 'node';\n    }\n    if (typeof window === 'object') {\n        return 'browser';\n    }\n    // @ts-ignore\n    if (typeof WebSocketPair !== 'undefined') {\n        return 'cloudflare-worker';\n    }\n    // @ts-ignore\n    if (typeof EdgeRuntime === 'string') {\n        return 'vercel-edge';\n    }\n    if (\n    // @ts-ignore\n    typeof WorkerGlobalScope !== 'undefined' &&\n        // @ts-ignore\n        typeof importScripts === 'function') {\n        return 'web-worker';\n    }\n    return 'unknown';\n};\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2xpYi9lbnYuanM/NDNjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZGV0ZWN0UnVudGltZSA9ICgpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHByb2Nlc3MgJiZcbiAgICAgICAgdHlwZW9mIHByb2Nlc3MuZW52ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBwcm9jZXNzLmVudiAmJlxuICAgICAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gJ25vZGUnO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuICdicm93c2VyJztcbiAgICB9XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmICh0eXBlb2YgV2ViU29ja2V0UGFpciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuICdjbG91ZGZsYXJlLXdvcmtlcic7XG4gICAgfVxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodHlwZW9mIEVkZ2VSdW50aW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gJ3ZlcmNlbC1lZGdlJztcbiAgICB9XG4gICAgaWYgKFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdHlwZW9mIGltcG9ydFNjcmlwdHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuICd3ZWItd29ya2VyJztcbiAgICB9XG4gICAgcmV0dXJuICd1bmtub3duJztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\nconst fetch = async (...args) => {\n    if (globalThis.fetch) {\n        return globalThis.fetch(...args);\n    }\n    // This guard causes is important, as it causes dead-code elimination to be enabled inside this block.\n    // @ts-ignore\n    else if (typeof EdgeRuntime !== 'string') {\n        return (await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/tr46\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/whatwg-url\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions\")]).then(__webpack_require__.bind(__webpack_require__, /*! node-fetch */ \"(ssr)/./node_modules/node-fetch/lib/index.mjs\"))).default(...args);\n    }\n    else {\n        throw new Error('Invariant: an edge runtime that does not support fetch should not exist');\n    }\n};\n//# sourceMappingURL=fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpV0FBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2ZldGNoLmpzP2NiNDUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGZldGNoID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5mZXRjaCkge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5mZXRjaCguLi5hcmdzKTtcbiAgICB9XG4gICAgLy8gVGhpcyBndWFyZCBjYXVzZXMgaXMgaW1wb3J0YW50LCBhcyBpdCBjYXVzZXMgZGVhZC1jb2RlIGVsaW1pbmF0aW9uIHRvIGJlIGVuYWJsZWQgaW5zaWRlIHRoaXMgYmxvY2suXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGVsc2UgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCBpbXBvcnQoJ25vZGUtZmV0Y2gnKSkuZGVmYXVsdCguLi5hcmdzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YXJpYW50OiBhbiBlZGdlIHJ1bnRpbWUgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IGZldGNoIHNob3VsZCBub3QgZXhpc3QnKTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMessageId: () => (/* binding */ createMessageId)\n/* harmony export */ });\n/* harmony import */ var _uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./uuid */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n\n/**\n * get a unique messageId with a very low chance of collisions\n * using @lukeed/uuid/secure uses the node crypto module, which is the fastest\n * @example \"node-next-1668208232027-743be593-7789-4b74-8078-cbcc8894c586\"\n */\nconst createMessageId = () => {\n    return `node-next-${Date.now()}-${(0,_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)()}`;\n};\n//# sourceMappingURL=get-message-id.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2dldC1tZXNzYWdlLWlkLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHdCQUF3QixXQUFXLEdBQUcsMkNBQUksR0FBRztBQUM3QztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2dldC1tZXNzYWdlLWlkLmpzP2QyZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXVpZCB9IGZyb20gJy4vdXVpZCc7XG4vKipcbiAqIGdldCBhIHVuaXF1ZSBtZXNzYWdlSWQgd2l0aCBhIHZlcnkgbG93IGNoYW5jZSBvZiBjb2xsaXNpb25zXG4gKiB1c2luZyBAbHVrZWVkL3V1aWQvc2VjdXJlIHVzZXMgdGhlIG5vZGUgY3J5cHRvIG1vZHVsZSwgd2hpY2ggaXMgdGhlIGZhc3Rlc3RcbiAqIEBleGFtcGxlIFwibm9kZS1uZXh0LTE2NjgyMDgyMzIwMjctNzQzYmU1OTMtNzc4OS00Yjc0LTgwNzgtY2JjYzg4OTRjNTg2XCJcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZU1lc3NhZ2VJZCA9ICgpID0+IHtcbiAgICByZXR1cm4gYG5vZGUtbmV4dC0ke0RhdGUubm93KCl9LSR7dXVpZCgpfWA7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LW1lc3NhZ2UtaWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchHTTPClient: () => (/* binding */ FetchHTTPClient)\n/* harmony export */ });\n/* harmony import */ var _abort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./abort */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js\");\n/* harmony import */ var _fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js\");\n\n\n/**\n * Default HTTP client implementation using fetch\n */\nclass FetchHTTPClient {\n    _fetch;\n    constructor(fetchFn) {\n        this._fetch = fetchFn ?? _fetch__WEBPACK_IMPORTED_MODULE_1__.fetch;\n    }\n    async makeRequest(options) {\n        const [signal, timeoutId] = (0,_abort__WEBPACK_IMPORTED_MODULE_0__.abortSignalAfterTimeout)(options.httpRequestTimeout);\n        const requestInit = {\n            url: options.url,\n            method: options.method,\n            headers: options.headers,\n            body: options.body,\n            signal: signal,\n        };\n        return this._fetch(options.url, requestInit).finally(() => clearTimeout(timeoutId));\n    }\n}\n//# sourceMappingURL=http-client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2h0dHAtY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrRDtBQUNGO0FBQ2hEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGlDQUFpQyx5Q0FBWTtBQUM3QztBQUNBO0FBQ0Esb0NBQW9DLCtEQUF1QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2h0dHAtY2xpZW50LmpzP2IwMTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWJvcnRTaWduYWxBZnRlclRpbWVvdXQgfSBmcm9tICcuL2Fib3J0JztcbmltcG9ydCB7IGZldGNoIGFzIGRlZmF1bHRGZXRjaCB9IGZyb20gJy4vZmV0Y2gnO1xuLyoqXG4gKiBEZWZhdWx0IEhUVFAgY2xpZW50IGltcGxlbWVudGF0aW9uIHVzaW5nIGZldGNoXG4gKi9cbmV4cG9ydCBjbGFzcyBGZXRjaEhUVFBDbGllbnQge1xuICAgIF9mZXRjaDtcbiAgICBjb25zdHJ1Y3RvcihmZXRjaEZuKSB7XG4gICAgICAgIHRoaXMuX2ZldGNoID0gZmV0Y2hGbiA/PyBkZWZhdWx0RmV0Y2g7XG4gICAgfVxuICAgIGFzeW5jIG1ha2VSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgW3NpZ25hbCwgdGltZW91dElkXSA9IGFib3J0U2lnbmFsQWZ0ZXJUaW1lb3V0KG9wdGlvbnMuaHR0cFJlcXVlc3RUaW1lb3V0KTtcbiAgICAgICAgY29uc3QgcmVxdWVzdEluaXQgPSB7XG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBvcHRpb25zLm1ldGhvZCxcbiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IG9wdGlvbnMuYm9keSxcbiAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2gob3B0aW9ucy51cmwsIHJlcXVlc3RJbml0KS5maW5hbGx5KCgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1odHRwLWNsaWVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TokenManager: () => (/* binding */ TokenManager)\n/* harmony export */ });\n/* harmony import */ var _uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./uuid */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(ssr)/./node_modules/jose/dist/node/esm/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(ssr)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n\n\n\n\nconst isAccessToken = (thing) => {\n    return Boolean(thing &&\n        typeof thing === 'object' &&\n        'access_token' in thing &&\n        'expires_in' in thing &&\n        typeof thing.access_token === 'string' &&\n        typeof thing.expires_in === 'number');\n};\nconst isValidCustomResponse = (response) => {\n    return typeof response.text === 'function';\n};\nfunction convertHeaders(headers) {\n    const lowercaseHeaders = {};\n    if (!headers)\n        return {};\n    if (isHeaders(headers)) {\n        for (const [name, value] of headers.entries()) {\n            lowercaseHeaders[name.toLowerCase()] = value;\n        }\n        return lowercaseHeaders;\n    }\n    for (const [name, value] of Object.entries(headers)) {\n        lowercaseHeaders[name.toLowerCase()] = value;\n    }\n    return lowercaseHeaders;\n}\nfunction isHeaders(thing) {\n    if (typeof thing === 'object' &&\n        thing !== null &&\n        'entries' in Object(thing) &&\n        typeof Object(thing).entries === 'function') {\n        return true;\n    }\n    return false;\n}\nclass TokenManager {\n    alg = 'RS256';\n    grantType = 'client_credentials';\n    clientAssertionType = 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer';\n    clientId;\n    clientKey;\n    keyId;\n    scope;\n    authServer;\n    httpClient;\n    maxRetries;\n    clockSkewInSeconds = 0;\n    accessToken;\n    tokenEmitter = new _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    retryCount;\n    pollerTimer;\n    constructor(props) {\n        this.keyId = props.keyId;\n        this.clientId = props.clientId;\n        this.clientKey = props.clientKey;\n        this.authServer = props.authServer ?? 'https://oauth2.segment.io';\n        this.scope = props.scope ?? 'tracking_api:write';\n        this.httpClient = props.httpClient;\n        this.maxRetries = props.maxRetries;\n        this.tokenEmitter.on('access_token', (event) => {\n            if ('token' in event) {\n                this.accessToken = event.token;\n            }\n        });\n        this.retryCount = 0;\n    }\n    stopPoller() {\n        clearTimeout(this.pollerTimer);\n    }\n    async pollerLoop() {\n        let timeUntilRefreshInMs = 25;\n        let response;\n        try {\n            response = await this.requestAccessToken();\n        }\n        catch (err) {\n            // Error without a status code - likely networking, retry\n            return this.handleTransientError({ error: err });\n        }\n        if (!isValidCustomResponse(response)) {\n            return this.handleInvalidCustomResponse();\n        }\n        const headers = convertHeaders(response.headers);\n        if (headers['date']) {\n            this.updateClockSkew(Date.parse(headers['date']));\n        }\n        // Handle status codes!\n        if (response.status === 200) {\n            try {\n                const body = await response.text();\n                const token = JSON.parse(body);\n                if (!isAccessToken(token)) {\n                    throw new Error('Response did not contain a valid access_token and expires_in');\n                }\n                // Success, we have a token!\n                token.expires_at = Math.round(Date.now() / 1000) + token.expires_in;\n                this.tokenEmitter.emit('access_token', { token });\n                // Reset our failure count\n                this.retryCount = 0;\n                // Refresh the token after half the expiry time passes\n                timeUntilRefreshInMs = (token.expires_in / 2) * 1000;\n                return this.queueNextPoll(timeUntilRefreshInMs);\n            }\n            catch (err) {\n                // Something went really wrong with the body, lets surface an error and try again?\n                return this.handleTransientError({ error: err, forceEmitError: true });\n            }\n        }\n        else if (response.status === 429) {\n            // Rate limited, wait for the reset time\n            return await this.handleRateLimited(response, headers, timeUntilRefreshInMs);\n        }\n        else if ([400, 401, 415].includes(response.status)) {\n            // Unrecoverable errors, stops the poller\n            return this.handleUnrecoverableErrors(response);\n        }\n        else {\n            return this.handleTransientError({\n                error: new Error(`[${response.status}] ${response.statusText}`),\n            });\n        }\n    }\n    handleTransientError({ error, forceEmitError, }) {\n        this.incrementRetries({ error, forceEmitError });\n        const timeUntilRefreshInMs = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.backoff)({\n            attempt: this.retryCount,\n            minTimeout: 25,\n            maxTimeout: 1000,\n        });\n        this.queueNextPoll(timeUntilRefreshInMs);\n    }\n    handleInvalidCustomResponse() {\n        this.tokenEmitter.emit('access_token', {\n            error: new Error('HTTPClient does not implement response.text method'),\n        });\n    }\n    async handleRateLimited(response, headers, timeUntilRefreshInMs) {\n        this.incrementRetries({\n            error: new Error(`[${response.status}] ${response.statusText}`),\n        });\n        if (headers['x-ratelimit-reset']) {\n            const rateLimitResetTimestamp = parseInt(headers['x-ratelimit-reset'], 10);\n            if (isFinite(rateLimitResetTimestamp)) {\n                timeUntilRefreshInMs =\n                    rateLimitResetTimestamp - Date.now() + this.clockSkewInSeconds * 1000;\n            }\n            else {\n                timeUntilRefreshInMs = 5 * 1000;\n            }\n            // We want subsequent calls to get_token to be able to interrupt our\n            //  Timeout when it's waiting for e.g. a long normal expiration, but\n            //  not when we're waiting for a rate limit reset. Sleep instead.\n            await (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.sleep)(timeUntilRefreshInMs);\n            timeUntilRefreshInMs = 0;\n        }\n        this.queueNextPoll(timeUntilRefreshInMs);\n    }\n    handleUnrecoverableErrors(response) {\n        this.retryCount = 0;\n        this.tokenEmitter.emit('access_token', {\n            error: new Error(`[${response.status}] ${response.statusText}`),\n        });\n        this.stopPoller();\n    }\n    updateClockSkew(dateInMs) {\n        this.clockSkewInSeconds = (Date.now() - dateInMs) / 1000;\n    }\n    incrementRetries({ error, forceEmitError, }) {\n        this.retryCount++;\n        if (forceEmitError || this.retryCount % this.maxRetries === 0) {\n            this.retryCount = 0;\n            this.tokenEmitter.emit('access_token', { error: error });\n        }\n    }\n    queueNextPoll(timeUntilRefreshInMs) {\n        this.pollerTimer = setTimeout(() => this.pollerLoop(), timeUntilRefreshInMs);\n        if (this.pollerTimer.unref) {\n            this.pollerTimer.unref();\n        }\n    }\n    /**\n     * Solely responsible for building the HTTP request and calling the token service.\n     */\n    async requestAccessToken() {\n        // Set issued at time to 5 seconds in the past to account for clock skew\n        const ISSUED_AT_BUFFER_IN_SECONDS = 5;\n        const MAX_EXPIRY_IN_SECONDS = 60;\n        // Final expiry time takes into account the issued at time, so need to subtract IAT buffer\n        const EXPIRY_IN_SECONDS = MAX_EXPIRY_IN_SECONDS - ISSUED_AT_BUFFER_IN_SECONDS;\n        const jti = (0,_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)();\n        const currentUTCInSeconds = Math.round(Date.now() / 1000) - this.clockSkewInSeconds;\n        const jwtBody = {\n            iss: this.clientId,\n            sub: this.clientId,\n            aud: this.authServer,\n            iat: currentUTCInSeconds - ISSUED_AT_BUFFER_IN_SECONDS,\n            exp: currentUTCInSeconds + EXPIRY_IN_SECONDS,\n            jti,\n        };\n        const key = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.importPKCS8)(this.clientKey, 'RS256');\n        const signedJwt = await new jose__WEBPACK_IMPORTED_MODULE_5__.SignJWT(jwtBody)\n            .setProtectedHeader({ alg: this.alg, kid: this.keyId, typ: 'JWT' })\n            .sign(key);\n        const requestBody = `grant_type=${this.grantType}&client_assertion_type=${this.clientAssertionType}&client_assertion=${signedJwt}&scope=${this.scope}`;\n        const accessTokenEndpoint = `${this.authServer}/token`;\n        const requestOptions = {\n            method: 'POST',\n            url: accessTokenEndpoint,\n            body: requestBody,\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            httpRequestTimeout: 10000,\n        };\n        return this.httpClient.makeRequest(requestOptions);\n    }\n    async getAccessToken() {\n        // Use the cached token if it is still valid, otherwise wait for a new token.\n        if (this.isValidToken(this.accessToken)) {\n            return this.accessToken;\n        }\n        // stop poller first in order to make sure that it's not sleeping if we need a token immediately\n        // Otherwise it could be hours before the expiration time passes normally\n        this.stopPoller();\n        // startPoller needs to be called somewhere, either lazily when a token is first requested, or at instantiation.\n        // Doing it lazily currently\n        this.pollerLoop().catch(() => { });\n        return new Promise((resolve, reject) => {\n            this.tokenEmitter.once('access_token', (event) => {\n                if ('token' in event) {\n                    resolve(event.token);\n                }\n                else {\n                    reject(event.error);\n                }\n            });\n        });\n    }\n    clearToken() {\n        this.accessToken = undefined;\n    }\n    isValidToken(token) {\n        return (typeof token !== 'undefined' &&\n            token !== null &&\n            token.expires_in < Date.now() / 1000);\n    }\n}\n//# sourceMappingURL=token-manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3Rva2VuLW1hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE4QjtBQUNjO0FBQ2E7QUFDRTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUVBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxZQUFZO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxPQUFPO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsa0NBQWtDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDN0UsYUFBYTtBQUNiO0FBQ0E7QUFDQSwyQkFBMkIsd0JBQXdCO0FBQ25ELGdDQUFnQyx1QkFBdUI7QUFDdkQscUNBQXFDLGdFQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4REFBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkNBQUk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGlEQUFXO0FBQ3JDLG9DQUFvQyx5Q0FBTztBQUMzQyxrQ0FBa0MsNENBQTRDO0FBQzlFO0FBQ0EsMENBQTBDLGVBQWUseUJBQXlCLHlCQUF5QixvQkFBb0IsVUFBVSxTQUFTLFdBQVc7QUFDN0osdUNBQXVDLGdCQUFnQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3Rva2VuLW1hbmFnZXIuanM/Mjg4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dWlkIH0gZnJvbSAnLi91dWlkJztcbmltcG9ydCB7IFNpZ25KV1QsIGltcG9ydFBLQ1M4IH0gZnJvbSAnam9zZSc7XG5pbXBvcnQgeyBiYWNrb2ZmLCBzbGVlcCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5jb25zdCBpc0FjY2Vzc1Rva2VuID0gKHRoaW5nKSA9PiB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpbmcgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAnYWNjZXNzX3Rva2VuJyBpbiB0aGluZyAmJlxuICAgICAgICAnZXhwaXJlc19pbicgaW4gdGhpbmcgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nLmFjY2Vzc190b2tlbiA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nLmV4cGlyZXNfaW4gPT09ICdudW1iZXInKTtcbn07XG5jb25zdCBpc1ZhbGlkQ3VzdG9tUmVzcG9uc2UgPSAocmVzcG9uc2UpID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIHJlc3BvbnNlLnRleHQgPT09ICdmdW5jdGlvbic7XG59O1xuZnVuY3Rpb24gY29udmVydEhlYWRlcnMoaGVhZGVycykge1xuICAgIGNvbnN0IGxvd2VyY2FzZUhlYWRlcnMgPSB7fTtcbiAgICBpZiAoIWhlYWRlcnMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBpZiAoaXNIZWFkZXJzKGhlYWRlcnMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBoZWFkZXJzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgbG93ZXJjYXNlSGVhZGVyc1tuYW1lLnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvd2VyY2FzZUhlYWRlcnM7XG4gICAgfVxuICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSkge1xuICAgICAgICBsb3dlcmNhc2VIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGxvd2VyY2FzZUhlYWRlcnM7XG59XG5mdW5jdGlvbiBpc0hlYWRlcnModGhpbmcpIHtcbiAgICBpZiAodHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0aGluZyAhPT0gbnVsbCAmJlxuICAgICAgICAnZW50cmllcycgaW4gT2JqZWN0KHRoaW5nKSAmJlxuICAgICAgICB0eXBlb2YgT2JqZWN0KHRoaW5nKS5lbnRyaWVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgY2xhc3MgVG9rZW5NYW5hZ2VyIHtcbiAgICBhbGcgPSAnUlMyNTYnO1xuICAgIGdyYW50VHlwZSA9ICdjbGllbnRfY3JlZGVudGlhbHMnO1xuICAgIGNsaWVudEFzc2VydGlvblR5cGUgPSAndXJuOmlldGY6cGFyYW1zOm9hdXRoOmNsaWVudC1hc3NlcnRpb24tdHlwZTpqd3QtYmVhcmVyJztcbiAgICBjbGllbnRJZDtcbiAgICBjbGllbnRLZXk7XG4gICAga2V5SWQ7XG4gICAgc2NvcGU7XG4gICAgYXV0aFNlcnZlcjtcbiAgICBodHRwQ2xpZW50O1xuICAgIG1heFJldHJpZXM7XG4gICAgY2xvY2tTa2V3SW5TZWNvbmRzID0gMDtcbiAgICBhY2Nlc3NUb2tlbjtcbiAgICB0b2tlbkVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIHJldHJ5Q291bnQ7XG4gICAgcG9sbGVyVGltZXI7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgdGhpcy5rZXlJZCA9IHByb3BzLmtleUlkO1xuICAgICAgICB0aGlzLmNsaWVudElkID0gcHJvcHMuY2xpZW50SWQ7XG4gICAgICAgIHRoaXMuY2xpZW50S2V5ID0gcHJvcHMuY2xpZW50S2V5O1xuICAgICAgICB0aGlzLmF1dGhTZXJ2ZXIgPSBwcm9wcy5hdXRoU2VydmVyID8/ICdodHRwczovL29hdXRoMi5zZWdtZW50LmlvJztcbiAgICAgICAgdGhpcy5zY29wZSA9IHByb3BzLnNjb3BlID8/ICd0cmFja2luZ19hcGk6d3JpdGUnO1xuICAgICAgICB0aGlzLmh0dHBDbGllbnQgPSBwcm9wcy5odHRwQ2xpZW50O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwcm9wcy5tYXhSZXRyaWVzO1xuICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5vbignYWNjZXNzX3Rva2VuJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoJ3Rva2VuJyBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBldmVudC50b2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmV0cnlDb3VudCA9IDA7XG4gICAgfVxuICAgIHN0b3BQb2xsZXIoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbGxlclRpbWVyKTtcbiAgICB9XG4gICAgYXN5bmMgcG9sbGVyTG9vcCgpIHtcbiAgICAgICAgbGV0IHRpbWVVbnRpbFJlZnJlc2hJbk1zID0gMjU7XG4gICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0QWNjZXNzVG9rZW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBFcnJvciB3aXRob3V0IGEgc3RhdHVzIGNvZGUgLSBsaWtlbHkgbmV0d29ya2luZywgcmV0cnlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVRyYW5zaWVudEVycm9yKHsgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzVmFsaWRDdXN0b21SZXNwb25zZShyZXNwb25zZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUludmFsaWRDdXN0b21SZXNwb25zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBjb252ZXJ0SGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgaWYgKGhlYWRlcnNbJ2RhdGUnXSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDbG9ja1NrZXcoRGF0ZS5wYXJzZShoZWFkZXJzWydkYXRlJ10pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIYW5kbGUgc3RhdHVzIGNvZGVzIVxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FjY2Vzc1Rva2VuKHRva2VuKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGRpZCBub3QgY29udGFpbiBhIHZhbGlkIGFjY2Vzc190b2tlbiBhbmQgZXhwaXJlc19pbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTdWNjZXNzLCB3ZSBoYXZlIGEgdG9rZW4hXG4gICAgICAgICAgICAgICAgdG9rZW4uZXhwaXJlc19hdCA9IE1hdGgucm91bmQoRGF0ZS5ub3coKSAvIDEwMDApICsgdG9rZW4uZXhwaXJlc19pbjtcbiAgICAgICAgICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5lbWl0KCdhY2Nlc3NfdG9rZW4nLCB7IHRva2VuIH0pO1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IG91ciBmYWlsdXJlIGNvdW50XG4gICAgICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIHRoZSB0b2tlbiBhZnRlciBoYWxmIHRoZSBleHBpcnkgdGltZSBwYXNzZXNcbiAgICAgICAgICAgICAgICB0aW1lVW50aWxSZWZyZXNoSW5NcyA9ICh0b2tlbi5leHBpcmVzX2luIC8gMikgKiAxMDAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlTmV4dFBvbGwodGltZVVudGlsUmVmcmVzaEluTXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHJlYWxseSB3cm9uZyB3aXRoIHRoZSBib2R5LCBsZXRzIHN1cmZhY2UgYW4gZXJyb3IgYW5kIHRyeSBhZ2Fpbj9cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVUcmFuc2llbnRFcnJvcih7IGVycm9yOiBlcnIsIGZvcmNlRW1pdEVycm9yOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgICAvLyBSYXRlIGxpbWl0ZWQsIHdhaXQgZm9yIHRoZSByZXNldCB0aW1lXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5oYW5kbGVSYXRlTGltaXRlZChyZXNwb25zZSwgaGVhZGVycywgdGltZVVudGlsUmVmcmVzaEluTXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFs0MDAsIDQwMSwgNDE1XS5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgICAgICAgICAvLyBVbnJlY292ZXJhYmxlIGVycm9ycywgc3RvcHMgdGhlIHBvbGxlclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlVW5yZWNvdmVyYWJsZUVycm9ycyhyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVUcmFuc2llbnRFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlVHJhbnNpZW50RXJyb3IoeyBlcnJvciwgZm9yY2VFbWl0RXJyb3IsIH0pIHtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRSZXRyaWVzKHsgZXJyb3IsIGZvcmNlRW1pdEVycm9yIH0pO1xuICAgICAgICBjb25zdCB0aW1lVW50aWxSZWZyZXNoSW5NcyA9IGJhY2tvZmYoe1xuICAgICAgICAgICAgYXR0ZW1wdDogdGhpcy5yZXRyeUNvdW50LFxuICAgICAgICAgICAgbWluVGltZW91dDogMjUsXG4gICAgICAgICAgICBtYXhUaW1lb3V0OiAxMDAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZU5leHRQb2xsKHRpbWVVbnRpbFJlZnJlc2hJbk1zKTtcbiAgICB9XG4gICAgaGFuZGxlSW52YWxpZEN1c3RvbVJlc3BvbnNlKCkge1xuICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5lbWl0KCdhY2Nlc3NfdG9rZW4nLCB7XG4gICAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKCdIVFRQQ2xpZW50IGRvZXMgbm90IGltcGxlbWVudCByZXNwb25zZS50ZXh0IG1ldGhvZCcpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmF0ZUxpbWl0ZWQocmVzcG9uc2UsIGhlYWRlcnMsIHRpbWVVbnRpbFJlZnJlc2hJbk1zKSB7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50UmV0cmllcyh7XG4gICAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKGBbJHtyZXNwb25zZS5zdGF0dXN9XSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaGVhZGVyc1sneC1yYXRlbGltaXQtcmVzZXQnXSkge1xuICAgICAgICAgICAgY29uc3QgcmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXAgPSBwYXJzZUludChoZWFkZXJzWyd4LXJhdGVsaW1pdC1yZXNldCddLCAxMCk7XG4gICAgICAgICAgICBpZiAoaXNGaW5pdGUocmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgICAgdGltZVVudGlsUmVmcmVzaEluTXMgPVxuICAgICAgICAgICAgICAgICAgICByYXRlTGltaXRSZXNldFRpbWVzdGFtcCAtIERhdGUubm93KCkgKyB0aGlzLmNsb2NrU2tld0luU2Vjb25kcyAqIDEwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aW1lVW50aWxSZWZyZXNoSW5NcyA9IDUgKiAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2Ugd2FudCBzdWJzZXF1ZW50IGNhbGxzIHRvIGdldF90b2tlbiB0byBiZSBhYmxlIHRvIGludGVycnVwdCBvdXJcbiAgICAgICAgICAgIC8vICBUaW1lb3V0IHdoZW4gaXQncyB3YWl0aW5nIGZvciBlLmcuIGEgbG9uZyBub3JtYWwgZXhwaXJhdGlvbiwgYnV0XG4gICAgICAgICAgICAvLyAgbm90IHdoZW4gd2UncmUgd2FpdGluZyBmb3IgYSByYXRlIGxpbWl0IHJlc2V0LiBTbGVlcCBpbnN0ZWFkLlxuICAgICAgICAgICAgYXdhaXQgc2xlZXAodGltZVVudGlsUmVmcmVzaEluTXMpO1xuICAgICAgICAgICAgdGltZVVudGlsUmVmcmVzaEluTXMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVldWVOZXh0UG9sbCh0aW1lVW50aWxSZWZyZXNoSW5Ncyk7XG4gICAgfVxuICAgIGhhbmRsZVVucmVjb3ZlcmFibGVFcnJvcnMocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy50b2tlbkVtaXR0ZXIuZW1pdCgnYWNjZXNzX3Rva2VuJywge1xuICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdG9wUG9sbGVyKCk7XG4gICAgfVxuICAgIHVwZGF0ZUNsb2NrU2tldyhkYXRlSW5Ncykge1xuICAgICAgICB0aGlzLmNsb2NrU2tld0luU2Vjb25kcyA9IChEYXRlLm5vdygpIC0gZGF0ZUluTXMpIC8gMTAwMDtcbiAgICB9XG4gICAgaW5jcmVtZW50UmV0cmllcyh7IGVycm9yLCBmb3JjZUVtaXRFcnJvciwgfSkge1xuICAgICAgICB0aGlzLnJldHJ5Q291bnQrKztcbiAgICAgICAgaWYgKGZvcmNlRW1pdEVycm9yIHx8IHRoaXMucmV0cnlDb3VudCAlIHRoaXMubWF4UmV0cmllcyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMudG9rZW5FbWl0dGVyLmVtaXQoJ2FjY2Vzc190b2tlbicsIHsgZXJyb3I6IGVycm9yIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlTmV4dFBvbGwodGltZVVudGlsUmVmcmVzaEluTXMpIHtcbiAgICAgICAgdGhpcy5wb2xsZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wb2xsZXJMb29wKCksIHRpbWVVbnRpbFJlZnJlc2hJbk1zKTtcbiAgICAgICAgaWYgKHRoaXMucG9sbGVyVGltZXIudW5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMucG9sbGVyVGltZXIudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTb2xlbHkgcmVzcG9uc2libGUgZm9yIGJ1aWxkaW5nIHRoZSBIVFRQIHJlcXVlc3QgYW5kIGNhbGxpbmcgdGhlIHRva2VuIHNlcnZpY2UuXG4gICAgICovXG4gICAgYXN5bmMgcmVxdWVzdEFjY2Vzc1Rva2VuKCkge1xuICAgICAgICAvLyBTZXQgaXNzdWVkIGF0IHRpbWUgdG8gNSBzZWNvbmRzIGluIHRoZSBwYXN0IHRvIGFjY291bnQgZm9yIGNsb2NrIHNrZXdcbiAgICAgICAgY29uc3QgSVNTVUVEX0FUX0JVRkZFUl9JTl9TRUNPTkRTID0gNTtcbiAgICAgICAgY29uc3QgTUFYX0VYUElSWV9JTl9TRUNPTkRTID0gNjA7XG4gICAgICAgIC8vIEZpbmFsIGV4cGlyeSB0aW1lIHRha2VzIGludG8gYWNjb3VudCB0aGUgaXNzdWVkIGF0IHRpbWUsIHNvIG5lZWQgdG8gc3VidHJhY3QgSUFUIGJ1ZmZlclxuICAgICAgICBjb25zdCBFWFBJUllfSU5fU0VDT05EUyA9IE1BWF9FWFBJUllfSU5fU0VDT05EUyAtIElTU1VFRF9BVF9CVUZGRVJfSU5fU0VDT05EUztcbiAgICAgICAgY29uc3QganRpID0gdXVpZCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VVRDSW5TZWNvbmRzID0gTWF0aC5yb3VuZChEYXRlLm5vdygpIC8gMTAwMCkgLSB0aGlzLmNsb2NrU2tld0luU2Vjb25kcztcbiAgICAgICAgY29uc3Qgand0Qm9keSA9IHtcbiAgICAgICAgICAgIGlzczogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHN1YjogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1ZDogdGhpcy5hdXRoU2VydmVyLFxuICAgICAgICAgICAgaWF0OiBjdXJyZW50VVRDSW5TZWNvbmRzIC0gSVNTVUVEX0FUX0JVRkZFUl9JTl9TRUNPTkRTLFxuICAgICAgICAgICAgZXhwOiBjdXJyZW50VVRDSW5TZWNvbmRzICsgRVhQSVJZX0lOX1NFQ09ORFMsXG4gICAgICAgICAgICBqdGksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGltcG9ydFBLQ1M4KHRoaXMuY2xpZW50S2V5LCAnUlMyNTYnKTtcbiAgICAgICAgY29uc3Qgc2lnbmVkSnd0ID0gYXdhaXQgbmV3IFNpZ25KV1Qoand0Qm9keSlcbiAgICAgICAgICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6IHRoaXMuYWxnLCBraWQ6IHRoaXMua2V5SWQsIHR5cDogJ0pXVCcgfSlcbiAgICAgICAgICAgIC5zaWduKGtleSk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYGdyYW50X3R5cGU9JHt0aGlzLmdyYW50VHlwZX0mY2xpZW50X2Fzc2VydGlvbl90eXBlPSR7dGhpcy5jbGllbnRBc3NlcnRpb25UeXBlfSZjbGllbnRfYXNzZXJ0aW9uPSR7c2lnbmVkSnd0fSZzY29wZT0ke3RoaXMuc2NvcGV9YDtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5FbmRwb2ludCA9IGAke3RoaXMuYXV0aFNlcnZlcn0vdG9rZW5gO1xuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBhY2Nlc3NUb2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0VGltZW91dDogMTAwMDAsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQubWFrZVJlcXVlc3QocmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBnZXRBY2Nlc3NUb2tlbigpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBjYWNoZWQgdG9rZW4gaWYgaXQgaXMgc3RpbGwgdmFsaWQsIG90aGVyd2lzZSB3YWl0IGZvciBhIG5ldyB0b2tlbi5cbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFRva2VuKHRoaXMuYWNjZXNzVG9rZW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdG9wIHBvbGxlciBmaXJzdCBpbiBvcmRlciB0byBtYWtlIHN1cmUgdGhhdCBpdCdzIG5vdCBzbGVlcGluZyBpZiB3ZSBuZWVkIGEgdG9rZW4gaW1tZWRpYXRlbHlcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGl0IGNvdWxkIGJlIGhvdXJzIGJlZm9yZSB0aGUgZXhwaXJhdGlvbiB0aW1lIHBhc3NlcyBub3JtYWxseVxuICAgICAgICB0aGlzLnN0b3BQb2xsZXIoKTtcbiAgICAgICAgLy8gc3RhcnRQb2xsZXIgbmVlZHMgdG8gYmUgY2FsbGVkIHNvbWV3aGVyZSwgZWl0aGVyIGxhemlseSB3aGVuIGEgdG9rZW4gaXMgZmlyc3QgcmVxdWVzdGVkLCBvciBhdCBpbnN0YW50aWF0aW9uLlxuICAgICAgICAvLyBEb2luZyBpdCBsYXppbHkgY3VycmVudGx5XG4gICAgICAgIHRoaXMucG9sbGVyTG9vcCgpLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5vbmNlKCdhY2Nlc3NfdG9rZW4nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoJ3Rva2VuJyBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGV2ZW50LnRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudC5lcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjbGVhclRva2VuKCkge1xuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpc1ZhbGlkVG9rZW4odG9rZW4pIHtcbiAgICAgICAgcmV0dXJuICh0eXBlb2YgdG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0b2tlbiAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgdG9rZW4uZXhwaXJlc19pbiA8IERhdGUubm93KCkgLyAxMDAwKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b2tlbi1tYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uuid: () => (/* reexport safe */ _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(ssr)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n\n//# sourceMappingURL=uuid.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3V1aWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFDMUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9saWIvdXVpZC5qcz8wN2ZjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICdAbHVrZWVkL3V1aWQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXVpZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextBatch: () => (/* binding */ ContextBatch)\n/* harmony export */ });\n/* harmony import */ var _lib_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/uuid */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n\nconst MAX_EVENT_SIZE_IN_KB = 32;\nconst MAX_BATCH_SIZE_IN_KB = 480; //  (500 KB is the limit, leaving some padding)\nclass ContextBatch {\n    id = (0,_lib_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)();\n    items = [];\n    sizeInBytes = 0;\n    maxEventCount;\n    constructor(maxEventCount) {\n        this.maxEventCount = Math.max(1, maxEventCount);\n    }\n    tryAdd(item) {\n        if (this.length === this.maxEventCount)\n            return {\n                success: false,\n                message: `Event limit of ${this.maxEventCount} has been exceeded.`,\n            };\n        const eventSize = this.calculateSize(item.context);\n        if (eventSize > MAX_EVENT_SIZE_IN_KB * 1024) {\n            return {\n                success: false,\n                message: `Event exceeds maximum event size of ${MAX_EVENT_SIZE_IN_KB} KB`,\n            };\n        }\n        if (this.sizeInBytes + eventSize > MAX_BATCH_SIZE_IN_KB * 1024) {\n            return {\n                success: false,\n                message: `Event has caused batch size to exceed ${MAX_BATCH_SIZE_IN_KB} KB`,\n            };\n        }\n        this.items.push(item);\n        this.sizeInBytes += eventSize;\n        return { success: true };\n    }\n    get length() {\n        return this.items.length;\n    }\n    calculateSize(ctx) {\n        return encodeURI(JSON.stringify(ctx.event)).split(/%..|i/).length;\n    }\n    getEvents() {\n        const events = this.items.map(({ context }) => context.event);\n        return events;\n    }\n    getContexts() {\n        return this.items.map((item) => item.context);\n    }\n    resolveEvents() {\n        this.items.forEach(({ resolver, context }) => resolver(context));\n    }\n}\n//# sourceMappingURL=context-batch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vY29udGV4dC1iYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzQztBQUN0QztBQUNBLGtDQUFrQztBQUMzQjtBQUNQLFNBQVMsK0NBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxzQkFBc0I7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxzQkFBc0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxTQUFTO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtQkFBbUI7QUFDakQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vY29udGV4dC1iYXRjaC5qcz80YWZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHV1aWQgfSBmcm9tICcuLi8uLi9saWIvdXVpZCc7XG5jb25zdCBNQVhfRVZFTlRfU0laRV9JTl9LQiA9IDMyO1xuY29uc3QgTUFYX0JBVENIX1NJWkVfSU5fS0IgPSA0ODA7IC8vICAoNTAwIEtCIGlzIHRoZSBsaW1pdCwgbGVhdmluZyBzb21lIHBhZGRpbmcpXG5leHBvcnQgY2xhc3MgQ29udGV4dEJhdGNoIHtcbiAgICBpZCA9IHV1aWQoKTtcbiAgICBpdGVtcyA9IFtdO1xuICAgIHNpemVJbkJ5dGVzID0gMDtcbiAgICBtYXhFdmVudENvdW50O1xuICAgIGNvbnN0cnVjdG9yKG1heEV2ZW50Q291bnQpIHtcbiAgICAgICAgdGhpcy5tYXhFdmVudENvdW50ID0gTWF0aC5tYXgoMSwgbWF4RXZlbnRDb3VudCk7XG4gICAgfVxuICAgIHRyeUFkZChpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gdGhpcy5tYXhFdmVudENvdW50KVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXZlbnQgbGltaXQgb2YgJHt0aGlzLm1heEV2ZW50Q291bnR9IGhhcyBiZWVuIGV4Y2VlZGVkLmAsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBldmVudFNpemUgPSB0aGlzLmNhbGN1bGF0ZVNpemUoaXRlbS5jb250ZXh0KTtcbiAgICAgICAgaWYgKGV2ZW50U2l6ZSA+IE1BWF9FVkVOVF9TSVpFX0lOX0tCICogMTAyNCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXZlbnQgZXhjZWVkcyBtYXhpbXVtIGV2ZW50IHNpemUgb2YgJHtNQVhfRVZFTlRfU0laRV9JTl9LQn0gS0JgLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zaXplSW5CeXRlcyArIGV2ZW50U2l6ZSA+IE1BWF9CQVRDSF9TSVpFX0lOX0tCICogMTAyNCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXZlbnQgaGFzIGNhdXNlZCBiYXRjaCBzaXplIHRvIGV4Y2VlZCAke01BWF9CQVRDSF9TSVpFX0lOX0tCfSBLQmAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgdGhpcy5zaXplSW5CeXRlcyArPSBldmVudFNpemU7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgIH1cbiAgICBjYWxjdWxhdGVTaXplKGN0eCkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJKEpTT04uc3RyaW5naWZ5KGN0eC5ldmVudCkpLnNwbGl0KC8lLi58aS8pLmxlbmd0aDtcbiAgICB9XG4gICAgZ2V0RXZlbnRzKCkge1xuICAgICAgICBjb25zdCBldmVudHMgPSB0aGlzLml0ZW1zLm1hcCgoeyBjb250ZXh0IH0pID0+IGNvbnRleHQuZXZlbnQpO1xuICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cbiAgICBnZXRDb250ZXh0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLmNvbnRleHQpO1xuICAgIH1cbiAgICByZXNvbHZlRXZlbnRzKCkge1xuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKHsgcmVzb2x2ZXIsIGNvbnRleHQgfSkgPT4gcmVzb2x2ZXIoY29udGV4dCkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQtYmF0Y2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createConfiguredNodePlugin: () => (/* binding */ createConfiguredNodePlugin),\n/* harmony export */   createNodePlugin: () => (/* binding */ createNodePlugin)\n/* harmony export */ });\n/* harmony import */ var _publisher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./publisher */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/version */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/env */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\");\n\n\n\nfunction normalizeEvent(ctx) {\n    ctx.updateEvent('context.library.name', '@segment/analytics-node');\n    ctx.updateEvent('context.library.version', _generated_version__WEBPACK_IMPORTED_MODULE_1__.version);\n    const runtime = (0,_lib_env__WEBPACK_IMPORTED_MODULE_2__.detectRuntime)();\n    if (runtime === 'node') {\n        // eslint-disable-next-line no-restricted-globals\n        ctx.updateEvent('_metadata.nodeVersion', process.version);\n    }\n    ctx.updateEvent('_metadata.jsRuntime', runtime);\n}\nfunction createNodePlugin(publisher) {\n    function action(ctx) {\n        normalizeEvent(ctx);\n        return publisher.enqueue(ctx);\n    }\n    return {\n        name: 'Segment.io',\n        type: 'destination',\n        version: '1.0.0',\n        isLoaded: () => true,\n        load: () => Promise.resolve(),\n        alias: action,\n        group: action,\n        identify: action,\n        page: action,\n        screen: action,\n        track: action,\n    };\n}\nconst createConfiguredNodePlugin = (props, emitter) => {\n    const publisher = new _publisher__WEBPACK_IMPORTED_MODULE_0__.Publisher(props, emitter);\n    return {\n        publisher: publisher,\n        plugin: createNodePlugin(publisher),\n    };\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDVTtBQUNKO0FBQzlDO0FBQ0E7QUFDQSwrQ0FBK0MsdURBQU87QUFDdEQsb0JBQW9CLHVEQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwwQkFBMEIsaURBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanM/ZTBjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQdWJsaXNoZXIgfSBmcm9tICcuL3B1Ymxpc2hlcic7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vLi4vZ2VuZXJhdGVkL3ZlcnNpb24nO1xuaW1wb3J0IHsgZGV0ZWN0UnVudGltZSB9IGZyb20gJy4uLy4uL2xpYi9lbnYnO1xuZnVuY3Rpb24gbm9ybWFsaXplRXZlbnQoY3R4KSB7XG4gICAgY3R4LnVwZGF0ZUV2ZW50KCdjb250ZXh0LmxpYnJhcnkubmFtZScsICdAc2VnbWVudC9hbmFseXRpY3Mtbm9kZScpO1xuICAgIGN0eC51cGRhdGVFdmVudCgnY29udGV4dC5saWJyYXJ5LnZlcnNpb24nLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBydW50aW1lID0gZGV0ZWN0UnVudGltZSgpO1xuICAgIGlmIChydW50aW1lID09PSAnbm9kZScpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgICAgICBjdHgudXBkYXRlRXZlbnQoJ19tZXRhZGF0YS5ub2RlVmVyc2lvbicsIHByb2Nlc3MudmVyc2lvbik7XG4gICAgfVxuICAgIGN0eC51cGRhdGVFdmVudCgnX21ldGFkYXRhLmpzUnVudGltZScsIHJ1bnRpbWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5vZGVQbHVnaW4ocHVibGlzaGVyKSB7XG4gICAgZnVuY3Rpb24gYWN0aW9uKGN0eCkge1xuICAgICAgICBub3JtYWxpemVFdmVudChjdHgpO1xuICAgICAgICByZXR1cm4gcHVibGlzaGVyLmVucXVldWUoY3R4KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJ1NlZ21lbnQuaW8nLFxuICAgICAgICB0eXBlOiAnZGVzdGluYXRpb24nLFxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICBpc0xvYWRlZDogKCkgPT4gdHJ1ZSxcbiAgICAgICAgbG9hZDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgIGFsaWFzOiBhY3Rpb24sXG4gICAgICAgIGdyb3VwOiBhY3Rpb24sXG4gICAgICAgIGlkZW50aWZ5OiBhY3Rpb24sXG4gICAgICAgIHBhZ2U6IGFjdGlvbixcbiAgICAgICAgc2NyZWVuOiBhY3Rpb24sXG4gICAgICAgIHRyYWNrOiBhY3Rpb24sXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBjcmVhdGVDb25maWd1cmVkTm9kZVBsdWdpbiA9IChwcm9wcywgZW1pdHRlcikgPT4ge1xuICAgIGNvbnN0IHB1Ymxpc2hlciA9IG5ldyBQdWJsaXNoZXIocHJvcHMsIGVtaXR0ZXIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHB1Ymxpc2hlcjogcHVibGlzaGVyLFxuICAgICAgICBwbHVnaW46IGNyZWF0ZU5vZGVQbHVnaW4ocHVibGlzaGVyKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Publisher: () => (/* binding */ Publisher)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(ssr)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n/* harmony import */ var _lib_create_url__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/create-url */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(ssr)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n/* harmony import */ var _context_batch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context-batch */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js\");\n/* harmony import */ var _lib_token_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/token-manager */ \"(ssr)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js\");\n\n\n\n\n\nfunction sleep(timeoutInMs) {\n    return new Promise((resolve) => setTimeout(resolve, timeoutInMs));\n}\nfunction noop() { }\n/**\n * The Publisher is responsible for batching events and sending them to the Segment API.\n */\nclass Publisher {\n    pendingFlushTimeout;\n    _batch;\n    _flushInterval;\n    _flushAt;\n    _maxRetries;\n    _url;\n    _flushPendingItemsCount;\n    _httpRequestTimeout;\n    _emitter;\n    _disable;\n    _httpClient;\n    _writeKey;\n    _tokenManager;\n    constructor({ host, path, maxRetries, flushAt, flushInterval, writeKey, httpRequestTimeout, httpClient, disable, oauthSettings, }, emitter) {\n        this._emitter = emitter;\n        this._maxRetries = maxRetries;\n        this._flushAt = Math.max(flushAt, 1);\n        this._flushInterval = flushInterval;\n        this._url = (0,_lib_create_url__WEBPACK_IMPORTED_MODULE_0__.tryCreateFormattedUrl)(host ?? 'https://api.segment.io', path ?? '/v1/batch');\n        this._httpRequestTimeout = httpRequestTimeout ?? 10000;\n        this._disable = Boolean(disable);\n        this._httpClient = httpClient;\n        this._writeKey = writeKey;\n        if (oauthSettings) {\n            this._tokenManager = new _lib_token_manager__WEBPACK_IMPORTED_MODULE_2__.TokenManager({\n                ...oauthSettings,\n                httpClient: oauthSettings.httpClient ?? httpClient,\n                maxRetries: oauthSettings.maxRetries ?? maxRetries,\n            });\n        }\n    }\n    createBatch() {\n        this.pendingFlushTimeout && clearTimeout(this.pendingFlushTimeout);\n        const batch = new _context_batch__WEBPACK_IMPORTED_MODULE_1__.ContextBatch(this._flushAt);\n        this._batch = batch;\n        this.pendingFlushTimeout = setTimeout(() => {\n            if (batch === this._batch) {\n                this._batch = undefined;\n            }\n            this.pendingFlushTimeout = undefined;\n            if (batch.length) {\n                this.send(batch).catch(noop);\n            }\n        }, this._flushInterval);\n        return batch;\n    }\n    clearBatch() {\n        this.pendingFlushTimeout && clearTimeout(this.pendingFlushTimeout);\n        this._batch = undefined;\n    }\n    flush(pendingItemsCount) {\n        if (!pendingItemsCount) {\n            // if number of pending items is 0, there will never be anything else entering the batch, since the app is closed.\n            if (this._tokenManager) {\n                this._tokenManager.stopPoller();\n            }\n            return;\n        }\n        this._flushPendingItemsCount = pendingItemsCount;\n        // if batch is empty, there's nothing to flush, and when things come in, enqueue will handle them.\n        if (!this._batch)\n            return;\n        // the number of globally pending items will always be larger or the same as batch size.\n        // Any mismatch is because some globally pending items are in plugins.\n        const isExpectingNoMoreItems = this._batch.length === pendingItemsCount;\n        if (isExpectingNoMoreItems) {\n            this.send(this._batch)\n                .catch(noop)\n                .finally(() => {\n                // stop poller so program can exit ().\n                if (this._tokenManager) {\n                    this._tokenManager.stopPoller();\n                }\n            });\n            this.clearBatch();\n        }\n    }\n    /**\n     * Enqueues the context for future delivery.\n     * @param ctx - Context containing a Segment event.\n     * @returns a promise that resolves with the context after the event has been delivered.\n     */\n    enqueue(ctx) {\n        const batch = this._batch ?? this.createBatch();\n        const { promise: ctxPromise, resolve } = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_3__.createDeferred)();\n        const pendingItem = {\n            context: ctx,\n            resolver: resolve,\n        };\n        /*\n          The following logic ensures that a batch is never orphaned,\n          and is always sent before a new batch is created.\n    \n          Add an event to the existing batch.\n            Success: Check if batch is full or no more items are expected to come in (i.e. closing). If so, send batch.\n            Failure: Assume event is too big to fit in current batch - send existing batch.\n              Add an event to the new batch.\n                Success: Check if batch is full and send if it is.\n                Failure: Event exceeds maximum size (it will never fit), fail the event.\n        */\n        const addStatus = batch.tryAdd(pendingItem);\n        if (addStatus.success) {\n            const isExpectingNoMoreItems = batch.length === this._flushPendingItemsCount;\n            const isFull = batch.length === this._flushAt;\n            if (isFull || isExpectingNoMoreItems) {\n                this.send(batch).catch(noop);\n                this.clearBatch();\n            }\n            return ctxPromise;\n        }\n        // If the new item causes the maximimum event size to be exceeded, send the current batch and create a new one.\n        if (batch.length) {\n            this.send(batch).catch(noop);\n            this.clearBatch();\n        }\n        const fallbackBatch = this.createBatch();\n        const fbAddStatus = fallbackBatch.tryAdd(pendingItem);\n        if (fbAddStatus.success) {\n            const isExpectingNoMoreItems = fallbackBatch.length === this._flushPendingItemsCount;\n            if (isExpectingNoMoreItems) {\n                this.send(fallbackBatch).catch(noop);\n                this.clearBatch();\n            }\n            return ctxPromise;\n        }\n        else {\n            // this should only occur if max event size is exceeded\n            ctx.setFailedDelivery({\n                reason: new Error(fbAddStatus.message),\n            });\n            return Promise.resolve(ctx);\n        }\n    }\n    async send(batch) {\n        if (this._flushPendingItemsCount) {\n            this._flushPendingItemsCount -= batch.length;\n        }\n        const events = batch.getEvents();\n        const maxAttempts = this._maxRetries + 1;\n        let currentAttempt = 0;\n        while (currentAttempt < maxAttempts) {\n            currentAttempt++;\n            let requestedRetryTimeout;\n            let failureReason;\n            try {\n                if (this._disable) {\n                    return batch.resolveEvents();\n                }\n                let authString = undefined;\n                if (this._tokenManager) {\n                    const token = await this._tokenManager.getAccessToken();\n                    if (token && token.access_token) {\n                        authString = `Bearer ${token.access_token}`;\n                    }\n                }\n                const headers = {\n                    'Content-Type': 'application/json',\n                    'User-Agent': 'analytics-node-next/latest',\n                    ...(authString ? { Authorization: authString } : {}),\n                };\n                const request = {\n                    url: this._url,\n                    method: 'POST',\n                    headers: headers,\n                    body: JSON.stringify({\n                        batch: events,\n                        writeKey: this._writeKey,\n                        sentAt: new Date(),\n                    }),\n                    httpRequestTimeout: this._httpRequestTimeout,\n                };\n                this._emitter.emit('http_request', {\n                    body: request.body,\n                    method: request.method,\n                    url: request.url,\n                    headers: request.headers,\n                });\n                const response = await this._httpClient.makeRequest(request);\n                if (response.status >= 200 && response.status < 300) {\n                    // Successfully sent events, so exit!\n                    batch.resolveEvents();\n                    return;\n                }\n                else if (this._tokenManager &&\n                    (response.status === 400 ||\n                        response.status === 401 ||\n                        response.status === 403)) {\n                    // Retry with a new OAuth token if we have OAuth data\n                    this._tokenManager.clearToken();\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n                else if (response.status === 400) {\n                    // https://segment.com/docs/connections/sources/catalog/libraries/server/http-api/#max-request-size\n                    // Request either malformed or size exceeded - don't retry.\n                    resolveFailedBatch(batch, new Error(`[${response.status}] ${response.statusText}`));\n                    return;\n                }\n                else if (response.status === 429) {\n                    // Rate limited, wait for the reset time\n                    if (response.headers && 'x-ratelimit-reset' in response.headers) {\n                        const rateLimitResetTimestamp = parseInt(response.headers['x-ratelimit-reset'], 10);\n                        if (isFinite(rateLimitResetTimestamp)) {\n                            requestedRetryTimeout = rateLimitResetTimestamp - Date.now();\n                        }\n                    }\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n                else {\n                    // Treat other errors as transient and retry.\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n            }\n            catch (err) {\n                // Network errors get thrown, retry them.\n                failureReason = err;\n            }\n            // Final attempt failed, update context and resolve events.\n            if (currentAttempt === maxAttempts) {\n                resolveFailedBatch(batch, failureReason);\n                return;\n            }\n            // Retry after attempt-based backoff.\n            await sleep(requestedRetryTimeout\n                ? requestedRetryTimeout\n                : (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.backoff)({\n                    attempt: currentAttempt,\n                    minTimeout: 25,\n                    maxTimeout: 1000,\n                }));\n        }\n    }\n}\nfunction resolveFailedBatch(batch, reason) {\n    batch.getContexts().forEach((ctx) => ctx.setFailedDelivery({ reason }));\n    batch.resolveEvents();\n}\n//# sourceMappingURL=publisher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vcHVibGlzaGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRDtBQUNXO0FBQ0s7QUFDbkI7QUFDUTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUhBQW1IO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNFQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDREQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3REFBWTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrQkFBK0IsRUFBRSxnRkFBYztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG1CQUFtQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDRCQUE0QixJQUFJO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCLElBQUksb0JBQW9CO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGdCQUFnQixJQUFJLG9CQUFvQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDMUY7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQixJQUFJLG9CQUFvQjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdFQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxRQUFRO0FBQ3pFO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL3BsdWdpbnMvc2VnbWVudGlvL3B1Ymxpc2hlci5qcz9iYmFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJhY2tvZmYgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyB0cnlDcmVhdGVGb3JtYXR0ZWRVcmwgfSBmcm9tICcuLi8uLi9saWIvY3JlYXRlLXVybCc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IENvbnRleHRCYXRjaCB9IGZyb20gJy4vY29udGV4dC1iYXRjaCc7XG5pbXBvcnQgeyBUb2tlbk1hbmFnZXIgfSBmcm9tICcuLi8uLi9saWIvdG9rZW4tbWFuYWdlcic7XG5mdW5jdGlvbiBzbGVlcCh0aW1lb3V0SW5Ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0SW5NcykpO1xufVxuZnVuY3Rpb24gbm9vcCgpIHsgfVxuLyoqXG4gKiBUaGUgUHVibGlzaGVyIGlzIHJlc3BvbnNpYmxlIGZvciBiYXRjaGluZyBldmVudHMgYW5kIHNlbmRpbmcgdGhlbSB0byB0aGUgU2VnbWVudCBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBQdWJsaXNoZXIge1xuICAgIHBlbmRpbmdGbHVzaFRpbWVvdXQ7XG4gICAgX2JhdGNoO1xuICAgIF9mbHVzaEludGVydmFsO1xuICAgIF9mbHVzaEF0O1xuICAgIF9tYXhSZXRyaWVzO1xuICAgIF91cmw7XG4gICAgX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQ7XG4gICAgX2h0dHBSZXF1ZXN0VGltZW91dDtcbiAgICBfZW1pdHRlcjtcbiAgICBfZGlzYWJsZTtcbiAgICBfaHR0cENsaWVudDtcbiAgICBfd3JpdGVLZXk7XG4gICAgX3Rva2VuTWFuYWdlcjtcbiAgICBjb25zdHJ1Y3Rvcih7IGhvc3QsIHBhdGgsIG1heFJldHJpZXMsIGZsdXNoQXQsIGZsdXNoSW50ZXJ2YWwsIHdyaXRlS2V5LCBodHRwUmVxdWVzdFRpbWVvdXQsIGh0dHBDbGllbnQsIGRpc2FibGUsIG9hdXRoU2V0dGluZ3MsIH0sIGVtaXR0ZXIpIHtcbiAgICAgICAgdGhpcy5fZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgIHRoaXMuX21heFJldHJpZXMgPSBtYXhSZXRyaWVzO1xuICAgICAgICB0aGlzLl9mbHVzaEF0ID0gTWF0aC5tYXgoZmx1c2hBdCwgMSk7XG4gICAgICAgIHRoaXMuX2ZsdXNoSW50ZXJ2YWwgPSBmbHVzaEludGVydmFsO1xuICAgICAgICB0aGlzLl91cmwgPSB0cnlDcmVhdGVGb3JtYXR0ZWRVcmwoaG9zdCA/PyAnaHR0cHM6Ly9hcGkuc2VnbWVudC5pbycsIHBhdGggPz8gJy92MS9iYXRjaCcpO1xuICAgICAgICB0aGlzLl9odHRwUmVxdWVzdFRpbWVvdXQgPSBodHRwUmVxdWVzdFRpbWVvdXQgPz8gMTAwMDA7XG4gICAgICAgIHRoaXMuX2Rpc2FibGUgPSBCb29sZWFuKGRpc2FibGUpO1xuICAgICAgICB0aGlzLl9odHRwQ2xpZW50ID0gaHR0cENsaWVudDtcbiAgICAgICAgdGhpcy5fd3JpdGVLZXkgPSB3cml0ZUtleTtcbiAgICAgICAgaWYgKG9hdXRoU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rva2VuTWFuYWdlciA9IG5ldyBUb2tlbk1hbmFnZXIoe1xuICAgICAgICAgICAgICAgIC4uLm9hdXRoU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgaHR0cENsaWVudDogb2F1dGhTZXR0aW5ncy5odHRwQ2xpZW50ID8/IGh0dHBDbGllbnQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogb2F1dGhTZXR0aW5ncy5tYXhSZXRyaWVzID8/IG1heFJldHJpZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVCYXRjaCgpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nRmx1c2hUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdGbHVzaFRpbWVvdXQpO1xuICAgICAgICBjb25zdCBiYXRjaCA9IG5ldyBDb250ZXh0QmF0Y2godGhpcy5fZmx1c2hBdCk7XG4gICAgICAgIHRoaXMuX2JhdGNoID0gYmF0Y2g7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZsdXNoVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGJhdGNoID09PSB0aGlzLl9iYXRjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2JhdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRmx1c2hUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGJhdGNoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZChiYXRjaCkuY2F0Y2gobm9vcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMuX2ZsdXNoSW50ZXJ2YWwpO1xuICAgICAgICByZXR1cm4gYmF0Y2g7XG4gICAgfVxuICAgIGNsZWFyQmF0Y2goKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZsdXNoVGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nRmx1c2hUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5fYmF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZsdXNoKHBlbmRpbmdJdGVtc0NvdW50KSB7XG4gICAgICAgIGlmICghcGVuZGluZ0l0ZW1zQ291bnQpIHtcbiAgICAgICAgICAgIC8vIGlmIG51bWJlciBvZiBwZW5kaW5nIGl0ZW1zIGlzIDAsIHRoZXJlIHdpbGwgbmV2ZXIgYmUgYW55dGhpbmcgZWxzZSBlbnRlcmluZyB0aGUgYmF0Y2gsIHNpbmNlIHRoZSBhcHAgaXMgY2xvc2VkLlxuICAgICAgICAgICAgaWYgKHRoaXMuX3Rva2VuTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Rva2VuTWFuYWdlci5zdG9wUG9sbGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmx1c2hQZW5kaW5nSXRlbXNDb3VudCA9IHBlbmRpbmdJdGVtc0NvdW50O1xuICAgICAgICAvLyBpZiBiYXRjaCBpcyBlbXB0eSwgdGhlcmUncyBub3RoaW5nIHRvIGZsdXNoLCBhbmQgd2hlbiB0aGluZ3MgY29tZSBpbiwgZW5xdWV1ZSB3aWxsIGhhbmRsZSB0aGVtLlxuICAgICAgICBpZiAoIXRoaXMuX2JhdGNoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyB0aGUgbnVtYmVyIG9mIGdsb2JhbGx5IHBlbmRpbmcgaXRlbXMgd2lsbCBhbHdheXMgYmUgbGFyZ2VyIG9yIHRoZSBzYW1lIGFzIGJhdGNoIHNpemUuXG4gICAgICAgIC8vIEFueSBtaXNtYXRjaCBpcyBiZWNhdXNlIHNvbWUgZ2xvYmFsbHkgcGVuZGluZyBpdGVtcyBhcmUgaW4gcGx1Z2lucy5cbiAgICAgICAgY29uc3QgaXNFeHBlY3RpbmdOb01vcmVJdGVtcyA9IHRoaXMuX2JhdGNoLmxlbmd0aCA9PT0gcGVuZGluZ0l0ZW1zQ291bnQ7XG4gICAgICAgIGlmIChpc0V4cGVjdGluZ05vTW9yZUl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmQodGhpcy5fYmF0Y2gpXG4gICAgICAgICAgICAgICAgLmNhdGNoKG5vb3ApXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHN0b3AgcG9sbGVyIHNvIHByb2dyYW0gY2FuIGV4aXQgKCkuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Rva2VuTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90b2tlbk1hbmFnZXIuc3RvcFBvbGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jbGVhckJhdGNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5xdWV1ZXMgdGhlIGNvbnRleHQgZm9yIGZ1dHVyZSBkZWxpdmVyeS5cbiAgICAgKiBAcGFyYW0gY3R4IC0gQ29udGV4dCBjb250YWluaW5nIGEgU2VnbWVudCBldmVudC5cbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBjb250ZXh0IGFmdGVyIHRoZSBldmVudCBoYXMgYmVlbiBkZWxpdmVyZWQuXG4gICAgICovXG4gICAgZW5xdWV1ZShjdHgpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLl9iYXRjaCA/PyB0aGlzLmNyZWF0ZUJhdGNoKCk7XG4gICAgICAgIGNvbnN0IHsgcHJvbWlzZTogY3R4UHJvbWlzZSwgcmVzb2x2ZSB9ID0gY3JlYXRlRGVmZXJyZWQoKTtcbiAgICAgICAgY29uc3QgcGVuZGluZ0l0ZW0gPSB7XG4gICAgICAgICAgICBjb250ZXh0OiBjdHgsXG4gICAgICAgICAgICByZXNvbHZlcjogcmVzb2x2ZSxcbiAgICAgICAgfTtcbiAgICAgICAgLypcbiAgICAgICAgICBUaGUgZm9sbG93aW5nIGxvZ2ljIGVuc3VyZXMgdGhhdCBhIGJhdGNoIGlzIG5ldmVyIG9ycGhhbmVkLFxuICAgICAgICAgIGFuZCBpcyBhbHdheXMgc2VudCBiZWZvcmUgYSBuZXcgYmF0Y2ggaXMgY3JlYXRlZC5cbiAgICBcbiAgICAgICAgICBBZGQgYW4gZXZlbnQgdG8gdGhlIGV4aXN0aW5nIGJhdGNoLlxuICAgICAgICAgICAgU3VjY2VzczogQ2hlY2sgaWYgYmF0Y2ggaXMgZnVsbCBvciBubyBtb3JlIGl0ZW1zIGFyZSBleHBlY3RlZCB0byBjb21lIGluIChpLmUuIGNsb3NpbmcpLiBJZiBzbywgc2VuZCBiYXRjaC5cbiAgICAgICAgICAgIEZhaWx1cmU6IEFzc3VtZSBldmVudCBpcyB0b28gYmlnIHRvIGZpdCBpbiBjdXJyZW50IGJhdGNoIC0gc2VuZCBleGlzdGluZyBiYXRjaC5cbiAgICAgICAgICAgICAgQWRkIGFuIGV2ZW50IHRvIHRoZSBuZXcgYmF0Y2guXG4gICAgICAgICAgICAgICAgU3VjY2VzczogQ2hlY2sgaWYgYmF0Y2ggaXMgZnVsbCBhbmQgc2VuZCBpZiBpdCBpcy5cbiAgICAgICAgICAgICAgICBGYWlsdXJlOiBFdmVudCBleGNlZWRzIG1heGltdW0gc2l6ZSAoaXQgd2lsbCBuZXZlciBmaXQpLCBmYWlsIHRoZSBldmVudC5cbiAgICAgICAgKi9cbiAgICAgICAgY29uc3QgYWRkU3RhdHVzID0gYmF0Y2gudHJ5QWRkKHBlbmRpbmdJdGVtKTtcbiAgICAgICAgaWYgKGFkZFN0YXR1cy5zdWNjZXNzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0V4cGVjdGluZ05vTW9yZUl0ZW1zID0gYmF0Y2gubGVuZ3RoID09PSB0aGlzLl9mbHVzaFBlbmRpbmdJdGVtc0NvdW50O1xuICAgICAgICAgICAgY29uc3QgaXNGdWxsID0gYmF0Y2gubGVuZ3RoID09PSB0aGlzLl9mbHVzaEF0O1xuICAgICAgICAgICAgaWYgKGlzRnVsbCB8fCBpc0V4cGVjdGluZ05vTW9yZUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKGJhdGNoKS5jYXRjaChub29wKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQmF0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdHhQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBuZXcgaXRlbSBjYXVzZXMgdGhlIG1heGltaW11bSBldmVudCBzaXplIHRvIGJlIGV4Y2VlZGVkLCBzZW5kIHRoZSBjdXJyZW50IGJhdGNoIGFuZCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgICBpZiAoYmF0Y2gubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmQoYmF0Y2gpLmNhdGNoKG5vb3ApO1xuICAgICAgICAgICAgdGhpcy5jbGVhckJhdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmFsbGJhY2tCYXRjaCA9IHRoaXMuY3JlYXRlQmF0Y2goKTtcbiAgICAgICAgY29uc3QgZmJBZGRTdGF0dXMgPSBmYWxsYmFja0JhdGNoLnRyeUFkZChwZW5kaW5nSXRlbSk7XG4gICAgICAgIGlmIChmYkFkZFN0YXR1cy5zdWNjZXNzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0V4cGVjdGluZ05vTW9yZUl0ZW1zID0gZmFsbGJhY2tCYXRjaC5sZW5ndGggPT09IHRoaXMuX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQ7XG4gICAgICAgICAgICBpZiAoaXNFeHBlY3RpbmdOb01vcmVJdGVtcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZChmYWxsYmFja0JhdGNoKS5jYXRjaChub29wKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQmF0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdHhQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGhpcyBzaG91bGQgb25seSBvY2N1ciBpZiBtYXggZXZlbnQgc2l6ZSBpcyBleGNlZWRlZFxuICAgICAgICAgICAgY3R4LnNldEZhaWxlZERlbGl2ZXJ5KHtcbiAgICAgICAgICAgICAgICByZWFzb246IG5ldyBFcnJvcihmYkFkZFN0YXR1cy5tZXNzYWdlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjdHgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmQoYmF0Y2gpIHtcbiAgICAgICAgaWYgKHRoaXMuX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQgLT0gYmF0Y2gubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IGJhdGNoLmdldEV2ZW50cygpO1xuICAgICAgICBjb25zdCBtYXhBdHRlbXB0cyA9IHRoaXMuX21heFJldHJpZXMgKyAxO1xuICAgICAgICBsZXQgY3VycmVudEF0dGVtcHQgPSAwO1xuICAgICAgICB3aGlsZSAoY3VycmVudEF0dGVtcHQgPCBtYXhBdHRlbXB0cykge1xuICAgICAgICAgICAgY3VycmVudEF0dGVtcHQrKztcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ZWRSZXRyeVRpbWVvdXQ7XG4gICAgICAgICAgICBsZXQgZmFpbHVyZVJlYXNvbjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Rpc2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhdGNoLnJlc29sdmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGF1dGhTdHJpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Rva2VuTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuX3Rva2VuTWFuYWdlci5nZXRBY2Nlc3NUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gJiYgdG9rZW4uYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoU3RyaW5nID0gYEJlYXJlciAke3Rva2VuLmFjY2Vzc190b2tlbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ2FuYWx5dGljcy1ub2RlLW5leHQvbGF0ZXN0JyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGF1dGhTdHJpbmcgPyB7IEF1dGhvcml6YXRpb246IGF1dGhTdHJpbmcgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy5fdXJsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2g6IGV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlS2V5OiB0aGlzLl93cml0ZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGh0dHBSZXF1ZXN0VGltZW91dDogdGhpcy5faHR0cFJlcXVlc3RUaW1lb3V0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KCdodHRwX3JlcXVlc3QnLCB7XG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3QuYm9keSxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiByZXF1ZXN0LnVybCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVxdWVzdC5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5faHR0cENsaWVudC5tYWtlUmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3VjY2Vzc2Z1bGx5IHNlbnQgZXZlbnRzLCBzbyBleGl0IVxuICAgICAgICAgICAgICAgICAgICBiYXRjaC5yZXNvbHZlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fdG9rZW5NYW5hZ2VyICYmXG4gICAgICAgICAgICAgICAgICAgIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSB3aXRoIGEgbmV3IE9BdXRoIHRva2VuIGlmIHdlIGhhdmUgT0F1dGggZGF0YVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90b2tlbk1hbmFnZXIuY2xlYXJUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlUmVhc29uID0gbmV3IEVycm9yKGBbJHtyZXNwb25zZS5zdGF0dXN9XSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9odHRwLWFwaS8jbWF4LXJlcXVlc3Qtc2l6ZVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IGVpdGhlciBtYWxmb3JtZWQgb3Igc2l6ZSBleGNlZWRlZCAtIGRvbid0IHJldHJ5LlxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlRmFpbGVkQmF0Y2goYmF0Y2gsIG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSYXRlIGxpbWl0ZWQsIHdhaXQgZm9yIHRoZSByZXNldCB0aW1lXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzICYmICd4LXJhdGVsaW1pdC1yZXNldCcgaW4gcmVzcG9uc2UuaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXAgPSBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzWyd4LXJhdGVsaW1pdC1yZXNldCddLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaW5pdGUocmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkUmV0cnlUaW1lb3V0ID0gcmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXAgLSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZhaWx1cmVSZWFzb24gPSBuZXcgRXJyb3IoYFske3Jlc3BvbnNlLnN0YXR1c31dICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRyZWF0IG90aGVyIGVycm9ycyBhcyB0cmFuc2llbnQgYW5kIHJldHJ5LlxuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlUmVhc29uID0gbmV3IEVycm9yKGBbJHtyZXNwb25zZS5zdGF0dXN9XSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIE5ldHdvcmsgZXJyb3JzIGdldCB0aHJvd24sIHJldHJ5IHRoZW0uXG4gICAgICAgICAgICAgICAgZmFpbHVyZVJlYXNvbiA9IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbmFsIGF0dGVtcHQgZmFpbGVkLCB1cGRhdGUgY29udGV4dCBhbmQgcmVzb2x2ZSBldmVudHMuXG4gICAgICAgICAgICBpZiAoY3VycmVudEF0dGVtcHQgPT09IG1heEF0dGVtcHRzKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZUZhaWxlZEJhdGNoKGJhdGNoLCBmYWlsdXJlUmVhc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXRyeSBhZnRlciBhdHRlbXB0LWJhc2VkIGJhY2tvZmYuXG4gICAgICAgICAgICBhd2FpdCBzbGVlcChyZXF1ZXN0ZWRSZXRyeVRpbWVvdXRcbiAgICAgICAgICAgICAgICA/IHJlcXVlc3RlZFJldHJ5VGltZW91dFxuICAgICAgICAgICAgICAgIDogYmFja29mZih7XG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHQ6IGN1cnJlbnRBdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICBtaW5UaW1lb3V0OiAyNSxcbiAgICAgICAgICAgICAgICAgICAgbWF4VGltZW91dDogMTAwMCxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiByZXNvbHZlRmFpbGVkQmF0Y2goYmF0Y2gsIHJlYXNvbikge1xuICAgIGJhdGNoLmdldENvbnRleHRzKCkuZm9yRWFjaCgoY3R4KSA9PiBjdHguc2V0RmFpbGVkRGVsaXZlcnkoeyByZWFzb24gfSkpO1xuICAgIGJhdGNoLnJlc29sdmVFdmVudHMoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatch: () => (/* binding */ dispatch),\n/* harmony export */   getDelay: () => (/* binding */ getDelay)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callback */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n\n/* The amount of time in ms to wait before invoking the callback. */\nvar getDelay = function (startTimeInEpochMS, timeoutInMS) {\n    var elapsedTime = Date.now() - startTimeInEpochMS;\n    // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n    return Math.max((timeoutInMS !== null && timeoutInMS !== void 0 ? timeoutInMS : 300) - elapsedTime, 0);\n};\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nfunction dispatch(ctx, queue, emitter, options) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var startTime, dispatched;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    emitter.emit('dispatch_start', ctx);\n                    startTime = Date.now();\n                    if (!queue.isEmpty()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, queue.dispatchSingle(ctx)];\n                case 1:\n                    dispatched = _a.sent();\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, queue.dispatch(ctx)];\n                case 3:\n                    dispatched = _a.sent();\n                    _a.label = 4;\n                case 4:\n                    if (!(options === null || options === void 0 ? void 0 : options.callback)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, (0,_callback__WEBPACK_IMPORTED_MODULE_1__.invokeCallback)(dispatched, options.callback, getDelay(startTime, options.timeout))];\n                case 5:\n                    dispatched = _a.sent();\n                    _a.label = 6;\n                case 6:\n                    if (options === null || options === void 0 ? void 0 : options.debug) {\n                        dispatched.flush();\n                    }\n                    return [2 /*return*/, dispatched];\n            }\n        });\n    });\n}\n//# sourceMappingURL=dispatch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDRjtBQUM3QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzP2MxY2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52b2tlQ2FsbGJhY2sgfSBmcm9tICcuLi9jYWxsYmFjayc7XG4vKiBUaGUgYW1vdW50IG9mIHRpbWUgaW4gbXMgdG8gd2FpdCBiZWZvcmUgaW52b2tpbmcgdGhlIGNhbGxiYWNrLiAqL1xuZXhwb3J0IHZhciBnZXREZWxheSA9IGZ1bmN0aW9uIChzdGFydFRpbWVJbkVwb2NoTVMsIHRpbWVvdXRJbk1TKSB7XG4gICAgdmFyIGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZUluRXBvY2hNUztcbiAgICAvLyBpbmNyZWFzaW5nIHRoZSB0aW1lb3V0IGluY3JlYXNlcyB0aGUgZGVsYXkgYnkgYWxtb3N0IHRoZSBzYW1lIGFtb3VudCAtLSB0aGlzIGlzIHdlaXJkIGxlZ2FjeSBiZWhhdmlvci5cbiAgICByZXR1cm4gTWF0aC5tYXgoKHRpbWVvdXRJbk1TICE9PSBudWxsICYmIHRpbWVvdXRJbk1TICE9PSB2b2lkIDAgPyB0aW1lb3V0SW5NUyA6IDMwMCkgLSBlbGFwc2VkVGltZSwgMCk7XG59O1xuLyoqXG4gKiBQdXNoIGFuIGV2ZW50IGludG8gdGhlIGRpc3BhdGNoIHF1ZXVlIGFuZCBpbnZva2UgYW55IGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0gZXZlbnQgLSBTZWdtZW50IGV2ZW50IHRvIGVucXVldWUuXG4gKiBAcGFyYW0gcXVldWUgLSBRdWV1ZSB0byBkaXNwYXRjaCBhZ2FpbnN0LlxuICogQHBhcmFtIGVtaXR0ZXIgLSBUaGlzIGlzIHR5cGljYWxseSBhbiBpbnN0YW5jZSBvZiBcIkFuYWx5dGljc1wiIC0tIHVzZWQgZm9yIG1ldHJpY3MgLyBwcm9ncmVzcyBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSBvcHRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChjdHgsIHF1ZXVlLCBlbWl0dGVyLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhcnRUaW1lLCBkaXNwYXRjaGVkO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Rpc3BhdGNoX3N0YXJ0JywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWV1ZS5pc0VtcHR5KCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBxdWV1ZS5kaXNwYXRjaFNpbmdsZShjdHgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0IC8qeWllbGQqLywgcXVldWUuZGlzcGF0Y2goY3R4KV07XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FsbGJhY2spKSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaW52b2tlQ2FsbGJhY2soZGlzcGF0Y2hlZCwgb3B0aW9ucy5jYWxsYmFjaywgZ2V0RGVsYXkoc3RhcnRUaW1lLCBvcHRpb25zLnRpbWVvdXQpKV07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRpc3BhdGNoZWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3BhdGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/callback/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invokeCallback: () => (/* binding */ invokeCallback),\n/* harmony export */   pTimeout: () => (/* binding */ pTimeout),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nfunction pTimeout(promise, timeout) {\n    return new Promise(function (resolve, reject) {\n        var timeoutId = setTimeout(function () {\n            reject(Error('Promise timed out'));\n        }, timeout);\n        promise\n            .then(function (val) {\n            clearTimeout(timeoutId);\n            return resolve(val);\n        })\n            .catch(reject);\n    });\n}\nfunction sleep(timeoutInMs) {\n    return new Promise(function (resolve) { return setTimeout(resolve, timeoutInMs); });\n}\n/**\n * @param ctx\n * @param callback - the function to invoke\n * @param delay - aka \"timeout\". The amount of time in ms to wait before invoking the callback.\n */\nfunction invokeCallback(ctx, callback, delay) {\n    var cb = function () {\n        try {\n            return Promise.resolve(callback(ctx));\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    };\n    return (sleep(delay)\n        // pTimeout ensures that the callback can't cause the context to hang\n        .then(function () { return pTimeout(cb(), 1000); })\n        .catch(function (err) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.log('warn', 'Callback Error', { error: err });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stats.increment('callback_error');\n    })\n        .then(function () { return ctx; }));\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQLDRDQUE0QywwQ0FBMEM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQSxzRkFBc0YsWUFBWTtBQUNsRztBQUNBLEtBQUs7QUFDTCw0QkFBNEIsYUFBYTtBQUN6QztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanM/MTU5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcFRpbWVvdXQocHJvbWlzZSwgdGltZW91dCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdChFcnJvcignUHJvbWlzZSB0aW1lZCBvdXQnKSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzbGVlcCh0aW1lb3V0SW5Ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0SW5Ncyk7IH0pO1xufVxuLyoqXG4gKiBAcGFyYW0gY3R4XG4gKiBAcGFyYW0gY2FsbGJhY2sgLSB0aGUgZnVuY3Rpb24gdG8gaW52b2tlXG4gKiBAcGFyYW0gZGVsYXkgLSBha2EgXCJ0aW1lb3V0XCIuIFRoZSBhbW91bnQgb2YgdGltZSBpbiBtcyB0byB3YWl0IGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhjdHgsIGNhbGxiYWNrLCBkZWxheSkge1xuICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FsbGJhY2soY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAoc2xlZXAoZGVsYXkpXG4gICAgICAgIC8vIHBUaW1lb3V0IGVuc3VyZXMgdGhhdCB0aGUgY2FsbGJhY2sgY2FuJ3QgY2F1c2UgdGhlIGNvbnRleHQgdG8gaGFuZ1xuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBwVGltZW91dChjYigpLCAxMDAwKTsgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LmxvZygnd2FybicsICdDYWxsYmFjayBFcnJvcicsIHsgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgY3R4ID09PSBudWxsIHx8IGN0eCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3R4LnN0YXRzLmluY3JlbWVudCgnY2FsbGJhY2tfZXJyb3InKTtcbiAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBjdHg7IH0pKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/context/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextCancelation: () => (/* binding */ ContextCancelation),\n/* harmony export */   CoreContext: () => (/* binding */ CoreContext)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(rsc)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dset */ \"(rsc)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../logger */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stats */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n\n\n\n\nvar ContextCancelation = /** @class */ (function () {\n    function ContextCancelation(options) {\n        var _a, _b, _c;\n        this.retry = (_a = options.retry) !== null && _a !== void 0 ? _a : true;\n        this.type = (_b = options.type) !== null && _b !== void 0 ? _b : 'plugin Error';\n        this.reason = (_c = options.reason) !== null && _c !== void 0 ? _c : '';\n    }\n    return ContextCancelation;\n}());\n\nvar CoreContext = /** @class */ (function () {\n    function CoreContext(event, id, stats, logger) {\n        if (id === void 0) { id = (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(); }\n        if (stats === void 0) { stats = new _stats__WEBPACK_IMPORTED_MODULE_2__.NullStats(); }\n        if (logger === void 0) { logger = new _logger__WEBPACK_IMPORTED_MODULE_3__.CoreLogger(); }\n        this.attempts = 0;\n        this.event = event;\n        this._id = id;\n        this.logger = logger;\n        this.stats = stats;\n    }\n    CoreContext.system = function () {\n        // This should be overridden by the subclass to return an instance of the subclass.\n    };\n    CoreContext.prototype.isSame = function (other) {\n        return other.id === this.id;\n    };\n    CoreContext.prototype.cancel = function (error) {\n        if (error) {\n            throw error;\n        }\n        throw new ContextCancelation({ reason: 'Context Cancel' });\n    };\n    CoreContext.prototype.log = function (level, message, extras) {\n        this.logger.log(level, message, extras);\n    };\n    Object.defineProperty(CoreContext.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreContext.prototype.updateEvent = function (path, val) {\n        var _a;\n        // Don't allow integrations that are set to false to be overwritten with integration settings.\n        if (path.split('.')[0] === 'integrations') {\n            var integrationName = path.split('.')[1];\n            if (((_a = this.event.integrations) === null || _a === void 0 ? void 0 : _a[integrationName]) === false) {\n                return this.event;\n            }\n        }\n        (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(this.event, path, val);\n        return this.event;\n    };\n    CoreContext.prototype.failedDelivery = function () {\n        return this._failedDelivery;\n    };\n    CoreContext.prototype.setFailedDelivery = function (options) {\n        this._failedDelivery = options;\n    };\n    CoreContext.prototype.logs = function () {\n        return this.logger.logs;\n    };\n    CoreContext.prototype.flush = function () {\n        this.logger.flush();\n        this.stats.flush();\n    };\n    CoreContext.prototype.toJSON = function () {\n        return {\n            id: this._id,\n            event: this.event,\n            logs: this.logger.logs,\n            metrics: this.stats.metrics,\n        };\n    };\n    return CoreContext;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFDZDtBQUNXO0FBQ0Y7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNkI7QUFDOUI7QUFDQTtBQUNBLDZCQUE2QixLQUFLLGdEQUFJO0FBQ3RDLGdDQUFnQyxZQUFZLDZDQUFTO0FBQ3JELGlDQUFpQyxhQUFhLCtDQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBCQUEwQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3NCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcz9kZjA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICdAbHVrZWVkL3V1aWQnO1xuaW1wb3J0IHsgZHNldCB9IGZyb20gJ2RzZXQnO1xuaW1wb3J0IHsgQ29yZUxvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBOdWxsU3RhdHMgfSBmcm9tICcuLi9zdGF0cyc7XG52YXIgQ29udGV4dENhbmNlbGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRleHRDYW5jZWxhdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0aGlzLnJldHJ5ID0gKF9hID0gb3B0aW9ucy5yZXRyeSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZTtcbiAgICAgICAgdGhpcy50eXBlID0gKF9iID0gb3B0aW9ucy50eXBlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAncGx1Z2luIEVycm9yJztcbiAgICAgICAgdGhpcy5yZWFzb24gPSAoX2MgPSBvcHRpb25zLnJlYXNvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgfVxuICAgIHJldHVybiBDb250ZXh0Q2FuY2VsYXRpb247XG59KCkpO1xuZXhwb3J0IHsgQ29udGV4dENhbmNlbGF0aW9uIH07XG52YXIgQ29yZUNvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUNvbnRleHQoZXZlbnQsIGlkLCBzdGF0cywgbG9nZ2VyKSB7XG4gICAgICAgIGlmIChpZCA9PT0gdm9pZCAwKSB7IGlkID0gdXVpZCgpOyB9XG4gICAgICAgIGlmIChzdGF0cyA9PT0gdm9pZCAwKSB7IHN0YXRzID0gbmV3IE51bGxTdGF0cygpOyB9XG4gICAgICAgIGlmIChsb2dnZXIgPT09IHZvaWQgMCkgeyBsb2dnZXIgPSBuZXcgQ29yZUxvZ2dlcigpOyB9XG4gICAgICAgIHRoaXMuYXR0ZW1wdHMgPSAwO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgICAgICB0aGlzLnN0YXRzID0gc3RhdHM7XG4gICAgfVxuICAgIENvcmVDb250ZXh0LnN5c3RlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSB0aGUgc3ViY2xhc3MgdG8gcmV0dXJuIGFuIGluc3RhbmNlIG9mIHRoZSBzdWJjbGFzcy5cbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5pc1NhbWUgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyLmlkID09PSB0aGlzLmlkO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBDb250ZXh0Q2FuY2VsYXRpb24oeyByZWFzb246ICdDb250ZXh0IENhbmNlbCcgfSk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvcmVDb250ZXh0LnByb3RvdHlwZSwgXCJpZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnVwZGF0ZUV2ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZhbCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIERvbid0IGFsbG93IGludGVncmF0aW9ucyB0aGF0IGFyZSBzZXQgdG8gZmFsc2UgdG8gYmUgb3ZlcndyaXR0ZW4gd2l0aCBpbnRlZ3JhdGlvbiBzZXR0aW5ncy5cbiAgICAgICAgaWYgKHBhdGguc3BsaXQoJy4nKVswXSA9PT0gJ2ludGVncmF0aW9ucycpIHtcbiAgICAgICAgICAgIHZhciBpbnRlZ3JhdGlvbk5hbWUgPSBwYXRoLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMuZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbaW50ZWdyYXRpb25OYW1lXSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZHNldCh0aGlzLmV2ZW50LCBwYXRoLCB2YWwpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudDtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5mYWlsZWREZWxpdmVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhaWxlZERlbGl2ZXJ5O1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnNldEZhaWxlZERlbGl2ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fZmFpbGVkRGVsaXZlcnkgPSBvcHRpb25zO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmxvZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2dlci5sb2dzO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvZ2dlci5mbHVzaCgpO1xuICAgICAgICB0aGlzLnN0YXRzLmZsdXNoKCk7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgICAgICBsb2dzOiB0aGlzLmxvZ2dlci5sb2dzLFxuICAgICAgICAgICAgbWV0cmljczogdGhpcy5zdGF0cy5tZXRyaWNzLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVDb250ZXh0O1xufSgpKTtcbmV4cG9ydCB7IENvcmVDb250ZXh0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/events/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventFactory: () => (/* binding */ CoreEventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dset */ \"(rsc)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _utils_pick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/pick */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\");\n/* harmony import */ var _validation_assertions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validation/assertions */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n\n\n\n\n\n/**\n * Internal settings object that is used internally by the factory\n */\nvar InternalEventFactorySettings = /** @class */ (function () {\n    function InternalEventFactorySettings(settings) {\n        var _a, _b;\n        this.settings = settings;\n        this.createMessageId = settings.createMessageId;\n        this.onEventMethodCall = (_a = settings.onEventMethodCall) !== null && _a !== void 0 ? _a : (function () { });\n        this.onFinishedEvent = (_b = settings.onFinishedEvent) !== null && _b !== void 0 ? _b : (function () { });\n    }\n    return InternalEventFactorySettings;\n}());\nvar CoreEventFactory = /** @class */ (function () {\n    function CoreEventFactory(settings) {\n        this.settings = new InternalEventFactorySettings(settings);\n    }\n    CoreEventFactory.prototype.track = function (event, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'track', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { event: event, type: 'track', properties: properties !== null && properties !== void 0 ? properties : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations) }));\n    };\n    CoreEventFactory.prototype.page = function (category, page, properties, options, globalIntegrations) {\n        var _a;\n        this.settings.onEventMethodCall({ type: 'page', options: options });\n        var event = {\n            type: 'page',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n            event.properties = (_a = event.properties) !== null && _a !== void 0 ? _a : {};\n            event.properties.category = category;\n        }\n        if (page !== null) {\n            event.name = page;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.screen = function (category, screen, properties, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'screen', options: options });\n        var event = {\n            type: 'screen',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (category !== null) {\n            event.category = category;\n        }\n        if (screen !== null) {\n            event.name = screen;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.identify = function (userId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'identify', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'identify', userId: userId, traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: globalIntegrations }));\n    };\n    CoreEventFactory.prototype.group = function (groupId, traits, options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'group', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'group', traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations), //\n            groupId: groupId }));\n    };\n    CoreEventFactory.prototype.alias = function (to, from, // TODO: can we make this undefined?\n    options, globalIntegrations) {\n        this.settings.onEventMethodCall({ type: 'alias', options: options });\n        var base = {\n            userId: to,\n            type: 'alias',\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, globalIntegrations),\n        };\n        if (from !== null) {\n            base.previousId = from;\n        }\n        if (to === undefined) {\n            return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, base), this.baseEvent()));\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), base));\n    };\n    CoreEventFactory.prototype.baseEvent = function () {\n        return {\n            integrations: {},\n            options: {},\n        };\n    };\n    /**\n     * Builds the context part of an event based on \"foreign\" keys that\n     * are provided in the `Options` parameter for an Event\n     */\n    CoreEventFactory.prototype.context = function (options) {\n        var _a;\n        /**\n         * If the event options are known keys from this list, we move them to the top level of the event.\n         * Any other options are moved to context.\n         */\n        var eventOverrideKeys = [\n            'userId',\n            'anonymousId',\n            'timestamp',\n            'messageId',\n        ];\n        delete options['integrations'];\n        var providedOptionsKeys = Object.keys(options);\n        var context = (_a = options.context) !== null && _a !== void 0 ? _a : {};\n        var eventOverrides = {};\n        providedOptionsKeys.forEach(function (key) {\n            if (key === 'context') {\n                return;\n            }\n            if (eventOverrideKeys.includes(key)) {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(eventOverrides, key, options[key]);\n            }\n            else {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(context, key, options[key]);\n            }\n        });\n        return [context, eventOverrides];\n    };\n    CoreEventFactory.prototype.normalize = function (event) {\n        var _a, _b;\n        var integrationBooleans = Object.keys((_a = event.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (integrationNames, name) {\n            var _a;\n            var _b;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationNames), (_a = {}, _a[name] = Boolean((_b = event.integrations) === null || _b === void 0 ? void 0 : _b[name]), _a));\n        }, {});\n        // filter out any undefined options\n        event.options = (0,_utils_pick__WEBPACK_IMPORTED_MODULE_2__.pickBy)(event.options || {}, function (_, value) {\n            return value !== undefined;\n        });\n        // This is pretty trippy, but here's what's going on:\n        // - a) We don't pass initial integration options as part of the event, only if they're true or false\n        // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n        // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n        var allIntegrations = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationBooleans), (_b = event.options) === null || _b === void 0 ? void 0 : _b.integrations);\n        var _c = event.options\n            ? this.context(event.options)\n            : [], context = _c[0], overrides = _c[1];\n        var options = event.options, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__rest)(event, [\"options\"]);\n        var evt = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ timestamp: new Date() }, rest), { context: context, integrations: allIntegrations }), overrides), { messageId: options.messageId || this.settings.createMessageId() });\n        this.settings.onFinishedEvent(evt);\n        (0,_validation_assertions__WEBPACK_IMPORTED_MODULE_3__.validateEvent)(evt);\n        return evt;\n    };\n    return CoreEventFactory;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBQ1o7QUFDRDtBQUNXO0FBQ2tCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvSEFBb0g7QUFDcEgsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0UsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyx1QkFBdUIsdUdBQXVHLFdBQVcsK0NBQVEsR0FBRywwQkFBMEIsK0NBQVEsR0FBRyx1QkFBdUI7QUFDbFE7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdDQUFnQztBQUMxRTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUNsRDtBQUNBO0FBQ0EsMENBQTBDLGtDQUFrQztBQUM1RTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQSwwQ0FBMEMsb0NBQW9DO0FBQzlFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLDRGQUE0RixXQUFXLCtDQUFRLEdBQUcsOENBQThDO0FBQ3pPO0FBQ0E7QUFDQSwwQ0FBMEMsaUNBQWlDO0FBQzNFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLHlFQUF5RSxXQUFXLCtDQUFRLEdBQUcsMEJBQTBCLCtDQUFRLEdBQUc7QUFDN00sOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDdEQ7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qix1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkc7QUFDM0c7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsNkJBQTZCO0FBQ3BFLFNBQVMsSUFBSTtBQUNiO0FBQ0Esd0JBQXdCLG1EQUFNLG9CQUFvQjtBQUNsRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDZDQUFNO0FBQ2xELGtCQUFrQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLHVCQUF1QixXQUFXLGlEQUFpRCxpQkFBaUIsaUVBQWlFO0FBQzdOO0FBQ0EsUUFBUSxxRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzPzc2MGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IGRzZXQgfSBmcm9tICdkc2V0JztcbmltcG9ydCB7IHBpY2tCeSB9IGZyb20gJy4uL3V0aWxzL3BpY2snO1xuaW1wb3J0IHsgdmFsaWRhdGVFdmVudCB9IGZyb20gJy4uL3ZhbGlkYXRpb24vYXNzZXJ0aW9ucyc7XG4vKipcbiAqIEludGVybmFsIHNldHRpbmdzIG9iamVjdCB0aGF0IGlzIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgZmFjdG9yeVxuICovXG52YXIgSW50ZXJuYWxFdmVudEZhY3RvcnlTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJbnRlcm5hbEV2ZW50RmFjdG9yeVNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5jcmVhdGVNZXNzYWdlSWQgPSBzZXR0aW5ncy5jcmVhdGVNZXNzYWdlSWQ7XG4gICAgICAgIHRoaXMub25FdmVudE1ldGhvZENhbGwgPSAoX2EgPSBzZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHRoaXMub25GaW5pc2hlZEV2ZW50ID0gKF9iID0gc2V0dGluZ3Mub25GaW5pc2hlZEV2ZW50KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoZnVuY3Rpb24gKCkgeyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3M7XG59KCkpO1xudmFyIENvcmVFdmVudEZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50RmFjdG9yeShzZXR0aW5ncykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gbmV3IEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgIH1cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChldmVudCwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAndHJhY2snLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCB7IGV2ZW50OiBldmVudCwgdHlwZTogJ3RyYWNrJywgcHJvcGVydGllczogcHJvcGVydGllcyAhPT0gbnVsbCAmJiBwcm9wZXJ0aWVzICE9PSB2b2lkIDAgPyBwcm9wZXJ0aWVzIDoge30sIG9wdGlvbnM6IF9fYXNzaWduKHt9LCBvcHRpb25zKSwgaW50ZWdyYXRpb25zOiBfX2Fzc2lnbih7fSwgZ2xvYmFsSW50ZWdyYXRpb25zKSB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5wYWdlID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBwYWdlLCBwcm9wZXJ0aWVzLCBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ3BhZ2UnLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICB2YXIgZXZlbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiAncGFnZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzID0gKF9hID0gZXZlbnQucHJvcGVydGllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgICAgICBldmVudC5wcm9wZXJ0aWVzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50Lm5hbWUgPSBwYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGV2ZW50KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5zY3JlZW4gPSBmdW5jdGlvbiAoY2F0ZWdvcnksIHNjcmVlbiwgcHJvcGVydGllcywgb3B0aW9ucywgZ2xvYmFsSW50ZWdyYXRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAnc2NyZWVuJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgdmFyIGV2ZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NjcmVlbicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBfX2Fzc2lnbih7fSwgcHJvcGVydGllcyksXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY2F0ZWdvcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjcmVlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXZlbnQubmFtZSA9IHNjcmVlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCBldmVudCkpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50RmFjdG9yeS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAodXNlcklkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2lkZW50aWZ5Jywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnaWRlbnRpZnknLCB1c2VySWQ6IHVzZXJJZCwgdHJhaXRzOiB0cmFpdHMgIT09IG51bGwgJiYgdHJhaXRzICE9PSB2b2lkIDAgPyB0cmFpdHMgOiB7fSwgb3B0aW9uczogX19hc3NpZ24oe30sIG9wdGlvbnMpLCBpbnRlZ3JhdGlvbnM6IGdsb2JhbEludGVncmF0aW9ucyB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uIChncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGdsb2JhbEludGVncmF0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2dyb3VwJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnZ3JvdXAnLCB0cmFpdHM6IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9LCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGdsb2JhbEludGVncmF0aW9ucyksIC8vXG4gICAgICAgICAgICBncm91cElkOiBncm91cElkIH0pKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKHRvLCBmcm9tLCAvLyBUT0RPOiBjYW4gd2UgbWFrZSB0aGlzIHVuZGVmaW5lZD9cbiAgICBvcHRpb25zLCBnbG9iYWxJbnRlZ3JhdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCh7IHR5cGU6ICdhbGlhcycsIG9wdGlvbnM6IG9wdGlvbnMgfSk7XG4gICAgICAgIHZhciBiYXNlID0ge1xuICAgICAgICAgICAgdXNlcklkOiB0byxcbiAgICAgICAgICAgIHR5cGU6ICdhbGlhcycsXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBnbG9iYWxJbnRlZ3JhdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYmFzZS5wcmV2aW91c0lkID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCBiYXNlKSwgdGhpcy5iYXNlRXZlbnQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGJhc2UpKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmJhc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVncmF0aW9uczoge30sXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgY29udGV4dCBwYXJ0IG9mIGFuIGV2ZW50IGJhc2VkIG9uIFwiZm9yZWlnblwiIGtleXMgdGhhdFxuICAgICAqIGFyZSBwcm92aWRlZCBpbiB0aGUgYE9wdGlvbnNgIHBhcmFtZXRlciBmb3IgYW4gRXZlbnRcbiAgICAgKi9cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5jb250ZXh0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIGV2ZW50IG9wdGlvbnMgYXJlIGtub3duIGtleXMgZnJvbSB0aGlzIGxpc3QsIHdlIG1vdmUgdGhlbSB0byB0aGUgdG9wIGxldmVsIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQW55IG90aGVyIG9wdGlvbnMgYXJlIG1vdmVkIHRvIGNvbnRleHQuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZXZlbnRPdmVycmlkZUtleXMgPSBbXG4gICAgICAgICAgICAndXNlcklkJyxcbiAgICAgICAgICAgICdhbm9ueW1vdXNJZCcsXG4gICAgICAgICAgICAndGltZXN0YW1wJyxcbiAgICAgICAgICAgICdtZXNzYWdlSWQnLFxuICAgICAgICBdO1xuICAgICAgICBkZWxldGUgb3B0aW9uc1snaW50ZWdyYXRpb25zJ107XG4gICAgICAgIHZhciBwcm92aWRlZE9wdGlvbnNLZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gKF9hID0gb3B0aW9ucy5jb250ZXh0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgdmFyIGV2ZW50T3ZlcnJpZGVzID0ge307XG4gICAgICAgIHByb3ZpZGVkT3B0aW9uc0tleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnY29udGV4dCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnRPdmVycmlkZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGRzZXQoZXZlbnRPdmVycmlkZXMsIGtleSwgb3B0aW9uc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzZXQoY29udGV4dCwga2V5LCBvcHRpb25zW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtjb250ZXh0LCBldmVudE92ZXJyaWRlc107XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIGludGVncmF0aW9uQm9vbGVhbnMgPSBPYmplY3Qua2V5cygoX2EgPSBldmVudC5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KS5yZWR1Y2UoZnVuY3Rpb24gKGludGVncmF0aW9uTmFtZXMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW50ZWdyYXRpb25OYW1lcyksIChfYSA9IHt9LCBfYVtuYW1lXSA9IEJvb2xlYW4oKF9iID0gZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbbmFtZV0pLCBfYSkpO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGZpbHRlciBvdXQgYW55IHVuZGVmaW5lZCBvcHRpb25zXG4gICAgICAgIGV2ZW50Lm9wdGlvbnMgPSBwaWNrQnkoZXZlbnQub3B0aW9ucyB8fCB7fSwgZnVuY3Rpb24gKF8sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJldHR5IHRyaXBweSwgYnV0IGhlcmUncyB3aGF0J3MgZ29pbmcgb246XG4gICAgICAgIC8vIC0gYSkgV2UgZG9uJ3QgcGFzcyBpbml0aWFsIGludGVncmF0aW9uIG9wdGlvbnMgYXMgcGFydCBvZiB0aGUgZXZlbnQsIG9ubHkgaWYgdGhleSdyZSB0cnVlIG9yIGZhbHNlXG4gICAgICAgIC8vIC0gYikgV2UgZG8gYWNjZXB0IHBlciBpbnRlZ3JhdGlvbiBvdmVycmlkZXMgKGxpa2UgaW50ZWdyYXRpb25zLkFtcGxpdHVkZS5zZXNzaW9uSWQpIGF0IHRoZSBldmVudCBsZXZlbFxuICAgICAgICAvLyBIZW5jZSB0aGUgbmVlZCB0byBjb252ZXJ0IGJhc2UgaW50ZWdyYXRpb24gb3B0aW9ucyB0byBib29sZWFucywgYnV0IG1haW50YWluIHBlciBldmVudCBpbnRlZ3JhdGlvbiBvdmVycmlkZXNcbiAgICAgICAgdmFyIGFsbEludGVncmF0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvbkJvb2xlYW5zKSwgKF9iID0gZXZlbnQub3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmludGVncmF0aW9ucyk7XG4gICAgICAgIHZhciBfYyA9IGV2ZW50Lm9wdGlvbnNcbiAgICAgICAgICAgID8gdGhpcy5jb250ZXh0KGV2ZW50Lm9wdGlvbnMpXG4gICAgICAgICAgICA6IFtdLCBjb250ZXh0ID0gX2NbMF0sIG92ZXJyaWRlcyA9IF9jWzFdO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGV2ZW50Lm9wdGlvbnMsIHJlc3QgPSBfX3Jlc3QoZXZlbnQsIFtcIm9wdGlvbnNcIl0pO1xuICAgICAgICB2YXIgZXZ0ID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSwgcmVzdCksIHsgY29udGV4dDogY29udGV4dCwgaW50ZWdyYXRpb25zOiBhbGxJbnRlZ3JhdGlvbnMgfSksIG92ZXJyaWRlcyksIHsgbWVzc2FnZUlkOiBvcHRpb25zLm1lc3NhZ2VJZCB8fCB0aGlzLnNldHRpbmdzLmNyZWF0ZU1lc3NhZ2VJZCgpIH0pO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRmluaXNoZWRFdmVudChldnQpO1xuICAgICAgICB2YWxpZGF0ZUV2ZW50KGV2dCk7XG4gICAgICAgIHJldHVybiBldnQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUV2ZW50RmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBDb3JlRXZlbnRGYWN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/logger/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreLogger: () => (/* binding */ CoreLogger)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar CoreLogger = /** @class */ (function () {\n    function CoreLogger() {\n        this._logs = [];\n    }\n    CoreLogger.prototype.log = function (level, message, extras) {\n        var time = new Date();\n        this._logs.push({\n            level: level,\n            message: message,\n            time: time,\n            extras: extras,\n        });\n    };\n    Object.defineProperty(CoreLogger.prototype, \"logs\", {\n        get: function () {\n            return this._logs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreLogger.prototype.flush = function () {\n        if (this.logs.length > 1) {\n            var formatted = this._logs.reduce(function (logs, log) {\n                var _a;\n                var _b, _c;\n                var line = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, log), { json: JSON.stringify(log.extras, null, ' '), extras: log.extras });\n                delete line['time'];\n                var key = (_c = (_b = log.time) === null || _b === void 0 ? void 0 : _b.toISOString()) !== null && _c !== void 0 ? _c : '';\n                if (logs[key]) {\n                    key = \"\".concat(key, \"-\").concat(Math.random());\n                }\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, logs), (_a = {}, _a[key] = line, _a));\n            }, {});\n            // ie doesn't like console.table\n            if (console.table) {\n                console.table(formatted);\n            }\n            else {\n                console.log(formatted);\n            }\n        }\n        else {\n            this.logs.forEach(function (logEntry) {\n                var level = logEntry.level, message = logEntry.message, extras = logEntry.extras;\n                if (level === 'info' || level === 'debug') {\n                    console.log(message, extras !== null && extras !== void 0 ? extras : '');\n                }\n                else {\n                    console[level](message, extras !== null && extras !== void 0 ? extras : '');\n                }\n            });\n        }\n        this._logs = [];\n    };\n    return CoreLogger;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxVQUFVLGlFQUFpRTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxpQkFBaUI7QUFDNUQsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3FCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzPzc3NDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbnZhciBDb3JlTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvcmVMb2dnZXIoKSB7XG4gICAgICAgIHRoaXMuX2xvZ3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZUxvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlLCBleHRyYXMpIHtcbiAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLl9sb2dzLnB1c2goe1xuICAgICAgICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgICBleHRyYXM6IGV4dHJhcyxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29yZUxvZ2dlci5wcm90b3R5cGUsIFwibG9nc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBDb3JlTG9nZ2VyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0gdGhpcy5fbG9ncy5yZWR1Y2UoZnVuY3Rpb24gKGxvZ3MsIGxvZykge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxvZyksIHsganNvbjogSlNPTi5zdHJpbmdpZnkobG9nLmV4dHJhcywgbnVsbCwgJyAnKSwgZXh0cmFzOiBsb2cuZXh0cmFzIH0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBsaW5lWyd0aW1lJ107XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IChfYyA9IChfYiA9IGxvZy50aW1lKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9JU09TdHJpbmcoKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XG4gICAgICAgICAgICAgICAgaWYgKGxvZ3Nba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBcIlwiLmNvbmNhdChrZXksIFwiLVwiKS5jb25jYXQoTWF0aC5yYW5kb20oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbG9ncyksIChfYSA9IHt9LCBfYVtrZXldID0gbGluZSwgX2EpKTtcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIC8vIGllIGRvZXNuJ3QgbGlrZSBjb25zb2xlLnRhYmxlXG4gICAgICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUudGFibGUoZm9ybWF0dGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MuZm9yRWFjaChmdW5jdGlvbiAobG9nRW50cnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSBsb2dFbnRyeS5sZXZlbCwgbWVzc2FnZSA9IGxvZ0VudHJ5Lm1lc3NhZ2UsIGV4dHJhcyA9IGxvZ0VudHJ5LmV4dHJhcztcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT09ICdpbmZvJyB8fCBsZXZlbCA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlW2xldmVsXShtZXNzYWdlLCBleHRyYXMgIT09IG51bGwgJiYgZXh0cmFzICE9PSB2b2lkIDAgPyBleHRyYXMgOiAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9ncyA9IFtdO1xuICAgIH07XG4gICAgcmV0dXJuIENvcmVMb2dnZXI7XG59KCkpO1xuZXhwb3J0IHsgQ29yZUxvZ2dlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backoff: () => (/* binding */ backoff)\n/* harmony export */ });\nfunction backoff(params) {\n    var random = Math.random() + 1;\n    var _a = params.minTimeout, minTimeout = _a === void 0 ? 500 : _a, _b = params.factor, factor = _b === void 0 ? 2 : _b, attempt = params.attempt, _c = params.maxTimeout, maxTimeout = _c === void 0 ? Infinity : _c;\n    return Math.min(random * minTimeout * Math.pow(factor, attempt), maxTimeout);\n}\n//# sourceMappingURL=backoff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcz83NGYyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBiYWNrb2ZmKHBhcmFtcykge1xuICAgIHZhciByYW5kb20gPSBNYXRoLnJhbmRvbSgpICsgMTtcbiAgICB2YXIgX2EgPSBwYXJhbXMubWluVGltZW91dCwgbWluVGltZW91dCA9IF9hID09PSB2b2lkIDAgPyA1MDAgOiBfYSwgX2IgPSBwYXJhbXMuZmFjdG9yLCBmYWN0b3IgPSBfYiA9PT0gdm9pZCAwID8gMiA6IF9iLCBhdHRlbXB0ID0gcGFyYW1zLmF0dGVtcHQsIF9jID0gcGFyYW1zLm1heFRpbWVvdXQsIG1heFRpbWVvdXQgPSBfYyA9PT0gdm9pZCAwID8gSW5maW5pdHkgOiBfYztcbiAgICByZXR1cm4gTWF0aC5taW4ocmFuZG9tICogbWluVGltZW91dCAqIE1hdGgucG93KGZhY3RvciwgYXR0ZW1wdCksIG1heFRpbWVvdXQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFja29mZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ON_REMOVE_FROM_FUTURE: () => (/* binding */ ON_REMOVE_FROM_FUTURE),\n/* harmony export */   PriorityQueue: () => (/* binding */ PriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _backoff__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backoff */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n\n\n\n/**\n * @internal\n */\nvar ON_REMOVE_FROM_FUTURE = 'onRemoveFromFuture';\nvar PriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(PriorityQueue, _super);\n    function PriorityQueue(maxAttempts, queue, seen) {\n        var _this = _super.call(this) || this;\n        _this.future = [];\n        _this.maxAttempts = maxAttempts;\n        _this.queue = queue;\n        _this.seen = seen !== null && seen !== void 0 ? seen : {};\n        return _this;\n    }\n    PriorityQueue.prototype.push = function () {\n        var _this = this;\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var accepted = items.map(function (operation) {\n            var attempts = _this.updateAttempts(operation);\n            if (attempts > _this.maxAttempts || _this.includes(operation)) {\n                return false;\n            }\n            _this.queue.push(operation);\n            return true;\n        });\n        this.queue = this.queue.sort(function (a, b) { return _this.getAttempts(a) - _this.getAttempts(b); });\n        return accepted;\n    };\n    PriorityQueue.prototype.pushWithBackoff = function (item, minTimeout) {\n        var _this = this;\n        if (minTimeout === void 0) { minTimeout = 0; }\n        // One immediate retry unless we have a minimum timeout (e.g. for rate limiting)\n        if (minTimeout == 0 && this.getAttempts(item) === 0) {\n            return this.push(item)[0];\n        }\n        var attempt = this.updateAttempts(item);\n        if (attempt > this.maxAttempts || this.includes(item)) {\n            return false;\n        }\n        var timeout = (0,_backoff__WEBPACK_IMPORTED_MODULE_1__.backoff)({ attempt: attempt - 1 });\n        if (minTimeout > 0 && timeout < minTimeout) {\n            timeout = minTimeout;\n        }\n        setTimeout(function () {\n            _this.queue.push(item);\n            // remove from future list\n            _this.future = _this.future.filter(function (f) { return f.id !== item.id; });\n            // Lets listeners know that a 'future' message is now available in the queue\n            _this.emit(ON_REMOVE_FROM_FUTURE);\n        }, timeout);\n        this.future.push(item);\n        return true;\n    };\n    PriorityQueue.prototype.getAttempts = function (item) {\n        var _a;\n        return (_a = this.seen[item.id]) !== null && _a !== void 0 ? _a : 0;\n    };\n    PriorityQueue.prototype.updateAttempts = function (item) {\n        this.seen[item.id] = this.getAttempts(item) + 1;\n        return this.getAttempts(item);\n    };\n    PriorityQueue.prototype.includes = function (item) {\n        return (this.queue.includes(item) ||\n            this.future.includes(item) ||\n            Boolean(this.queue.find(function (i) { return i.id === item.id; })) ||\n            Boolean(this.future.find(function (i) { return i.id === item.id; })));\n    };\n    PriorityQueue.prototype.pop = function () {\n        return this.queue.shift();\n    };\n    Object.defineProperty(PriorityQueue.prototype, \"length\", {\n        get: function () {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"todo\", {\n        get: function () {\n            return this.queue.length + this.future.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PriorityQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__.Emitter));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDeUI7QUFDdkI7QUFDcEM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdURBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFPLEdBQUcsc0JBQXNCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwwQkFBMEI7QUFDeEY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBCQUEwQjtBQUM3RSxvREFBb0QsMEJBQTBCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDLENBQUMscUVBQU87QUFDZ0I7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9wcmlvcml0eS1xdWV1ZS9pbmRleC5qcz85NzVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGJhY2tvZmYgfSBmcm9tICcuL2JhY2tvZmYnO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBPTl9SRU1PVkVfRlJPTV9GVVRVUkUgPSAnb25SZW1vdmVGcm9tRnV0dXJlJztcbnZhciBQcmlvcml0eVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcmlvcml0eVF1ZXVlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUobWF4QXR0ZW1wdHMsIHF1ZXVlLCBzZWVuKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmZ1dHVyZSA9IFtdO1xuICAgICAgICBfdGhpcy5tYXhBdHRlbXB0cyA9IG1heEF0dGVtcHRzO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBfdGhpcy5zZWVuID0gc2VlbiAhPT0gbnVsbCAmJiBzZWVuICE9PSB2b2lkIDAgPyBzZWVuIDoge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBpdGVtc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhY2NlcHRlZCA9IGl0ZW1zLm1hcChmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBfdGhpcy51cGRhdGVBdHRlbXB0cyhvcGVyYXRpb24pO1xuICAgICAgICAgICAgaWYgKGF0dGVtcHRzID4gX3RoaXMubWF4QXR0ZW1wdHMgfHwgX3RoaXMuaW5jbHVkZXMob3BlcmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHRoaXMucXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gX3RoaXMuZ2V0QXR0ZW1wdHMoYSkgLSBfdGhpcy5nZXRBdHRlbXB0cyhiKTsgfSk7XG4gICAgICAgIHJldHVybiBhY2NlcHRlZDtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnB1c2hXaXRoQmFja29mZiA9IGZ1bmN0aW9uIChpdGVtLCBtaW5UaW1lb3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChtaW5UaW1lb3V0ID09PSB2b2lkIDApIHsgbWluVGltZW91dCA9IDA7IH1cbiAgICAgICAgLy8gT25lIGltbWVkaWF0ZSByZXRyeSB1bmxlc3Mgd2UgaGF2ZSBhIG1pbmltdW0gdGltZW91dCAoZS5nLiBmb3IgcmF0ZSBsaW1pdGluZylcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPT0gMCAmJiB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGl0ZW0pWzBdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdHRlbXB0ID0gdGhpcy51cGRhdGVBdHRlbXB0cyhpdGVtKTtcbiAgICAgICAgaWYgKGF0dGVtcHQgPiB0aGlzLm1heEF0dGVtcHRzIHx8IHRoaXMuaW5jbHVkZXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGltZW91dCA9IGJhY2tvZmYoeyBhdHRlbXB0OiBhdHRlbXB0IC0gMSB9KTtcbiAgICAgICAgaWYgKG1pblRpbWVvdXQgPiAwICYmIHRpbWVvdXQgPCBtaW5UaW1lb3V0KSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbWluVGltZW91dDtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBmdXR1cmUgbGlzdFxuICAgICAgICAgICAgX3RoaXMuZnV0dXJlID0gX3RoaXMuZnV0dXJlLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5pZCAhPT0gaXRlbS5pZDsgfSk7XG4gICAgICAgICAgICAvLyBMZXRzIGxpc3RlbmVycyBrbm93IHRoYXQgYSAnZnV0dXJlJyBtZXNzYWdlIGlzIG5vdyBhdmFpbGFibGUgaW4gdGhlIHF1ZXVlXG4gICAgICAgICAgICBfdGhpcy5lbWl0KE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmZ1dHVyZS5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldEF0dGVtcHRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zZWVuW2l0ZW0uaWRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgIH07XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUudXBkYXRlQXR0ZW1wdHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnNlZW5baXRlbS5pZF0gPSB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pICsgMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0ZW1wdHMoaXRlbSk7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5xdWV1ZS5pbmNsdWRlcyhpdGVtKSB8fFxuICAgICAgICAgICAgdGhpcy5mdXR1cmUuaW5jbHVkZXMoaXRlbSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5xdWV1ZS5maW5kKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLmlkID09PSBpdGVtLmlkOyB9KSkgfHxcbiAgICAgICAgICAgIEJvb2xlYW4odGhpcy5mdXR1cmUuZmluZChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5pZCA9PT0gaXRlbS5pZDsgfSkpKTtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlvcml0eVF1ZXVlLnByb3RvdHlwZSwgXCJ0b2RvXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggKyB0aGlzLmZ1dHVyZS5sZW5ndGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gUHJpb3JpdHlRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgUHJpb3JpdHlRdWV1ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attempt: () => (/* binding */ attempt),\n/* harmony export */   ensure: () => (/* binding */ ensure)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n\n\nfunction tryAsync(fn) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, fn()];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, Promise.reject(err_1)];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction attempt(ctx, plugin) {\n    ctx.log('debug', 'plugin', { plugin: plugin.name });\n    var start = new Date().getTime();\n    var hook = plugin[ctx.event.type];\n    if (hook === undefined) {\n        return Promise.resolve(ctx);\n    }\n    var newCtx = tryAsync(function () { return hook.apply(plugin, [ctx]); })\n        .then(function (ctx) {\n        var done = new Date().getTime() - start;\n        ctx.stats.gauge('plugin_time', done, [\"plugin:\".concat(plugin.name)]);\n        return ctx;\n    })\n        .catch(function (err) {\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation &&\n            err.type === 'middleware_cancellation') {\n            throw err;\n        }\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation) {\n            ctx.log('warn', err.type, {\n                plugin: plugin.name,\n                error: err,\n            });\n            return err;\n        }\n        ctx.log('error', 'plugin Error', {\n            plugin: plugin.name,\n            error: err,\n        });\n        ctx.stats.increment('plugin_error', 1, [\"plugin:\".concat(plugin.name)]);\n        return err;\n    });\n    return newCtx;\n}\nfunction ensure(ctx, plugin) {\n    return attempt(ctx, plugin).then(function (newContext) {\n        if (newContext instanceof _context__WEBPACK_IMPORTED_MODULE_1__.CoreContext) {\n            return newContext;\n        }\n        ctx.log('debug', 'Context canceled');\n        ctx.stats.increment('context_canceled');\n        ctx.cancel(newContext);\n    });\n}\n//# sourceMappingURL=delivery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNjO0FBQzdEO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxpQ0FBaUMscUJBQXFCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUNBQW1DO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLHdEQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQ0FBa0MsaURBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanM/ODkzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb3JlQ29udGV4dCwgQ29udGV4dENhbmNlbGF0aW9uIH0gZnJvbSAnLi4vY29udGV4dCc7XG5mdW5jdGlvbiB0cnlBc3luYyhmbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVycl8xO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmbigpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLnJlamVjdChlcnJfMSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhdHRlbXB0KGN0eCwgcGx1Z2luKSB7XG4gICAgY3R4LmxvZygnZGVidWcnLCAncGx1Z2luJywgeyBwbHVnaW46IHBsdWdpbi5uYW1lIH0pO1xuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHZhciBob29rID0gcGx1Z2luW2N0eC5ldmVudC50eXBlXTtcbiAgICBpZiAoaG9vayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3R4KTtcbiAgICB9XG4gICAgdmFyIG5ld0N0eCA9IHRyeUFzeW5jKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGhvb2suYXBwbHkocGx1Z2luLCBbY3R4XSk7IH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIGRvbmUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0O1xuICAgICAgICBjdHguc3RhdHMuZ2F1Z2UoJ3BsdWdpbl90aW1lJywgZG9uZSwgW1wicGx1Z2luOlwiLmNvbmNhdChwbHVnaW4ubmFtZSldKTtcbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uICYmXG4gICAgICAgICAgICBlcnIudHlwZSA9PT0gJ21pZGRsZXdhcmVfY2FuY2VsbGF0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBDb250ZXh0Q2FuY2VsYXRpb24pIHtcbiAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCBlcnIudHlwZSwge1xuICAgICAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luLm5hbWUsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdlcnJvcicsICdwbHVnaW4gRXJyb3InLCB7XG4gICAgICAgICAgICBwbHVnaW46IHBsdWdpbi5uYW1lLFxuICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ3BsdWdpbl9lcnJvcicsIDEsIFtcInBsdWdpbjpcIi5jb25jYXQocGx1Z2luLm5hbWUpXSk7XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld0N0eDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmUoY3R4LCBwbHVnaW4pIHtcbiAgICByZXR1cm4gYXR0ZW1wdChjdHgsIHBsdWdpbikudGhlbihmdW5jdGlvbiAobmV3Q29udGV4dCkge1xuICAgICAgICBpZiAobmV3Q29udGV4dCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3Q29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdDb250ZXh0IGNhbmNlbGVkJyk7XG4gICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2NvbnRleHRfY2FuY2VsZWQnKTtcbiAgICAgICAgY3R4LmNhbmNlbChuZXdDb250ZXh0KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGl2ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventQueue: () => (/* binding */ CoreEventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _utils_group_by__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/group-by */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\");\n/* harmony import */ var _priority_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../priority-queue */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _task_task_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../task/task-group */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\");\n/* harmony import */ var _delivery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./delivery */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n\n\n\n\n\n\n\nvar CoreEventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(CoreEventQueue, _super);\n    function CoreEventQueue(priorityQueue) {\n        var _this = _super.call(this) || this;\n        /**\n         * All event deliveries get suspended until all the tasks in this task group are complete.\n         * For example: a middleware that augments the event object should be loaded safely as a\n         * critical task, this way, event queue will wait for it to be ready before sending events.\n         *\n         * This applies to all the events already in the queue, and the upcoming ones\n         */\n        _this.criticalTasks = (0,_task_task_group__WEBPACK_IMPORTED_MODULE_1__.createTaskGroup)();\n        _this.plugins = [];\n        _this.failedInitializations = [];\n        _this.flushing = false;\n        _this.queue = priorityQueue;\n        _this.queue.on(_priority_queue__WEBPACK_IMPORTED_MODULE_2__.ON_REMOVE_FROM_FUTURE, function () {\n            _this.scheduleFlush(0);\n        });\n        return _this;\n    }\n    CoreEventQueue.prototype.register = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var handleLoadError, err_1;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.plugins.push(plugin);\n                        handleLoadError = function (err) {\n                            _this.failedInitializations.push(plugin.name);\n                            _this.emit('initialization_failure', plugin);\n                            console.warn(plugin.name, err);\n                            ctx.log('warn', 'Failed to load destination', {\n                                plugin: plugin.name,\n                                error: err,\n                            });\n                            // Filter out the failed plugin by excluding it from the list\n                            _this.plugins = _this.plugins.filter(function (p) { return p !== plugin; });\n                        };\n                        if (!(plugin.type === 'destination' && plugin.name !== 'Segment.io')) return [3 /*break*/, 1];\n                        plugin.load(ctx, instance).catch(handleLoadError);\n                        return [3 /*break*/, 4];\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, plugin.load(ctx, instance)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        handleLoadError(err_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.deregister = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var e_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        if (!plugin.unload) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.resolve(plugin.unload(ctx, instance))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        this.plugins = this.plugins.filter(function (p) { return p.name !== plugin.name; });\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        ctx.log('warn', 'Failed to unload destination', {\n                            plugin: plugin.name,\n                            error: e_1,\n                        });\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatch = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var willDeliver;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.push(ctx);\n                willDeliver = this.subscribeToDelivery(ctx);\n                this.scheduleFlush(0);\n                return [2 /*return*/, willDeliver];\n            });\n        });\n    };\n    CoreEventQueue.prototype.subscribeToDelivery = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var onDeliver = function (flushed, delivered) {\n                            if (flushed.isSame(ctx)) {\n                                _this.off('flush', onDeliver);\n                                if (delivered) {\n                                    resolve(flushed);\n                                }\n                                else {\n                                    resolve(flushed);\n                                }\n                            }\n                        };\n                        _this.on('flush', onDeliver);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatchSingle = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.updateAttempts(ctx);\n                ctx.attempts = 1;\n                return [2 /*return*/, this.deliver(ctx).catch(function (err) {\n                        var accepted = _this.enqueuRetry(err, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err });\n                            return ctx;\n                        }\n                        return _this.subscribeToDelivery(ctx);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.isEmpty = function () {\n        return this.queue.length === 0;\n    };\n    CoreEventQueue.prototype.scheduleFlush = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = 500; }\n        if (this.flushing) {\n            return;\n        }\n        this.flushing = true;\n        setTimeout(function () {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            _this.flush().then(function () {\n                setTimeout(function () {\n                    _this.flushing = false;\n                    if (_this.queue.length) {\n                        _this.scheduleFlush(0);\n                    }\n                }, 0);\n            });\n        }, timeout);\n    };\n    CoreEventQueue.prototype.deliver = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var start, done, err_2, error;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.criticalTasks.done()];\n                    case 1:\n                        _a.sent();\n                        start = Date.now();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.flushOne(ctx)];\n                    case 3:\n                        ctx = _a.sent();\n                        done = Date.now() - start;\n                        this.emit('delivery_success', ctx);\n                        ctx.stats.gauge('delivered', done);\n                        ctx.log('debug', 'Delivered', ctx.event);\n                        return [2 /*return*/, ctx];\n                    case 4:\n                        err_2 = _a.sent();\n                        error = err_2;\n                        ctx.log('error', 'Failed to deliver', error);\n                        this.emit('delivery_failure', ctx, error);\n                        ctx.stats.increment('delivery_failed');\n                        throw err_2;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.enqueuRetry = function (err, ctx) {\n        var retriable = !(err instanceof _context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation) || err.retry;\n        if (!retriable) {\n            return false;\n        }\n        return this.queue.pushWithBackoff(ctx);\n    };\n    CoreEventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, err_3, accepted;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length === 0) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx = this.queue.pop();\n                        if (!ctx) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx.attempts = this.queue.getAttempts(ctx);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.deliver(ctx)];\n                    case 2:\n                        ctx = _a.sent();\n                        this.emit('flush', ctx, true);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        accepted = this.enqueuRetry(err_3, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err_3 });\n                            this.emit('flush', ctx, false);\n                        }\n                        return [2 /*return*/, []];\n                    case 4: return [2 /*return*/, [ctx]];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.isReady = function () {\n        // return this.plugins.every((p) => p.isLoaded())\n        // should we wait for every plugin to load?\n        return true;\n    };\n    CoreEventQueue.prototype.availableExtensions = function (denyList) {\n        var available = this.plugins.filter(function (p) {\n            var _a, _b, _c;\n            // Only filter out destination plugins or the Segment.io plugin\n            if (p.type !== 'destination' && p.name !== 'Segment.io') {\n                return true;\n            }\n            var alternativeNameMatch = undefined;\n            (_a = p.alternativeNames) === null || _a === void 0 ? void 0 : _a.forEach(function (name) {\n                if (denyList[name] !== undefined) {\n                    alternativeNameMatch = denyList[name];\n                }\n            });\n            // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n            return ((_c = (_b = denyList[p.name]) !== null && _b !== void 0 ? _b : alternativeNameMatch) !== null && _c !== void 0 ? _c : (p.name === 'Segment.io' ? true : denyList.All) !== false);\n        });\n        var _a = (0,_utils_group_by__WEBPACK_IMPORTED_MODULE_4__.groupBy)(available, 'type'), _b = _a.before, before = _b === void 0 ? [] : _b, _c = _a.enrichment, enrichment = _c === void 0 ? [] : _c, _d = _a.destination, destination = _d === void 0 ? [] : _d, _e = _a.after, after = _e === void 0 ? [] : _e;\n        return {\n            before: before,\n            enrichment: enrichment,\n            destinations: destination,\n            after: after,\n        };\n    };\n    CoreEventQueue.prototype.flushOne = function (ctx) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _c, before, enrichment, _i, before_1, beforeWare, temp, _d, enrichment_1, enrichmentWare, temp, _e, destinations, after, afterCalls;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!this.isReady()) {\n                            throw new Error('Not ready');\n                        }\n                        if (ctx.attempts > 1) {\n                            this.emit('delivery_retry', ctx);\n                        }\n                        _c = this.availableExtensions((_a = ctx.event.integrations) !== null && _a !== void 0 ? _a : {}), before = _c.before, enrichment = _c.enrichment;\n                        _i = 0, before_1 = before;\n                        _f.label = 1;\n                    case 1:\n                        if (!(_i < before_1.length)) return [3 /*break*/, 4];\n                        beforeWare = before_1[_i];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.ensure)(ctx, beforeWare)];\n                    case 2:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, beforeWare);\n                        _f.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d = 0, enrichment_1 = enrichment;\n                        _f.label = 5;\n                    case 5:\n                        if (!(_d < enrichment_1.length)) return [3 /*break*/, 8];\n                        enrichmentWare = enrichment_1[_d];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, enrichmentWare)];\n                    case 6:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, enrichmentWare);\n                        _f.label = 7;\n                    case 7:\n                        _d++;\n                        return [3 /*break*/, 5];\n                    case 8:\n                        _e = this.availableExtensions((_b = ctx.event.integrations) !== null && _b !== void 0 ? _b : {}), destinations = _e.destinations, after = _e.after;\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                setTimeout(function () {\n                                    var attempts = destinations.map(function (destination) {\n                                        return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, destination);\n                                    });\n                                    Promise.all(attempts).then(resolve).catch(reject);\n                                }, 0);\n                            })];\n                    case 9:\n                        _f.sent();\n                        ctx.stats.increment('message_delivered');\n                        this.emit('message_delivered', ctx);\n                        afterCalls = after.map(function (after) { return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, after); });\n                        return [4 /*yield*/, Promise.all(afterCalls)];\n                    case 10:\n                        _f.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    return CoreEventQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.Emitter));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZXZlbnQtcXVldWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDZDtBQUNjO0FBQ0c7QUFDRjtBQUNOO0FBQ1I7QUFDN0M7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlFQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFxQjtBQUM1QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxnRkFBZ0Ysc0JBQXNCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsZ0NBQWdDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxhQUFhO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5Qyx3REFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxlQUFlO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQix3REFBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SEFBdUg7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxpREFBTTtBQUNuRDtBQUNBO0FBQ0EsNENBQTRDLGlEQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtEQUFPO0FBQ3BEO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVIQUF1SDtBQUN2SDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0RBQU87QUFDdEQscUNBQXFDO0FBQ3JDO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxPQUFPLGtEQUFPLGVBQWU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUMsQ0FBQyxxRUFBTztBQUNpQjtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzP2E4YzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2V4dGVuZHMsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBncm91cEJ5IH0gZnJvbSAnLi4vdXRpbHMvZ3JvdXAtYnknO1xuaW1wb3J0IHsgT05fUkVNT1ZFX0ZST01fRlVUVVJFIH0gZnJvbSAnLi4vcHJpb3JpdHktcXVldWUnO1xuaW1wb3J0IHsgQ29yZUNvbnRleHQsIENvbnRleHRDYW5jZWxhdGlvbiB9IGZyb20gJy4uL2NvbnRleHQnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVRhc2tHcm91cCB9IGZyb20gJy4uL3Rhc2svdGFzay1ncm91cCc7XG5pbXBvcnQgeyBhdHRlbXB0LCBlbnN1cmUgfSBmcm9tICcuL2RlbGl2ZXJ5JztcbnZhciBDb3JlRXZlbnRRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29yZUV2ZW50UXVldWUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29yZUV2ZW50UXVldWUocHJpb3JpdHlRdWV1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIGV2ZW50IGRlbGl2ZXJpZXMgZ2V0IHN1c3BlbmRlZCB1bnRpbCBhbGwgdGhlIHRhc2tzIGluIHRoaXMgdGFzayBncm91cCBhcmUgY29tcGxldGUuXG4gICAgICAgICAqIEZvciBleGFtcGxlOiBhIG1pZGRsZXdhcmUgdGhhdCBhdWdtZW50cyB0aGUgZXZlbnQgb2JqZWN0IHNob3VsZCBiZSBsb2FkZWQgc2FmZWx5IGFzIGFcbiAgICAgICAgICogY3JpdGljYWwgdGFzaywgdGhpcyB3YXksIGV2ZW50IHF1ZXVlIHdpbGwgd2FpdCBmb3IgaXQgdG8gYmUgcmVhZHkgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGFwcGxpZXMgdG8gYWxsIHRoZSBldmVudHMgYWxyZWFkeSBpbiB0aGUgcXVldWUsIGFuZCB0aGUgdXBjb21pbmcgb25lc1xuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3JpdGljYWxUYXNrcyA9IGNyZWF0ZVRhc2tHcm91cCgpO1xuICAgICAgICBfdGhpcy5wbHVnaW5zID0gW107XG4gICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucyA9IFtdO1xuICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5xdWV1ZSA9IHByaW9yaXR5UXVldWU7XG4gICAgICAgIF90aGlzLnF1ZXVlLm9uKE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGN0eCwgcGx1Z2luLCBpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlTG9hZEVycm9yLCBlcnJfMTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZhaWxlZEluaXRpYWxpemF0aW9ucy5wdXNoKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KCdpbml0aWFsaXphdGlvbl9mYWlsdXJlJywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4ocGx1Z2luLm5hbWUsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnd2FybicsICdGYWlsZWQgdG8gbG9hZCBkZXN0aW5hdGlvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IHRoZSBmYWlsZWQgcGx1Z2luIGJ5IGV4Y2x1ZGluZyBpdCBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGx1Z2lucyA9IF90aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSBwbHVnaW47IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsdWdpbi50eXBlID09PSAnZGVzdGluYXRpb24nICYmIHBsdWdpbi5uYW1lICE9PSAnU2VnbWVudC5pbycpKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpLmNhdGNoKGhhbmRsZUxvYWRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbi5sb2FkKGN0eCwgaW5zdGFuY2UpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9hZEVycm9yKGVycl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVyZWdpc3RlciA9IGZ1bmN0aW9uIChjdHgsIHBsdWdpbiwgaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi51bmxvYWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5yZXNvbHZlKHBsdWdpbi51bmxvYWQoY3R4LCBpbnN0YW5jZSkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMgPSB0aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm5hbWUgIT09IHBsdWdpbi5uYW1lOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgJ0ZhaWxlZCB0byB1bmxvYWQgZGVzdGluYXRpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZV8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgd2lsbERlbGl2ZXI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goY3R4KTtcbiAgICAgICAgICAgICAgICB3aWxsRGVsaXZlciA9IHRoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgd2lsbERlbGl2ZXJdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnN1YnNjcmliZVRvRGVsaXZlcnkgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25EZWxpdmVyID0gZnVuY3Rpb24gKGZsdXNoZWQsIGRlbGl2ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbHVzaGVkLmlzU2FtZShjdHgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsaXZlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZsdXNoZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmbHVzaGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbignZmx1c2gnLCBvbkRlbGl2ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGlzcGF0Y2hTaW5nbGUgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGlzcGF0Y2hpbmcnKTtcbiAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2Rpc3BhdGNoZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnVwZGF0ZUF0dGVtcHRzKGN0eCk7XG4gICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5kZWxpdmVyKGN0eCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY2VwdGVkID0gX3RoaXMuZW5xdWV1UmV0cnkoZXJyLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY2NlcHRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zZXRGYWlsZWREZWxpdmVyeSh7IHJlYXNvbjogZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlVG9EZWxpdmVyeShjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoID09PSAwO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLnNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7IHRpbWVvdXQgPSA1MDA7IH1cbiAgICAgICAgaWYgKHRoaXMuZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgICAgICBfdGhpcy5mbHVzaCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY2hlZHVsZUZsdXNoKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZGVsaXZlciA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0LCBkb25lLCBlcnJfMiwgZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY3JpdGljYWxUYXNrcy5kb25lKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmZsdXNoT25lKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9zdWNjZXNzJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5nYXVnZSgnZGVsaXZlcmVkJywgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCdkZWJ1ZycsICdEZWxpdmVyZWQnLCBjdHguZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGN0eF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBlcnJfMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ2Vycm9yJywgJ0ZhaWxlZCB0byBkZWxpdmVyJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWxpdmVyeV9mYWlsdXJlJywgY3R4LCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdkZWxpdmVyeV9mYWlsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycl8yO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZW5xdWV1UmV0cnkgPSBmdW5jdGlvbiAoZXJyLCBjdHgpIHtcbiAgICAgICAgdmFyIHJldHJpYWJsZSA9ICEoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uKSB8fCBlcnIucmV0cnk7XG4gICAgICAgIGlmICghcmV0cmlhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUucHVzaFdpdGhCYWNrb2ZmKGN0eCk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHgsIGVycl8zLCBhY2NlcHRlZDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLnF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmF0dGVtcHRzID0gdGhpcy5xdWV1ZS5nZXRBdHRlbXB0cyhjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxpdmVyKGN0eCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2ZsdXNoJywgY3R4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdGVkID0gdGhpcy5lbnF1ZXVSZXRyeShlcnJfMywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2V0RmFpbGVkRGVsaXZlcnkoeyByZWFzb246IGVycl8zIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmx1c2gnLCBjdHgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBbXV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtjdHhdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuaXNSZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMucGx1Z2lucy5ldmVyeSgocCkgPT4gcC5pc0xvYWRlZCgpKVxuICAgICAgICAvLyBzaG91bGQgd2Ugd2FpdCBmb3IgZXZlcnkgcGx1Z2luIHRvIGxvYWQ/XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmF2YWlsYWJsZUV4dGVuc2lvbnMgPSBmdW5jdGlvbiAoZGVueUxpc3QpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgLy8gT25seSBmaWx0ZXIgb3V0IGRlc3RpbmF0aW9uIHBsdWdpbnMgb3IgdGhlIFNlZ21lbnQuaW8gcGx1Z2luXG4gICAgICAgICAgICBpZiAocC50eXBlICE9PSAnZGVzdGluYXRpb24nICYmIHAubmFtZSAhPT0gJ1NlZ21lbnQuaW8nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAoX2EgPSBwLmFsdGVybmF0aXZlTmFtZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlbnlMaXN0W25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWx0ZXJuYXRpdmVOYW1lTWF0Y2ggPSBkZW55TGlzdFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEV4cGxpY2l0IGludGVncmF0aW9uIG9wdGlvbiB0YWtlcyBwcmVjZWRlbmNlLCBgQWxsOiBmYWxzZWAgZG9lcyBub3QgYXBwbHkgdG8gU2VnbWVudC5pb1xuICAgICAgICAgICAgcmV0dXJuICgoX2MgPSAoX2IgPSBkZW55TGlzdFtwLm5hbWVdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBhbHRlcm5hdGl2ZU5hbWVNYXRjaCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogKHAubmFtZSA9PT0gJ1NlZ21lbnQuaW8nID8gdHJ1ZSA6IGRlbnlMaXN0LkFsbCkgIT09IGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfYSA9IGdyb3VwQnkoYXZhaWxhYmxlLCAndHlwZScpLCBfYiA9IF9hLmJlZm9yZSwgYmVmb3JlID0gX2IgPT09IHZvaWQgMCA/IFtdIDogX2IsIF9jID0gX2EuZW5yaWNobWVudCwgZW5yaWNobWVudCA9IF9jID09PSB2b2lkIDAgPyBbXSA6IF9jLCBfZCA9IF9hLmRlc3RpbmF0aW9uLCBkZXN0aW5hdGlvbiA9IF9kID09PSB2b2lkIDAgPyBbXSA6IF9kLCBfZSA9IF9hLmFmdGVyLCBhZnRlciA9IF9lID09PSB2b2lkIDAgPyBbXSA6IF9lO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVmb3JlOiBiZWZvcmUsXG4gICAgICAgICAgICBlbnJpY2htZW50OiBlbnJpY2htZW50LFxuICAgICAgICAgICAgZGVzdGluYXRpb25zOiBkZXN0aW5hdGlvbixcbiAgICAgICAgICAgIGFmdGVyOiBhZnRlcixcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5mbHVzaE9uZSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9jLCBiZWZvcmUsIGVucmljaG1lbnQsIF9pLCBiZWZvcmVfMSwgYmVmb3JlV2FyZSwgdGVtcCwgX2QsIGVucmljaG1lbnRfMSwgZW5yaWNobWVudFdhcmUsIHRlbXAsIF9lLCBkZXN0aW5hdGlvbnMsIGFmdGVyLCBhZnRlckNhbGxzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2YubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IHJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmF0dGVtcHRzID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVsaXZlcnlfcmV0cnknLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzLmF2YWlsYWJsZUV4dGVuc2lvbnMoKF9hID0gY3R4LmV2ZW50LmludGVncmF0aW9ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pLCBiZWZvcmUgPSBfYy5iZWZvcmUsIGVucmljaG1lbnQgPSBfYy5lbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBiZWZvcmVfMSA9IGJlZm9yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBiZWZvcmVfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVdhcmUgPSBiZWZvcmVfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBlbnN1cmUoY3R4LCBiZWZvcmVXYXJlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBfZi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcCBpbnN0YW5jZW9mIENvcmVDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGVtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZV9lbnJpY2hlZCcsIGN0eCwgYmVmb3JlV2FyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSAwLCBlbnJpY2htZW50XzEgPSBlbnJpY2htZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2YubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfZCA8IGVucmljaG1lbnRfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVucmljaG1lbnRXYXJlID0gZW5yaWNobWVudF8xW19kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF0dGVtcHQoY3R4LCBlbnJpY2htZW50V2FyZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgaW5zdGFuY2VvZiBDb3JlQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZW5yaWNoZWQnLCBjdHgsIGVucmljaG1lbnRXYXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gNztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZSA9IHRoaXMuYXZhaWxhYmxlRXh0ZW5zaW9ucygoX2IgPSBjdHguZXZlbnQuaW50ZWdyYXRpb25zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSksIGRlc3RpbmF0aW9ucyA9IF9lLmRlc3RpbmF0aW9ucywgYWZ0ZXIgPSBfZS5hZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0ZW1wdHMgPSBkZXN0aW5hdGlvbnMubWFwKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0KGN0eCwgZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChhdHRlbXB0cykudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdGF0cy5pbmNyZW1lbnQoJ21lc3NhZ2VfZGVsaXZlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZGVsaXZlcmVkJywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyQ2FsbHMgPSBhZnRlci5tYXAoZnVuY3Rpb24gKGFmdGVyKSB7IHJldHVybiBhdHRlbXB0KGN0eCwgYWZ0ZXIpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGFmdGVyQ2FsbHMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlRXZlbnRRdWV1ZTtcbn0oRW1pdHRlcikpO1xuZXhwb3J0IHsgQ29yZUV2ZW50UXVldWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/stats/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreStats: () => (/* binding */ CoreStats),\n/* harmony export */   NullStats: () => (/* binding */ NullStats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar compactMetricType = function (type) {\n    var enums = {\n        gauge: 'g',\n        counter: 'c',\n    };\n    return enums[type];\n};\nvar CoreStats = /** @class */ (function () {\n    function CoreStats() {\n        this.metrics = [];\n    }\n    CoreStats.prototype.increment = function (metric, by, tags) {\n        if (by === void 0) { by = 1; }\n        this.metrics.push({\n            metric: metric,\n            value: by,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'counter',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.gauge = function (metric, value, tags) {\n        this.metrics.push({\n            metric: metric,\n            value: value,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'gauge',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.flush = function () {\n        var formatted = this.metrics.map(function (m) { return ((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, m), { tags: m.tags.join(',') })); });\n        // ie doesn't like console.table\n        if (console.table) {\n            console.table(formatted);\n        }\n        else {\n            console.log(formatted);\n        }\n        this.metrics = [];\n    };\n    /**\n     * compact keys for smaller payload\n     */\n    CoreStats.prototype.serialize = function () {\n        return this.metrics.map(function (m) {\n            return {\n                m: m.metric,\n                v: m.value,\n                t: m.tags,\n                k: compactMetricType(m.type),\n                e: m.timestamp,\n            };\n        });\n    };\n    return CoreStats;\n}());\n\nvar NullStats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(NullStats, _super);\n    function NullStats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullStats.prototype.gauge = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.increment = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.flush = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.serialize = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n        return [];\n    };\n    return NullStats;\n}(CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0RBQXdELFFBQVEsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLFFBQVEsd0JBQXdCLEtBQUs7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanM/ZDE3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiwgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgY29tcGFjdE1ldHJpY1R5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBlbnVtcyA9IHtcbiAgICAgICAgZ2F1Z2U6ICdnJyxcbiAgICAgICAgY291bnRlcjogJ2MnLFxuICAgIH07XG4gICAgcmV0dXJuIGVudW1zW3R5cGVdO1xufTtcbnZhciBDb3JlU3RhdHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29yZVN0YXRzKCkge1xuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAobWV0cmljLCBieSwgdGFncykge1xuICAgICAgICBpZiAoYnkgPT09IHZvaWQgMCkgeyBieSA9IDE7IH1cbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogYnksXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdjb3VudGVyJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb3JlU3RhdHMucHJvdG90eXBlLmdhdWdlID0gZnVuY3Rpb24gKG1ldHJpYywgdmFsdWUsIHRhZ3MpIHtcbiAgICAgICAgdGhpcy5tZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgbWV0cmljOiBtZXRyaWMsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB0YWdzOiB0YWdzICE9PSBudWxsICYmIHRhZ3MgIT09IHZvaWQgMCA/IHRhZ3MgOiBbXSxcbiAgICAgICAgICAgIHR5cGU6ICdnYXVnZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMubWV0cmljcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbSksIHsgdGFnczogbS50YWdzLmpvaW4oJywnKSB9KSk7IH0pO1xuICAgICAgICAvLyBpZSBkb2Vzbid0IGxpa2UgY29uc29sZS50YWJsZVxuICAgICAgICBpZiAoY29uc29sZS50YWJsZSkge1xuICAgICAgICAgICAgY29uc29sZS50YWJsZShmb3JtYXR0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZm9ybWF0dGVkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGNvbXBhY3Qga2V5cyBmb3Igc21hbGxlciBwYXlsb2FkXG4gICAgICovXG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5zZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldHJpY3MubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG06IG0ubWV0cmljLFxuICAgICAgICAgICAgICAgIHY6IG0udmFsdWUsXG4gICAgICAgICAgICAgICAgdDogbS50YWdzLFxuICAgICAgICAgICAgICAgIGs6IGNvbXBhY3RNZXRyaWNUeXBlKG0udHlwZSksXG4gICAgICAgICAgICAgICAgZTogbS50aW1lc3RhbXAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlU3RhdHM7XG59KCkpO1xuZXhwb3J0IHsgQ29yZVN0YXRzIH07XG52YXIgTnVsbFN0YXRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOdWxsU3RhdHMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTnVsbFN0YXRzKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIE51bGxTdGF0cy5wcm90b3R5cGUuZ2F1Z2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5pbmNyZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBOdWxsU3RhdHMucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBfYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9O1xuICAgIHJldHVybiBOdWxsU3RhdHM7XG59KENvcmVTdGF0cykpO1xuZXhwb3J0IHsgTnVsbFN0YXRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/task/task-group.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTaskGroup: () => (/* binding */ createTaskGroup)\n/* harmony export */ });\n/* harmony import */ var _utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-thenable */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\");\n\nvar createTaskGroup = function () {\n    var taskCompletionPromise;\n    var resolvePromise;\n    var count = 0;\n    return {\n        done: function () { return taskCompletionPromise; },\n        run: function (op) {\n            var returnValue = op();\n            if ((0,_utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__.isThenable)(returnValue)) {\n                if (++count === 1) {\n                    taskCompletionPromise = new Promise(function (res) { return (resolvePromise = res); });\n                }\n                returnValue.finally(function () { return --count === 0 && resolvePromise(); });\n            }\n            return returnValue;\n        },\n    };\n};\n//# sourceMappingURL=task-group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdGFzay90YXNrLWdyb3VwLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBQzNDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQVU7QUFDMUI7QUFDQSx5RUFBeUUsZ0NBQWdDO0FBQ3pHO0FBQ0Esa0RBQWtELDJDQUEyQztBQUM3RjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3Rhc2svdGFzay1ncm91cC5qcz9lNmFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVGhlbmFibGUgfSBmcm9tICcuLi91dGlscy9pcy10aGVuYWJsZSc7XG5leHBvcnQgdmFyIGNyZWF0ZVRhc2tHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGFza0NvbXBsZXRpb25Qcm9taXNlO1xuICAgIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvbmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRhc2tDb21wbGV0aW9uUHJvbWlzZTsgfSxcbiAgICAgICAgcnVuOiBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IG9wKCk7XG4gICAgICAgICAgICBpZiAoaXNUaGVuYWJsZShyZXR1cm5WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKytjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrQ29tcGxldGlvblByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7IHJldHVybiAocmVzb2x2ZVByb21pc2UgPSByZXMpOyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiAtLWNvdW50ID09PSAwICYmIHJlc29sdmVQcm9taXNlKCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFzay1ncm91cC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindAll: () => (/* binding */ bindAll)\n/* harmony export */ });\nfunction bindAll(obj) {\n    var proto = obj.constructor.prototype;\n    for (var _i = 0, _a = Object.getOwnPropertyNames(proto); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key !== 'constructor') {\n            var desc = Object.getOwnPropertyDescriptor(obj.constructor.prototype, key);\n            if (!!desc && typeof desc.value === 'function') {\n                obj[key] = obj[key].bind(obj);\n            }\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=bind-all.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvYmluZC1hbGwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQSw2REFBNkQsZ0JBQWdCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9iaW5kLWFsbC5qcz9mYTk0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBiaW5kQWxsKG9iaikge1xuICAgIHZhciBwcm90byA9IG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcbiAgICAgICAgaWYgKGtleSAhPT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGtleSk7XG4gICAgICAgICAgICBpZiAoISFkZXNjICYmIHR5cGVvZiBkZXNjLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb2JqW2tleV0gPSBvYmpba2V5XS5iaW5kKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmQtYWxsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupBy: () => (/* binding */ groupBy)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nfunction groupBy(collection, grouper) {\n    var results = {};\n    collection.forEach(function (item) {\n        var _a;\n        var key = undefined;\n        if (typeof grouper === 'string') {\n            var suggestedKey = item[grouper];\n            key =\n                typeof suggestedKey !== 'string'\n                    ? JSON.stringify(suggestedKey)\n                    : suggestedKey;\n        }\n        else if (grouper instanceof Function) {\n            key = grouper(item);\n        }\n        if (key === undefined) {\n            return;\n        }\n        results[key] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], ((_a = results[key]) !== null && _a !== void 0 ? _a : []), true), [item], false);\n    });\n    return results;\n}\n//# sourceMappingURL=group-by.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvZ3JvdXAtYnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDL0I7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFhLENBQUMsb0RBQWE7QUFDbEQsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dyb3VwLWJ5LmpzPzNjNDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnkoY29sbGVjdGlvbiwgZ3JvdXBlcikge1xuICAgIHZhciByZXN1bHRzID0ge307XG4gICAgY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHR5cGVvZiBncm91cGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdmFyIHN1Z2dlc3RlZEtleSA9IGl0ZW1bZ3JvdXBlcl07XG4gICAgICAgICAgICBrZXkgPVxuICAgICAgICAgICAgICAgIHR5cGVvZiBzdWdnZXN0ZWRLZXkgIT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoc3VnZ2VzdGVkS2V5KVxuICAgICAgICAgICAgICAgICAgICA6IHN1Z2dlc3RlZEtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChncm91cGVyIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGtleSA9IGdyb3VwZXIoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0c1trZXldID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCAoKF9hID0gcmVzdWx0c1trZXldKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSksIHRydWUpLCBbaXRlbV0sIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwLWJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvaXMtdGhlbmFibGUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9pcy10aGVuYWJsZS5qcz82YjZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIENoZWNrIGlmICB0aGVuYWJsZVxuICogIChpbnN0YW5jZW9mIFByb21pc2UgZG9lc24ndCByZXNwZWN0IHJlYWxtcylcbiAqL1xuZXhwb3J0IHZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgJ3RoZW4nIGluIHZhbHVlICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLXRoZW5hYmxlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/pick.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickBy: () => (/* binding */ pickBy)\n/* harmony export */ });\nvar pickBy = function (obj, fn) {\n    return Object.keys(obj)\n        .filter(function (k) { return fn(k, obj[k]); })\n        .reduce(function (acc, key) { return ((acc[key] = obj[key]), acc); }, {});\n};\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvcGljay5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBLCtCQUErQix1QkFBdUI7QUFDdEQsc0NBQXNDLHNDQUFzQyxJQUFJO0FBQ2hGO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9waWNrLmpzPzg3NmUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBwaWNrQnkgPSBmdW5jdGlvbiAob2JqLCBmbikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGZuKGssIG9ialtrXSk7IH0pXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiAoKGFjY1trZXldID0gb2JqW2tleV0pLCBhY2MpOyB9LCB7fSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGljay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertEventExists: () => (/* binding */ assertEventExists),\n/* harmony export */   assertEventType: () => (/* binding */ assertEventType),\n/* harmony export */   assertMessageId: () => (/* binding */ assertMessageId),\n/* harmony export */   assertTrackEventName: () => (/* binding */ assertTrackEventName),\n/* harmony export */   assertTrackEventProperties: () => (/* binding */ assertTrackEventProperties),\n/* harmony export */   assertTraits: () => (/* binding */ assertTraits),\n/* harmony export */   assertUserIdentity: () => (/* binding */ assertUserIdentity),\n/* harmony export */   validateEvent: () => (/* binding */ validateEvent)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\nvar stringError = 'is not a string';\nvar objError = 'is not an object';\nvar nilError = 'is nil';\n// user identity check could hypothetically could be used in the browser event factory, but not 100% sure -- so this is node only for now\nfunction assertUserIdentity(event) {\n    var USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId';\n    var getAnyUserId = function (event) { var _a, _b, _c; return (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId; };\n    var id = getAnyUserId(event);\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, nilError);\n    }\n    else if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, stringError);\n    }\n}\nfunction assertEventExists(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', nilError);\n    }\n    if (typeof event !== 'object') {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', objError);\n    }\n}\nfunction assertEventType(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.type)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.type', stringError);\n    }\n}\nfunction assertTrackEventName(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.event', stringError);\n    }\n}\nfunction assertTrackEventProperties(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.properties)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.properties', objError);\n    }\n}\nfunction assertTraits(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.traits)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.traits', objError);\n    }\n}\nfunction assertMessageId(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.messageId)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.messageId', stringError);\n    }\n}\nfunction validateEvent(event) {\n    assertEventExists(event);\n    assertEventType(event);\n    assertMessageId(event);\n    if (event.type === 'track') {\n        assertTrackEventName(event);\n        assertTrackEventProperties(event);\n    }\n    if (['group', 'identify'].includes(event.type)) {\n        assertTraits(event);\n    }\n}\n//# sourceMappingURL=assertions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMENBQTBDLGdCQUFnQjtBQUMxRDtBQUNBLFNBQVMsZ0RBQU07QUFDZixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQSxjQUFjLGtEQUFRO0FBQ3RCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGdEQUFNO0FBQ2Ysa0JBQWtCLG9EQUFlO0FBQ2pDO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzP2MxNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzUGxhaW5PYmplY3QsIGV4aXN0cyB9IGZyb20gJy4vaGVscGVycyc7XG52YXIgc3RyaW5nRXJyb3IgPSAnaXMgbm90IGEgc3RyaW5nJztcbnZhciBvYmpFcnJvciA9ICdpcyBub3QgYW4gb2JqZWN0JztcbnZhciBuaWxFcnJvciA9ICdpcyBuaWwnO1xuLy8gdXNlciBpZGVudGl0eSBjaGVjayBjb3VsZCBoeXBvdGhldGljYWxseSBjb3VsZCBiZSB1c2VkIGluIHRoZSBicm93c2VyIGV2ZW50IGZhY3RvcnksIGJ1dCBub3QgMTAwJSBzdXJlIC0tIHNvIHRoaXMgaXMgbm9kZSBvbmx5IGZvciBub3dcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRVc2VySWRlbnRpdHkoZXZlbnQpIHtcbiAgICB2YXIgVVNFUl9GSUVMRF9OQU1FID0gJy51c2VySWQvYW5vbnltb3VzSWQvcHJldmlvdXNJZC9ncm91cElkJztcbiAgICB2YXIgZ2V0QW55VXNlcklkID0gZnVuY3Rpb24gKGV2ZW50KSB7IHZhciBfYSwgX2IsIF9jOyByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gZXZlbnQudXNlcklkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBldmVudC5hbm9ueW1vdXNJZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZXZlbnQuZ3JvdXBJZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZXZlbnQucHJldmlvdXNJZDsgfTtcbiAgICB2YXIgaWQgPSBnZXRBbnlVc2VySWQoZXZlbnQpO1xuICAgIGlmICghZXhpc3RzKGlkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFVTRVJfRklFTERfTkFNRSwgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIGlmICghaXNTdHJpbmcoaWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoVVNFUl9GSUVMRF9OQU1FLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KSB7XG4gICAgaWYgKCFleGlzdHMoZXZlbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0V2ZW50JywgbmlsRXJyb3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGV2ZW50ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdFdmVudCcsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RXZlbnRUeXBlKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC50eXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHlwZScsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50LmV2ZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcuZXZlbnQnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRyYWNrRXZlbnRQcm9wZXJ0aWVzKGV2ZW50KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGV2ZW50LnByb3BlcnRpZXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJy5wcm9wZXJ0aWVzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUcmFpdHMoZXZlbnQpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZXZlbnQudHJhaXRzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcudHJhaXRzJywgb2JqRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRNZXNzYWdlSWQoZXZlbnQpIHtcbiAgICBpZiAoIWlzU3RyaW5nKGV2ZW50Lm1lc3NhZ2VJZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLm1lc3NhZ2VJZCcsIHN0cmluZ0Vycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFdmVudChldmVudCkge1xuICAgIGFzc2VydEV2ZW50RXhpc3RzKGV2ZW50KTtcbiAgICBhc3NlcnRFdmVudFR5cGUoZXZlbnQpO1xuICAgIGFzc2VydE1lc3NhZ2VJZChldmVudCk7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0cmFjaycpIHtcbiAgICAgICAgYXNzZXJ0VHJhY2tFdmVudE5hbWUoZXZlbnQpO1xuICAgICAgICBhc3NlcnRUcmFja0V2ZW50UHJvcGVydGllcyhldmVudCk7XG4gICAgfVxuICAgIGlmIChbJ2dyb3VwJywgJ2lkZW50aWZ5J10uaW5jbHVkZXMoZXZlbnQudHlwZSkpIHtcbiAgICAgICAgYXNzZXJ0VHJhaXRzKGV2ZW50KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/errors.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\n\nvar ValidationError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(ValidationError, _super);\n    function ValidationError(field, message) {\n        var _this = _super.call(this, \"\".concat(field, \" \").concat(message)) || this;\n        _this.field = field;\n        return _this;\n    }\n    return ValidationError;\n}(Error));\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUMwQjtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vZXJyb3JzLmpzPzk0NWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgVmFsaWRhdGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWYWxpZGF0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKGZpZWxkLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiXCIuY29uY2F0KGZpZWxkLCBcIiBcIikuY29uY2F0KG1lc3NhZ2UpKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBWYWxpZGF0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   isString: () => (/* binding */ isString)\n/* harmony export */ });\nfunction isString(obj) {\n    return typeof obj === 'string';\n}\nfunction isNumber(obj) {\n    return typeof obj === 'number';\n}\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\nfunction exists(val) {\n    return val !== undefined && val !== null;\n}\nfunction isPlainObject(obj) {\n    return (Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object');\n}\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS92YWxpZGF0aW9uL2hlbHBlcnMuanM/NmYyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4aXN0cyh2YWwpIHtcbiAgICByZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKSA9PT0gJ29iamVjdCcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred)\n/* harmony export */ });\n/**\n * Return a promise that can be externally resolved\n */\nvar createDeferred = function () {\n    var resolve;\n    var reject;\n    var settled = false;\n    var promise = new Promise(function (_resolve, _reject) {\n        resolve = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _resolve.apply(void 0, args);\n        };\n        reject = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _reject.apply(void 0, args);\n        };\n    });\n    return {\n        resolve: resolve,\n        reject: reject,\n        promise: promise,\n        isSettled: function () { return settled; },\n    };\n};\n//# sourceMappingURL=create-deferred.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vY3JlYXRlLWRlZmVycmVkL2NyZWF0ZS1kZWZlcnJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9jcmVhdGUtZGVmZXJyZWQvY3JlYXRlLWRlZmVycmVkLmpzPzhhNDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm4gYSBwcm9taXNlIHRoYXQgY2FuIGJlIGV4dGVybmFsbHkgcmVzb2x2ZWRcbiAqL1xuZXhwb3J0IHZhciBjcmVhdGVEZWZlcnJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzb2x2ZTtcbiAgICB2YXIgcmVqZWN0O1xuICAgIHZhciBzZXR0bGVkID0gZmFsc2U7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoX3Jlc29sdmUsIF9yZWplY3QpIHtcbiAgICAgICAgcmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgX3Jlc29sdmUuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0dGxlZCA9IHRydWU7XG4gICAgICAgICAgICBfcmVqZWN0LmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0OiByZWplY3QsXG4gICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgIGlzU2V0dGxlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0dGxlZDsgfSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1kZWZlcnJlZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Emitter: () => (/* binding */ Emitter)\n/* harmony export */ });\n/**\n * Event Emitter that takes the expected contract as a generic\n * @example\n * ```ts\n *  type Contract = {\n *    delivery_success: [DeliverySuccessResponse, Metrics],\n *    delivery_failure: [DeliveryError]\n * }\n *  new Emitter<Contract>()\n *  .on('delivery_success', (res, metrics) => ...)\n *  .on('delivery_failure', (err) => ...)\n * ```\n */\nvar Emitter = /** @class */ (function () {\n    function Emitter(options) {\n        var _a;\n        this.callbacks = {};\n        this.warned = false;\n        this.maxListeners = (_a = options === null || options === void 0 ? void 0 : options.maxListeners) !== null && _a !== void 0 ? _a : 10;\n    }\n    Emitter.prototype.warnIfPossibleMemoryLeak = function (event) {\n        if (this.warned) {\n            return;\n        }\n        if (this.maxListeners &&\n            this.callbacks[event].length > this.maxListeners) {\n            console.warn(\"Event Emitter: Possible memory leak detected; \".concat(String(event), \" has exceeded \").concat(this.maxListeners, \" listeners.\"));\n            this.warned = true;\n        }\n    };\n    Emitter.prototype.on = function (event, callback) {\n        if (!this.callbacks[event]) {\n            this.callbacks[event] = [callback];\n        }\n        else {\n            this.callbacks[event].push(callback);\n            this.warnIfPossibleMemoryLeak(event);\n        }\n        return this;\n    };\n    Emitter.prototype.once = function (event, callback) {\n        var _this = this;\n        var on = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.off(event, on);\n            callback.apply(_this, args);\n        };\n        this.on(event, on);\n        return this;\n    };\n    Emitter.prototype.off = function (event, callback) {\n        var _a;\n        var fns = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        var without = fns.filter(function (fn) { return fn !== callback; });\n        this.callbacks[event] = without;\n        return this;\n    };\n    Emitter.prototype.emit = function (event) {\n        var _this = this;\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var callbacks = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        callbacks.forEach(function (callback) {\n            callback.apply(_this, args);\n        });\n        return this;\n    };\n    return Emitter;\n}());\n\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vZW1pdHRlci9lbWl0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQseUJBQXlCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDa0I7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9lbWl0dGVyL2VtaXR0ZXIuanM/OTEzZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEV2ZW50IEVtaXR0ZXIgdGhhdCB0YWtlcyB0aGUgZXhwZWN0ZWQgY29udHJhY3QgYXMgYSBnZW5lcmljXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqICB0eXBlIENvbnRyYWN0ID0ge1xuICogICAgZGVsaXZlcnlfc3VjY2VzczogW0RlbGl2ZXJ5U3VjY2Vzc1Jlc3BvbnNlLCBNZXRyaWNzXSxcbiAqICAgIGRlbGl2ZXJ5X2ZhaWx1cmU6IFtEZWxpdmVyeUVycm9yXVxuICogfVxuICogIG5ldyBFbWl0dGVyPENvbnRyYWN0PigpXG4gKiAgLm9uKCdkZWxpdmVyeV9zdWNjZXNzJywgKHJlcywgbWV0cmljcykgPT4gLi4uKVxuICogIC5vbignZGVsaXZlcnlfZmFpbHVyZScsIChlcnIpID0+IC4uLilcbiAqIGBgYFxuICovXG52YXIgRW1pdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbWl0dGVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLndhcm5lZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1heExpc3RlbmVycyA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tYXhMaXN0ZW5lcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEwO1xuICAgIH1cbiAgICBFbWl0dGVyLnByb3RvdHlwZS53YXJuSWZQb3NzaWJsZU1lbW9yeUxlYWsgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMud2FybmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4TGlzdGVuZXJzICYmXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ubGVuZ3RoID4gdGhpcy5tYXhMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkV2ZW50IEVtaXR0ZXI6IFBvc3NpYmxlIG1lbW9yeSBsZWFrIGRldGVjdGVkOyBcIi5jb25jYXQoU3RyaW5nKGV2ZW50KSwgXCIgaGFzIGV4Y2VlZGVkIFwiKS5jb25jYXQodGhpcy5tYXhMaXN0ZW5lcnMsIFwiIGxpc3RlbmVycy5cIikpO1xuICAgICAgICAgICAgdGhpcy53YXJuZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbGxiYWNrc1tldmVudF0pIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XSA9IFtjYWxsYmFja107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLndhcm5JZlBvc3NpYmxlTWVtb3J5TGVhayhldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5vZmYoZXZlbnQsIG9uKTtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KF90aGlzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbihldmVudCwgb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgZm5zID0gKF9hID0gdGhpcy5jYWxsYmFja3NbZXZlbnRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgdmFyIHdpdGhvdXQgPSBmbnMuZmlsdGVyKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4gIT09IGNhbGxiYWNrOyB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdID0gd2l0aG91dDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IChfYSA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gRW1pdHRlcjtcbn0oKSk7XG5leHBvcnQgeyBFbWl0dGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* binding */ Analytics)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./settings */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../generated/version */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../plugins/segmentio */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js\");\n/* harmony import */ var _event_factory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event-factory */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js\");\n/* harmony import */ var _dispatch_emit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dispatch-emit */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js\");\n/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./emitter */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./context */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n/* harmony import */ var _event_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./event-queue */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js\");\n/* harmony import */ var _lib_http_client__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/http-client */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\");\n\n\n\n\n\n\n\n\n\n\nclass Analytics extends _emitter__WEBPACK_IMPORTED_MODULE_5__.NodeEmitter {\n    _eventFactory;\n    _isClosed = false;\n    _pendingEvents = 0;\n    _closeAndFlushDefaultTimeout;\n    _publisher;\n    _isFlushing = false;\n    _queue;\n    ready;\n    constructor(settings) {\n        super();\n        (0,_settings__WEBPACK_IMPORTED_MODULE_0__.validateSettings)(settings);\n        this._eventFactory = new _event_factory__WEBPACK_IMPORTED_MODULE_3__.NodeEventFactory();\n        this._queue = new _event_queue__WEBPACK_IMPORTED_MODULE_7__.NodeEventQueue();\n        const flushInterval = settings.flushInterval ?? 10000;\n        this._closeAndFlushDefaultTimeout = flushInterval * 1.25; // add arbitrary multiplier in case an event is in a plugin.\n        const { plugin, publisher } = (0,_plugins_segmentio__WEBPACK_IMPORTED_MODULE_2__.createConfiguredNodePlugin)({\n            writeKey: settings.writeKey,\n            host: settings.host,\n            path: settings.path,\n            maxRetries: settings.maxRetries ?? 3,\n            flushAt: settings.flushAt ?? settings.maxEventsInBatch ?? 15,\n            httpRequestTimeout: settings.httpRequestTimeout,\n            disable: settings.disable,\n            flushInterval,\n            httpClient: typeof settings.httpClient === 'function'\n                ? new _lib_http_client__WEBPACK_IMPORTED_MODULE_8__.FetchHTTPClient(settings.httpClient)\n                : settings.httpClient ?? new _lib_http_client__WEBPACK_IMPORTED_MODULE_8__.FetchHTTPClient(),\n            oauthSettings: settings.oauthSettings,\n        }, this);\n        this._publisher = publisher;\n        this.ready = this.register(plugin).then(() => undefined);\n        this.emit('initialize', settings);\n        (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_9__.bindAll)(this);\n    }\n    get VERSION() {\n        return _generated_version__WEBPACK_IMPORTED_MODULE_1__.version;\n    }\n    /**\n     * Call this method to stop collecting new events and flush all existing events.\n     * This method also waits for any event method-specific callbacks to be triggered,\n     * and any of their subsequent promises to be resolved/rejected.\n     */\n    closeAndFlush({ timeout = this._closeAndFlushDefaultTimeout, } = {}) {\n        return this.flush({ timeout, close: true });\n    }\n    /**\n     * Call this method to flush all existing events..\n     * This method also waits for any event method-specific callbacks to be triggered,\n     * and any of their subsequent promises to be resolved/rejected.\n     */\n    async flush({ timeout, close = false, } = {}) {\n        if (this._isFlushing) {\n            // if we're already flushing, then we don't need to do anything\n            console.warn('Overlapping flush calls detected. Please wait for the previous flush to finish before calling .flush again');\n            return;\n        }\n        else {\n            this._isFlushing = true;\n        }\n        if (close) {\n            this._isClosed = true;\n        }\n        this._publisher.flush(this._pendingEvents);\n        const promise = new Promise((resolve) => {\n            if (!this._pendingEvents) {\n                resolve();\n            }\n            else {\n                this.once('drained', () => {\n                    resolve();\n                });\n            }\n        }).finally(() => {\n            this._isFlushing = false;\n        });\n        return timeout ? (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_10__.pTimeout)(promise, timeout).catch(() => undefined) : promise;\n    }\n    _dispatch(segmentEvent, callback) {\n        if (this._isClosed) {\n            this.emit('call_after_close', segmentEvent);\n            return undefined;\n        }\n        this._pendingEvents++;\n        (0,_dispatch_emit__WEBPACK_IMPORTED_MODULE_4__.dispatchAndEmit)(segmentEvent, this._queue, this, callback)\n            .catch((ctx) => ctx)\n            .finally(() => {\n            this._pendingEvents--;\n            if (!this._pendingEvents) {\n                this.emit('drained');\n            }\n        });\n    }\n    /**\n     * Combines two unassociated user identities.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#alias\n     */\n    alias({ userId, previousId, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.alias(userId, previousId, {\n            context,\n            integrations,\n            timestamp,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Associates an identified user with a collective.\n     *  @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#group\n     */\n    group({ timestamp, groupId, userId, anonymousId, traits = {}, context, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.group(groupId, traits, {\n            context,\n            anonymousId,\n            userId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Includes a unique userId and (maybe anonymousId) and any optional traits you know about them.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#identify\n     */\n    identify({ userId, anonymousId, traits = {}, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.identify(userId, traits, {\n            context,\n            anonymousId,\n            userId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * The page method lets you record page views on your website, along with optional extra information about the page being viewed.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#page\n     */\n    page({ userId, anonymousId, category, name, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.page(category ?? null, name ?? null, properties, { context, anonymousId, userId, timestamp, integrations, messageId });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Records screen views on your app, along with optional extra information\n     * about the screen viewed by the user.\n     *\n     * TODO: This is not documented on the segment docs ATM (for node).\n     */\n    screen({ userId, anonymousId, category, name, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.screen(category ?? null, name ?? null, properties, { context, anonymousId, userId, timestamp, integrations, messageId });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Records actions your users perform.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#track\n     */\n    track({ userId, anonymousId, event, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.track(event, properties, {\n            context,\n            userId,\n            anonymousId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Registers one or more plugins to augment Analytics functionality.\n     * @param plugins\n     */\n    register(...plugins) {\n        return this._queue.criticalTasks.run(async () => {\n            const ctx = _context__WEBPACK_IMPORTED_MODULE_6__.Context.system();\n            const registrations = plugins.map((xt) => this._queue.register(ctx, xt, this));\n            await Promise.all(registrations);\n            this.emit('register', plugins.map((el) => el.name));\n        });\n    }\n    /**\n     * Deregisters one or more plugins based on their names.\n     * @param pluginNames - The names of one or more plugins to deregister.\n     */\n    async deregister(...pluginNames) {\n        const ctx = _context__WEBPACK_IMPORTED_MODULE_6__.Context.system();\n        const deregistrations = pluginNames.map((pl) => {\n            const plugin = this._queue.plugins.find((p) => p.name === pl);\n            if (plugin) {\n                return this._queue.deregister(ctx, plugin, this);\n            }\n            else {\n                ctx.log('warn', `plugin ${pl} not found`);\n            }\n        });\n        await Promise.all(deregistrations);\n        this.emit('deregister', pluginNames);\n    }\n}\n//# sourceMappingURL=analytics-node.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2FuYWx5dGljcy1ub2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE0RDtBQUNkO0FBQ0M7QUFDbUI7QUFDZjtBQUNEO0FBQ1Y7QUFDSjtBQUNXO0FBQ007QUFDOUMsd0JBQXdCLGlEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBZ0I7QUFDeEIsaUNBQWlDLDREQUFnQjtBQUNqRCwwQkFBMEIsd0RBQWM7QUFDeEM7QUFDQSxrRUFBa0U7QUFDbEUsZ0JBQWdCLG9CQUFvQixFQUFFLDhFQUEwQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkRBQWU7QUFDckMsNkNBQTZDLDZEQUFlO0FBQzVEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQU87QUFDZjtBQUNBO0FBQ0EsZUFBZSx1REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0NBQStDLElBQUk7QUFDdkUsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEJBQTBCLElBQUk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1QseUJBQXlCLGtFQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0VBQWtFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBb0QscUNBQXFDO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0NBQWdDLGdEQUFnRDtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtGQUErRjtBQUMxRyxtR0FBbUcsa0VBQWtFO0FBQ3JLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtGQUErRjtBQUM1RyxxR0FBcUcsa0VBQWtFO0FBQ3ZLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0ZBQXNGO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkNBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2Q0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsSUFBSTtBQUM5QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2FuYWx5dGljcy1ub2RlLmpzP2YzY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmluZEFsbCwgcFRpbWVvdXQgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyB2YWxpZGF0ZVNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vZ2VuZXJhdGVkL3ZlcnNpb24nO1xuaW1wb3J0IHsgY3JlYXRlQ29uZmlndXJlZE5vZGVQbHVnaW4gfSBmcm9tICcuLi9wbHVnaW5zL3NlZ21lbnRpbyc7XG5pbXBvcnQgeyBOb2RlRXZlbnRGYWN0b3J5IH0gZnJvbSAnLi9ldmVudC1mYWN0b3J5JztcbmltcG9ydCB7IGRpc3BhdGNoQW5kRW1pdCB9IGZyb20gJy4vZGlzcGF0Y2gtZW1pdCc7XG5pbXBvcnQgeyBOb2RlRW1pdHRlciB9IGZyb20gJy4vZW1pdHRlcic7XG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0JztcbmltcG9ydCB7IE5vZGVFdmVudFF1ZXVlIH0gZnJvbSAnLi9ldmVudC1xdWV1ZSc7XG5pbXBvcnQgeyBGZXRjaEhUVFBDbGllbnQgfSBmcm9tICcuLi9saWIvaHR0cC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEFuYWx5dGljcyBleHRlbmRzIE5vZGVFbWl0dGVyIHtcbiAgICBfZXZlbnRGYWN0b3J5O1xuICAgIF9pc0Nsb3NlZCA9IGZhbHNlO1xuICAgIF9wZW5kaW5nRXZlbnRzID0gMDtcbiAgICBfY2xvc2VBbmRGbHVzaERlZmF1bHRUaW1lb3V0O1xuICAgIF9wdWJsaXNoZXI7XG4gICAgX2lzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICBfcXVldWU7XG4gICAgcmVhZHk7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdmFsaWRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuX2V2ZW50RmFjdG9yeSA9IG5ldyBOb2RlRXZlbnRGYWN0b3J5KCk7XG4gICAgICAgIHRoaXMuX3F1ZXVlID0gbmV3IE5vZGVFdmVudFF1ZXVlKCk7XG4gICAgICAgIGNvbnN0IGZsdXNoSW50ZXJ2YWwgPSBzZXR0aW5ncy5mbHVzaEludGVydmFsID8/IDEwMDAwO1xuICAgICAgICB0aGlzLl9jbG9zZUFuZEZsdXNoRGVmYXVsdFRpbWVvdXQgPSBmbHVzaEludGVydmFsICogMS4yNTsgLy8gYWRkIGFyYml0cmFyeSBtdWx0aXBsaWVyIGluIGNhc2UgYW4gZXZlbnQgaXMgaW4gYSBwbHVnaW4uXG4gICAgICAgIGNvbnN0IHsgcGx1Z2luLCBwdWJsaXNoZXIgfSA9IGNyZWF0ZUNvbmZpZ3VyZWROb2RlUGx1Z2luKHtcbiAgICAgICAgICAgIHdyaXRlS2V5OiBzZXR0aW5ncy53cml0ZUtleSxcbiAgICAgICAgICAgIGhvc3Q6IHNldHRpbmdzLmhvc3QsXG4gICAgICAgICAgICBwYXRoOiBzZXR0aW5ncy5wYXRoLFxuICAgICAgICAgICAgbWF4UmV0cmllczogc2V0dGluZ3MubWF4UmV0cmllcyA/PyAzLFxuICAgICAgICAgICAgZmx1c2hBdDogc2V0dGluZ3MuZmx1c2hBdCA/PyBzZXR0aW5ncy5tYXhFdmVudHNJbkJhdGNoID8/IDE1LFxuICAgICAgICAgICAgaHR0cFJlcXVlc3RUaW1lb3V0OiBzZXR0aW5ncy5odHRwUmVxdWVzdFRpbWVvdXQsXG4gICAgICAgICAgICBkaXNhYmxlOiBzZXR0aW5ncy5kaXNhYmxlLFxuICAgICAgICAgICAgZmx1c2hJbnRlcnZhbCxcbiAgICAgICAgICAgIGh0dHBDbGllbnQ6IHR5cGVvZiBzZXR0aW5ncy5odHRwQ2xpZW50ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyBuZXcgRmV0Y2hIVFRQQ2xpZW50KHNldHRpbmdzLmh0dHBDbGllbnQpXG4gICAgICAgICAgICAgICAgOiBzZXR0aW5ncy5odHRwQ2xpZW50ID8/IG5ldyBGZXRjaEhUVFBDbGllbnQoKSxcbiAgICAgICAgICAgIG9hdXRoU2V0dGluZ3M6IHNldHRpbmdzLm9hdXRoU2V0dGluZ3MsXG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB0aGlzLl9wdWJsaXNoZXIgPSBwdWJsaXNoZXI7XG4gICAgICAgIHRoaXMucmVhZHkgPSB0aGlzLnJlZ2lzdGVyKHBsdWdpbikudGhlbigoKSA9PiB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2luaXRpYWxpemUnLCBzZXR0aW5ncyk7XG4gICAgICAgIGJpbmRBbGwodGhpcyk7XG4gICAgfVxuICAgIGdldCBWRVJTSU9OKCkge1xuICAgICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBzdG9wIGNvbGxlY3RpbmcgbmV3IGV2ZW50cyBhbmQgZmx1c2ggYWxsIGV4aXN0aW5nIGV2ZW50cy5cbiAgICAgKiBUaGlzIG1ldGhvZCBhbHNvIHdhaXRzIGZvciBhbnkgZXZlbnQgbWV0aG9kLXNwZWNpZmljIGNhbGxiYWNrcyB0byBiZSB0cmlnZ2VyZWQsXG4gICAgICogYW5kIGFueSBvZiB0aGVpciBzdWJzZXF1ZW50IHByb21pc2VzIHRvIGJlIHJlc29sdmVkL3JlamVjdGVkLlxuICAgICAqL1xuICAgIGNsb3NlQW5kRmx1c2goeyB0aW1lb3V0ID0gdGhpcy5fY2xvc2VBbmRGbHVzaERlZmF1bHRUaW1lb3V0LCB9ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmx1c2goeyB0aW1lb3V0LCBjbG9zZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBmbHVzaCBhbGwgZXhpc3RpbmcgZXZlbnRzLi5cbiAgICAgKiBUaGlzIG1ldGhvZCBhbHNvIHdhaXRzIGZvciBhbnkgZXZlbnQgbWV0aG9kLXNwZWNpZmljIGNhbGxiYWNrcyB0byBiZSB0cmlnZ2VyZWQsXG4gICAgICogYW5kIGFueSBvZiB0aGVpciBzdWJzZXF1ZW50IHByb21pc2VzIHRvIGJlIHJlc29sdmVkL3JlamVjdGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGZsdXNoKHsgdGltZW91dCwgY2xvc2UgPSBmYWxzZSwgfSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0ZsdXNoaW5nKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSdyZSBhbHJlYWR5IGZsdXNoaW5nLCB0aGVuIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignT3ZlcmxhcHBpbmcgZmx1c2ggY2FsbHMgZGV0ZWN0ZWQuIFBsZWFzZSB3YWl0IGZvciB0aGUgcHJldmlvdXMgZmx1c2ggdG8gZmluaXNoIGJlZm9yZSBjYWxsaW5nIC5mbHVzaCBhZ2FpbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faXNGbHVzaGluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsb3NlKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHVibGlzaGVyLmZsdXNoKHRoaXMuX3BlbmRpbmdFdmVudHMpO1xuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcGVuZGluZ0V2ZW50cykge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub25jZSgnZHJhaW5lZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2lzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aW1lb3V0ID8gcFRpbWVvdXQocHJvbWlzZSwgdGltZW91dCkuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKSA6IHByb21pc2U7XG4gICAgfVxuICAgIF9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0Nsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjYWxsX2FmdGVyX2Nsb3NlJywgc2VnbWVudEV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGVuZGluZ0V2ZW50cysrO1xuICAgICAgICBkaXNwYXRjaEFuZEVtaXQoc2VnbWVudEV2ZW50LCB0aGlzLl9xdWV1ZSwgdGhpcywgY2FsbGJhY2spXG4gICAgICAgICAgICAuY2F0Y2goKGN0eCkgPT4gY3R4KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0V2ZW50cy0tO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wZW5kaW5nRXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkcmFpbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0d28gdW5hc3NvY2lhdGVkIHVzZXIgaWRlbnRpdGllcy5cbiAgICAgKiBAbGluayBodHRwczovL3NlZ21lbnQuY29tL2RvY3MvY29ubmVjdGlvbnMvc291cmNlcy9jYXRhbG9nL2xpYnJhcmllcy9zZXJ2ZXIvbm9kZS8jYWxpYXNcbiAgICAgKi9cbiAgICBhbGlhcyh7IHVzZXJJZCwgcHJldmlvdXNJZCwgY29udGV4dCwgdGltZXN0YW1wLCBpbnRlZ3JhdGlvbnMsIG1lc3NhZ2VJZCwgfSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudEV2ZW50ID0gdGhpcy5fZXZlbnRGYWN0b3J5LmFsaWFzKHVzZXJJZCwgcHJldmlvdXNJZCwge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3NvY2lhdGVzIGFuIGlkZW50aWZpZWQgdXNlciB3aXRoIGEgY29sbGVjdGl2ZS5cbiAgICAgKiAgQGxpbmsgaHR0cHM6Ly9zZWdtZW50LmNvbS9kb2NzL2Nvbm5lY3Rpb25zL3NvdXJjZXMvY2F0YWxvZy9saWJyYXJpZXMvc2VydmVyL25vZGUvI2dyb3VwXG4gICAgICovXG4gICAgZ3JvdXAoeyB0aW1lc3RhbXAsIGdyb3VwSWQsIHVzZXJJZCwgYW5vbnltb3VzSWQsIHRyYWl0cyA9IHt9LCBjb250ZXh0LCBpbnRlZ3JhdGlvbnMsIG1lc3NhZ2VJZCwgfSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudEV2ZW50ID0gdGhpcy5fZXZlbnRGYWN0b3J5Lmdyb3VwKGdyb3VwSWQsIHRyYWl0cywge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGFub255bW91c0lkLFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY2x1ZGVzIGEgdW5pcXVlIHVzZXJJZCBhbmQgKG1heWJlIGFub255bW91c0lkKSBhbmQgYW55IG9wdGlvbmFsIHRyYWl0cyB5b3Uga25vdyBhYm91dCB0aGVtLlxuICAgICAqIEBsaW5rIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9ub2RlLyNpZGVudGlmeVxuICAgICAqL1xuICAgIGlkZW50aWZ5KHsgdXNlcklkLCBhbm9ueW1vdXNJZCwgdHJhaXRzID0ge30sIGNvbnRleHQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS5pZGVudGlmeSh1c2VySWQsIHRyYWl0cywge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGFub255bW91c0lkLFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBwYWdlIG1ldGhvZCBsZXRzIHlvdSByZWNvcmQgcGFnZSB2aWV3cyBvbiB5b3VyIHdlYnNpdGUsIGFsb25nIHdpdGggb3B0aW9uYWwgZXh0cmEgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHBhZ2UgYmVpbmcgdmlld2VkLlxuICAgICAqIEBsaW5rIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9ub2RlLyNwYWdlXG4gICAgICovXG4gICAgcGFnZSh7IHVzZXJJZCwgYW5vbnltb3VzSWQsIGNhdGVnb3J5LCBuYW1lLCBwcm9wZXJ0aWVzLCBjb250ZXh0LCB0aW1lc3RhbXAsIGludGVncmF0aW9ucywgbWVzc2FnZUlkLCB9LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBzZWdtZW50RXZlbnQgPSB0aGlzLl9ldmVudEZhY3RvcnkucGFnZShjYXRlZ29yeSA/PyBudWxsLCBuYW1lID8/IG51bGwsIHByb3BlcnRpZXMsIHsgY29udGV4dCwgYW5vbnltb3VzSWQsIHVzZXJJZCwgdGltZXN0YW1wLCBpbnRlZ3JhdGlvbnMsIG1lc3NhZ2VJZCB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZHMgc2NyZWVuIHZpZXdzIG9uIHlvdXIgYXBwLCBhbG9uZyB3aXRoIG9wdGlvbmFsIGV4dHJhIGluZm9ybWF0aW9uXG4gICAgICogYWJvdXQgdGhlIHNjcmVlbiB2aWV3ZWQgYnkgdGhlIHVzZXIuXG4gICAgICpcbiAgICAgKiBUT0RPOiBUaGlzIGlzIG5vdCBkb2N1bWVudGVkIG9uIHRoZSBzZWdtZW50IGRvY3MgQVRNIChmb3Igbm9kZSkuXG4gICAgICovXG4gICAgc2NyZWVuKHsgdXNlcklkLCBhbm9ueW1vdXNJZCwgY2F0ZWdvcnksIG5hbWUsIHByb3BlcnRpZXMsIGNvbnRleHQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS5zY3JlZW4oY2F0ZWdvcnkgPz8gbnVsbCwgbmFtZSA/PyBudWxsLCBwcm9wZXJ0aWVzLCB7IGNvbnRleHQsIGFub255bW91c0lkLCB1c2VySWQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmRzIGFjdGlvbnMgeW91ciB1c2VycyBwZXJmb3JtLlxuICAgICAqIEBsaW5rIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9ub2RlLyN0cmFja1xuICAgICAqL1xuICAgIHRyYWNrKHsgdXNlcklkLCBhbm9ueW1vdXNJZCwgZXZlbnQsIHByb3BlcnRpZXMsIGNvbnRleHQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS50cmFjayhldmVudCwgcHJvcGVydGllcywge1xuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIGFub255bW91c0lkLFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBvbmUgb3IgbW9yZSBwbHVnaW5zIHRvIGF1Z21lbnQgQW5hbHl0aWNzIGZ1bmN0aW9uYWxpdHkuXG4gICAgICogQHBhcmFtIHBsdWdpbnNcbiAgICAgKi9cbiAgICByZWdpc3RlciguLi5wbHVnaW5zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5jcml0aWNhbFRhc2tzLnJ1bihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBDb250ZXh0LnN5c3RlbSgpO1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9ucyA9IHBsdWdpbnMubWFwKCh4dCkgPT4gdGhpcy5fcXVldWUucmVnaXN0ZXIoY3R4LCB4dCwgdGhpcykpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVnaXN0cmF0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlZ2lzdGVyJywgcGx1Z2lucy5tYXAoKGVsKSA9PiBlbC5uYW1lKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXJlZ2lzdGVycyBvbmUgb3IgbW9yZSBwbHVnaW5zIGJhc2VkIG9uIHRoZWlyIG5hbWVzLlxuICAgICAqIEBwYXJhbSBwbHVnaW5OYW1lcyAtIFRoZSBuYW1lcyBvZiBvbmUgb3IgbW9yZSBwbHVnaW5zIHRvIGRlcmVnaXN0ZXIuXG4gICAgICovXG4gICAgYXN5bmMgZGVyZWdpc3RlciguLi5wbHVnaW5OYW1lcykge1xuICAgICAgICBjb25zdCBjdHggPSBDb250ZXh0LnN5c3RlbSgpO1xuICAgICAgICBjb25zdCBkZXJlZ2lzdHJhdGlvbnMgPSBwbHVnaW5OYW1lcy5tYXAoKHBsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLl9xdWV1ZS5wbHVnaW5zLmZpbmQoKHApID0+IHAubmFtZSA9PT0gcGwpO1xuICAgICAgICAgICAgaWYgKHBsdWdpbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5kZXJlZ2lzdGVyKGN0eCwgcGx1Z2luLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCBgcGx1Z2luICR7cGx9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZGVyZWdpc3RyYXRpb25zKTtcbiAgICAgICAgdGhpcy5lbWl0KCdkZXJlZ2lzdGVyJywgcGx1Z2luTmFtZXMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuYWx5dGljcy1ub2RlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/context.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n// create a derived class since we may want to add node specific things to Context later\n\n// While this is not a type, it is a definition\nclass Context extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.CoreContext {\n    static system() {\n        return new this({ type: 'track', event: 'system' });\n    }\n}\n//# sourceMappingURL=context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNzRDtBQUN0RDtBQUNPLHNCQUFzQixnRUFBVztBQUN4QztBQUNBLDBCQUEwQixnQ0FBZ0M7QUFDMUQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2NvbnRleHQuanM/YzlmYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjcmVhdGUgYSBkZXJpdmVkIGNsYXNzIHNpbmNlIHdlIG1heSB3YW50IHRvIGFkZCBub2RlIHNwZWNpZmljIHRoaW5ncyB0byBDb250ZXh0IGxhdGVyXG5pbXBvcnQgeyBDb3JlQ29udGV4dCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbi8vIFdoaWxlIHRoaXMgaXMgbm90IGEgdHlwZSwgaXQgaXMgYSBkZWZpbml0aW9uXG5leHBvcnQgY2xhc3MgQ29udGV4dCBleHRlbmRzIENvcmVDb250ZXh0IHtcbiAgICBzdGF0aWMgc3lzdGVtKCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoeyB0eXBlOiAndHJhY2snLCBldmVudDogJ3N5c3RlbScgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGV4dC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatchAndEmit: () => (/* binding */ dispatchAndEmit)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./context */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n\n\nconst normalizeDispatchCb = (cb) => (ctx) => {\n    const failedDelivery = ctx.failedDelivery();\n    return failedDelivery ? cb(failedDelivery.reason, ctx) : cb(undefined, ctx);\n};\n/* Dispatch function, but swallow promise rejections and use event emitter instead */\nconst dispatchAndEmit = async (event, queue, emitter, callback) => {\n    try {\n        const context = new _context__WEBPACK_IMPORTED_MODULE_0__.Context(event);\n        const ctx = await (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.dispatch)(context, queue, emitter, {\n            ...(callback ? { callback: normalizeDispatchCb(callback) } : {}),\n        });\n        const failedDelivery = ctx.failedDelivery();\n        if (failedDelivery) {\n            emitter.emit('error', {\n                code: 'delivery_failure',\n                reason: failedDelivery.reason,\n                ctx: ctx,\n            });\n        }\n        else {\n            emitter.emit(event.type, ctx);\n        }\n    }\n    catch (err) {\n        emitter.emit('error', {\n            code: 'unknown',\n            reason: err,\n        });\n    }\n};\n//# sourceMappingURL=dispatch-emit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2Rpc3BhdGNoLWVtaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ2Y7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSw0QkFBNEIsNkNBQU87QUFDbkMsMEJBQTBCLGlFQUFRO0FBQ2xDLDZCQUE2QiwwQ0FBMEMsSUFBSTtBQUMzRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZGlzcGF0Y2gtZW1pdC5qcz9kYTg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRpc3BhdGNoIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4vY29udGV4dCc7XG5jb25zdCBub3JtYWxpemVEaXNwYXRjaENiID0gKGNiKSA9PiAoY3R4KSA9PiB7XG4gICAgY29uc3QgZmFpbGVkRGVsaXZlcnkgPSBjdHguZmFpbGVkRGVsaXZlcnkoKTtcbiAgICByZXR1cm4gZmFpbGVkRGVsaXZlcnkgPyBjYihmYWlsZWREZWxpdmVyeS5yZWFzb24sIGN0eCkgOiBjYih1bmRlZmluZWQsIGN0eCk7XG59O1xuLyogRGlzcGF0Y2ggZnVuY3Rpb24sIGJ1dCBzd2FsbG93IHByb21pc2UgcmVqZWN0aW9ucyBhbmQgdXNlIGV2ZW50IGVtaXR0ZXIgaW5zdGVhZCAqL1xuZXhwb3J0IGNvbnN0IGRpc3BhdGNoQW5kRW1pdCA9IGFzeW5jIChldmVudCwgcXVldWUsIGVtaXR0ZXIsIGNhbGxiYWNrKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IG5ldyBDb250ZXh0KGV2ZW50KTtcbiAgICAgICAgY29uc3QgY3R4ID0gYXdhaXQgZGlzcGF0Y2goY29udGV4dCwgcXVldWUsIGVtaXR0ZXIsIHtcbiAgICAgICAgICAgIC4uLihjYWxsYmFjayA/IHsgY2FsbGJhY2s6IG5vcm1hbGl6ZURpc3BhdGNoQ2IoY2FsbGJhY2spIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmYWlsZWREZWxpdmVyeSA9IGN0eC5mYWlsZWREZWxpdmVyeSgpO1xuICAgICAgICBpZiAoZmFpbGVkRGVsaXZlcnkpIHtcbiAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgY29kZTogJ2RlbGl2ZXJ5X2ZhaWx1cmUnLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogZmFpbGVkRGVsaXZlcnkucmVhc29uLFxuICAgICAgICAgICAgICAgIGN0eDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoZXZlbnQudHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICBjb2RlOiAndW5rbm93bicsXG4gICAgICAgICAgICByZWFzb246IGVycixcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3BhdGNoLWVtaXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/emitter.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEmitter: () => (/* binding */ NodeEmitter)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n\nclass NodeEmitter extends _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__.Emitter {\n}\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2VtaXR0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFDcEQsMEJBQTBCLHFFQUFPO0FBQ3hDO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZW1pdHRlci5qcz81YjA5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5leHBvcnQgY2xhc3MgTm9kZUVtaXR0ZXIgZXh0ZW5kcyBFbWl0dGVyIHtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtaXR0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEventFactory: () => (/* binding */ NodeEventFactory)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n/* harmony import */ var _lib_get_message_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/get-message-id */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js\");\n\n\nclass NodeEventFactory extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.CoreEventFactory {\n    constructor() {\n        super({\n            createMessageId: _lib_get_message_id__WEBPACK_IMPORTED_MODULE_0__.createMessageId,\n            onFinishedEvent: (event) => {\n                (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.assertUserIdentity)(event);\n            },\n        });\n    }\n}\n//# sourceMappingURL=event-factory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LWZhY3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRTtBQUN2QjtBQUNqRCwrQkFBK0IscUVBQWdCO0FBQ3REO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQSxnQkFBZ0IsMkVBQWtCO0FBQ2xDLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LWZhY3RvcnkuanM/OGQxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnRVc2VySWRlbnRpdHksIENvcmVFdmVudEZhY3RvcnkgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyBjcmVhdGVNZXNzYWdlSWQgfSBmcm9tICcuLi9saWIvZ2V0LW1lc3NhZ2UtaWQnO1xuZXhwb3J0IGNsYXNzIE5vZGVFdmVudEZhY3RvcnkgZXh0ZW5kcyBDb3JlRXZlbnRGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgY3JlYXRlTWVzc2FnZUlkLFxuICAgICAgICAgICAgb25GaW5pc2hlZEV2ZW50OiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NlcnRVc2VySWRlbnRpdHkoZXZlbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnQtZmFjdG9yeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEventQueue: () => (/* binding */ NodeEventQueue)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\");\n\nclass NodePriorityQueue extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.PriorityQueue {\n    constructor() {\n        super(1, []);\n    }\n    // do not use an internal \"seen\" map\n    getAttempts(ctx) {\n        return ctx.attempts ?? 0;\n    }\n    updateAttempts(ctx) {\n        ctx.attempts = this.getAttempts(ctx) + 1;\n        return this.getAttempts(ctx);\n    }\n}\nclass NodeEventQueue extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.CoreEventQueue {\n    constructor() {\n        super(new NodePriorityQueue());\n    }\n}\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LXF1ZXVlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RTtBQUN4RSxnQ0FBZ0Msa0VBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNkJBQTZCLG1FQUFjO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZXZlbnQtcXVldWUuanM/YzcyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb3JlRXZlbnRRdWV1ZSwgUHJpb3JpdHlRdWV1ZSB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmNsYXNzIE5vZGVQcmlvcml0eVF1ZXVlIGV4dGVuZHMgUHJpb3JpdHlRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKDEsIFtdKTtcbiAgICB9XG4gICAgLy8gZG8gbm90IHVzZSBhbiBpbnRlcm5hbCBcInNlZW5cIiBtYXBcbiAgICBnZXRBdHRlbXB0cyhjdHgpIHtcbiAgICAgICAgcmV0dXJuIGN0eC5hdHRlbXB0cyA/PyAwO1xuICAgIH1cbiAgICB1cGRhdGVBdHRlbXB0cyhjdHgpIHtcbiAgICAgICAgY3R4LmF0dGVtcHRzID0gdGhpcy5nZXRBdHRlbXB0cyhjdHgpICsgMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0ZW1wdHMoY3R4KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTm9kZUV2ZW50UXVldWUgZXh0ZW5kcyBDb3JlRXZlbnRRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKG5ldyBOb2RlUHJpb3JpdHlRdWV1ZSgpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudC1xdWV1ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/settings.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateSettings: () => (/* binding */ validateSettings)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n\nconst validateSettings = (settings) => {\n    if (!settings.writeKey) {\n        throw new _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.ValidationError('writeKey', 'writeKey is missing.');\n    }\n};\n//# sourceMappingURL=settings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL3NldHRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBEO0FBQ25EO0FBQ1A7QUFDQSxrQkFBa0Isb0VBQWU7QUFDakM7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL3NldHRpbmdzLmpzPzA4NTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlU2V0dGluZ3MgPSAoc2V0dGluZ3MpID0+IHtcbiAgICBpZiAoIXNldHRpbmdzLndyaXRlS2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ3dyaXRlS2V5JywgJ3dyaXRlS2V5IGlzIG1pc3NpbmcuJyk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldHRpbmdzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/generated/version.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n// This file is generated.\nconst version = '2.1.3';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vZ2VuZXJhdGVkL3ZlcnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2dlbmVyYXRlZC92ZXJzaW9uLmpzPzVkOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGdlbmVyYXRlZC5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uID0gJzIuMS4zJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.common.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/index.common.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* reexport safe */ _app_analytics_node__WEBPACK_IMPORTED_MODULE_0__.Analytics),\n/* harmony export */   Context: () => (/* reexport safe */ _app_context__WEBPACK_IMPORTED_MODULE_1__.Context),\n/* harmony export */   FetchHTTPClient: () => (/* reexport safe */ _lib_http_client__WEBPACK_IMPORTED_MODULE_2__.FetchHTTPClient)\n/* harmony export */ });\n/* harmony import */ var _app_analytics_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app/analytics-node */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js\");\n/* harmony import */ var _app_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app/context */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n/* harmony import */ var _lib_http_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/http-client */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\");\n\n\n\n//# sourceMappingURL=index.common.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vaW5kZXguY29tbW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRDtBQUNUO0FBQ2E7QUFDckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9pbmRleC5jb21tb24uanM/ODA1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBBbmFseXRpY3MgfSBmcm9tICcuL2FwcC9hbmFseXRpY3Mtbm9kZSc7XG5leHBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi9hcHAvY29udGV4dCc7XG5leHBvcnQgeyBGZXRjaEhUVFBDbGllbnQsIH0gZnJvbSAnLi9saWIvaHR0cC1jbGllbnQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY29tbW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.common.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.Analytics),\n/* harmony export */   Context: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.Context),\n/* harmony export */   FetchHTTPClient: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.FetchHTTPClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _index_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.common */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.common.js\");\n\n// export Analytics as both a named export and a default export (for backwards-compat. reasons)\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_index_common__WEBPACK_IMPORTED_MODULE_0__.Analytics);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFDL0I7QUFDMkM7QUFDM0MsaUVBQWUsb0RBQVMsRUFBQztBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2luZGV4LmpzPzU2MDciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9pbmRleC5jb21tb24nO1xuLy8gZXhwb3J0IEFuYWx5dGljcyBhcyBib3RoIGEgbmFtZWQgZXhwb3J0IGFuZCBhIGRlZmF1bHQgZXhwb3J0IChmb3IgYmFja3dhcmRzLWNvbXBhdC4gcmVhc29ucylcbmltcG9ydCB7IEFuYWx5dGljcyB9IGZyb20gJy4vaW5kZXguY29tbW9uJztcbmV4cG9ydCBkZWZhdWx0IEFuYWx5dGljcztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/abort.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortController: () => (/* binding */ AbortController),\n/* harmony export */   AbortSignal: () => (/* binding */ AbortSignal),\n/* harmony export */   abortSignalAfterTimeout: () => (/* binding */ abortSignalAfterTimeout)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\");\n/**\n * use non-native event emitter for the benefit of non-node runtimes like CF workers.\n */\n\n\n/**\n * adapted from: https://www.npmjs.com/package/node-abort-controller\n */\nclass AbortSignal {\n    onabort = null;\n    aborted = false;\n    eventEmitter = new _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    toString() {\n        return '[object AbortSignal]';\n    }\n    get [Symbol.toStringTag]() {\n        return 'AbortSignal';\n    }\n    removeEventListener(...args) {\n        this.eventEmitter.off(...args);\n    }\n    addEventListener(...args) {\n        this.eventEmitter.on(...args);\n    }\n    dispatchEvent(type) {\n        const event = { type, target: this };\n        const handlerName = `on${type}`;\n        if (typeof this[handlerName] === 'function') {\n            ;\n            this[handlerName](event);\n        }\n        this.eventEmitter.emit(type, event);\n    }\n}\n/**\n * This polyfill is only neccessary to support versions of node < 14.17.\n * Can be removed once node 14 support is dropped.\n */\nclass AbortController {\n    signal = new AbortSignal();\n    abort() {\n        if (this.signal.aborted)\n            return;\n        this.signal.aborted = true;\n        this.signal.dispatchEvent('abort');\n    }\n    toString() {\n        return '[object AbortController]';\n    }\n    get [Symbol.toStringTag]() {\n        return 'AbortController';\n    }\n}\n/**\n * @param timeoutMs - Set a request timeout, after which the request is cancelled.\n */\nconst abortSignalAfterTimeout = (timeoutMs) => {\n    if ((0,_env__WEBPACK_IMPORTED_MODULE_0__.detectRuntime)() === 'cloudflare-worker') {\n        return []; // TODO: this is broken in cloudflare workers, otherwise results in \"A hanging Promise was canceled...\" error.\n    }\n    const ac = new (globalThis.AbortController || AbortController)();\n    const timeoutId = setTimeout(() => {\n        ac.abort();\n    }, timeoutMs);\n    // Allow Node.js processes to exit early if only the timeout is running\n    timeoutId?.unref?.();\n    return [ac.signal, timeoutId];\n};\n//# sourceMappingURL=abort.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Fib3J0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzJEO0FBQ3JCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHVCQUF1QixxRUFBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixpQ0FBaUMsS0FBSztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxRQUFRLG1EQUFhO0FBQ3JCLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Fib3J0LmpzPzEwNWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiB1c2Ugbm9uLW5hdGl2ZSBldmVudCBlbWl0dGVyIGZvciB0aGUgYmVuZWZpdCBvZiBub24tbm9kZSBydW50aW1lcyBsaWtlIENGIHdvcmtlcnMuXG4gKi9cbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5pbXBvcnQgeyBkZXRlY3RSdW50aW1lIH0gZnJvbSAnLi9lbnYnO1xuLyoqXG4gKiBhZGFwdGVkIGZyb206IGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL25vZGUtYWJvcnQtY29udHJvbGxlclxuICovXG5leHBvcnQgY2xhc3MgQWJvcnRTaWduYWwge1xuICAgIG9uYWJvcnQgPSBudWxsO1xuICAgIGFib3J0ZWQgPSBmYWxzZTtcbiAgICBldmVudEVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gJ1tvYmplY3QgQWJvcnRTaWduYWxdJztcbiAgICB9XG4gICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgICAgICByZXR1cm4gJ0Fib3J0U2lnbmFsJztcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lciguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZiguLi5hcmdzKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lciguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9uKC4uLmFyZ3MpO1xuICAgIH1cbiAgICBkaXNwYXRjaEV2ZW50KHR5cGUpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB7IHR5cGUsIHRhcmdldDogdGhpcyB9O1xuICAgICAgICBjb25zdCBoYW5kbGVyTmFtZSA9IGBvbiR7dHlwZX1gO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXNbaGFuZGxlck5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICB0aGlzW2hhbmRsZXJOYW1lXShldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCBldmVudCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIHBvbHlmaWxsIGlzIG9ubHkgbmVjY2Vzc2FyeSB0byBzdXBwb3J0IHZlcnNpb25zIG9mIG5vZGUgPCAxNC4xNy5cbiAqIENhbiBiZSByZW1vdmVkIG9uY2Ugbm9kZSAxNCBzdXBwb3J0IGlzIGRyb3BwZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBYm9ydENvbnRyb2xsZXIge1xuICAgIHNpZ25hbCA9IG5ldyBBYm9ydFNpZ25hbCgpO1xuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy5zaWduYWwuYWJvcnRlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zaWduYWwuYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQoJ2Fib3J0Jyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gJ1tvYmplY3QgQWJvcnRDb250cm9sbGVyXSc7XG4gICAgfVxuICAgIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICAgICAgcmV0dXJuICdBYm9ydENvbnRyb2xsZXInO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHRpbWVvdXRNcyAtIFNldCBhIHJlcXVlc3QgdGltZW91dCwgYWZ0ZXIgd2hpY2ggdGhlIHJlcXVlc3QgaXMgY2FuY2VsbGVkLlxuICovXG5leHBvcnQgY29uc3QgYWJvcnRTaWduYWxBZnRlclRpbWVvdXQgPSAodGltZW91dE1zKSA9PiB7XG4gICAgaWYgKGRldGVjdFJ1bnRpbWUoKSA9PT0gJ2Nsb3VkZmxhcmUtd29ya2VyJykge1xuICAgICAgICByZXR1cm4gW107IC8vIFRPRE86IHRoaXMgaXMgYnJva2VuIGluIGNsb3VkZmxhcmUgd29ya2Vycywgb3RoZXJ3aXNlIHJlc3VsdHMgaW4gXCJBIGhhbmdpbmcgUHJvbWlzZSB3YXMgY2FuY2VsZWQuLi5cIiBlcnJvci5cbiAgICB9XG4gICAgY29uc3QgYWMgPSBuZXcgKGdsb2JhbFRoaXMuQWJvcnRDb250cm9sbGVyIHx8IEFib3J0Q29udHJvbGxlcikoKTtcbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYWMuYWJvcnQoKTtcbiAgICB9LCB0aW1lb3V0TXMpO1xuICAgIC8vIEFsbG93IE5vZGUuanMgcHJvY2Vzc2VzIHRvIGV4aXQgZWFybHkgaWYgb25seSB0aGUgdGltZW91dCBpcyBydW5uaW5nXG4gICAgdGltZW91dElkPy51bnJlZj8uKCk7XG4gICAgcmV0dXJuIFthYy5zaWduYWwsIHRpbWVvdXRJZF07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWJvcnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tryCreateFormattedUrl: () => (/* binding */ tryCreateFormattedUrl)\n/* harmony export */ });\nconst stripTrailingSlash = (str) => str.replace(/\\/$/, '');\n/**\n *\n * @param host e.g. \"http://foo.com\"\n * @param path e.g. \"/bar\"\n * @returns \"e.g.\" \"http://foo.com/bar\"\n */\nconst tryCreateFormattedUrl = (host, path) => {\n    return stripTrailingSlash(new URL(path || '', host).href);\n};\n//# sourceMappingURL=create-url.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2NyZWF0ZS11cmwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9saWIvY3JlYXRlLXVybC5qcz8wMWIxIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHN0cmlwVHJhaWxpbmdTbGFzaCA9IChzdHIpID0+IHN0ci5yZXBsYWNlKC9cXC8kLywgJycpO1xuLyoqXG4gKlxuICogQHBhcmFtIGhvc3QgZS5nLiBcImh0dHA6Ly9mb28uY29tXCJcbiAqIEBwYXJhbSBwYXRoIGUuZy4gXCIvYmFyXCJcbiAqIEByZXR1cm5zIFwiZS5nLlwiIFwiaHR0cDovL2Zvby5jb20vYmFyXCJcbiAqL1xuZXhwb3J0IGNvbnN0IHRyeUNyZWF0ZUZvcm1hdHRlZFVybCA9IChob3N0LCBwYXRoKSA9PiB7XG4gICAgcmV0dXJuIHN0cmlwVHJhaWxpbmdTbGFzaChuZXcgVVJMKHBhdGggfHwgJycsIGhvc3QpLmhyZWYpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS11cmwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js":
/*!******************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/env.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   detectRuntime: () => (/* binding */ detectRuntime)\n/* harmony export */ });\nconst detectRuntime = () => {\n    if (typeof process === 'object' &&\n        process &&\n        typeof process.env === 'object' &&\n        process.env &&\n        typeof process.version === 'string') {\n        return 'node';\n    }\n    if (typeof window === 'object') {\n        return 'browser';\n    }\n    // @ts-ignore\n    if (typeof WebSocketPair !== 'undefined') {\n        return 'cloudflare-worker';\n    }\n    // @ts-ignore\n    if (typeof EdgeRuntime === 'string') {\n        return 'vercel-edge';\n    }\n    if (\n    // @ts-ignore\n    typeof WorkerGlobalScope !== 'undefined' &&\n        // @ts-ignore\n        typeof importScripts === 'function') {\n        return 'web-worker';\n    }\n    return 'unknown';\n};\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2xpYi9lbnYuanM/ZDY3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZGV0ZWN0UnVudGltZSA9ICgpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHByb2Nlc3MgJiZcbiAgICAgICAgdHlwZW9mIHByb2Nlc3MuZW52ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBwcm9jZXNzLmVudiAmJlxuICAgICAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gJ25vZGUnO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuICdicm93c2VyJztcbiAgICB9XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmICh0eXBlb2YgV2ViU29ja2V0UGFpciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuICdjbG91ZGZsYXJlLXdvcmtlcic7XG4gICAgfVxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodHlwZW9mIEVkZ2VSdW50aW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gJ3ZlcmNlbC1lZGdlJztcbiAgICB9XG4gICAgaWYgKFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdHlwZW9mIGltcG9ydFNjcmlwdHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuICd3ZWItd29ya2VyJztcbiAgICB9XG4gICAgcmV0dXJuICd1bmtub3duJztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\nconst fetch = async (...args) => {\n    if (globalThis.fetch) {\n        return globalThis.fetch(...args);\n    }\n    // This guard causes is important, as it causes dead-code elimination to be enabled inside this block.\n    // @ts-ignore\n    else if (typeof EdgeRuntime !== 'string') {\n        return (await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! node-fetch */ \"(rsc)/./node_modules/node-fetch/lib/index.mjs\"))).default(...args);\n    }\n    else {\n        throw new Error('Invariant: an edge runtime that does not support fetch should not exist');\n    }\n};\n//# sourceMappingURL=fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1SkFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2ZldGNoLmpzPzgyM2IiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGZldGNoID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5mZXRjaCkge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5mZXRjaCguLi5hcmdzKTtcbiAgICB9XG4gICAgLy8gVGhpcyBndWFyZCBjYXVzZXMgaXMgaW1wb3J0YW50LCBhcyBpdCBjYXVzZXMgZGVhZC1jb2RlIGVsaW1pbmF0aW9uIHRvIGJlIGVuYWJsZWQgaW5zaWRlIHRoaXMgYmxvY2suXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGVsc2UgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCBpbXBvcnQoJ25vZGUtZmV0Y2gnKSkuZGVmYXVsdCguLi5hcmdzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YXJpYW50OiBhbiBlZGdlIHJ1bnRpbWUgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IGZldGNoIHNob3VsZCBub3QgZXhpc3QnKTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMessageId: () => (/* binding */ createMessageId)\n/* harmony export */ });\n/* harmony import */ var _uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./uuid */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n\n/**\n * get a unique messageId with a very low chance of collisions\n * using @lukeed/uuid/secure uses the node crypto module, which is the fastest\n * @example \"node-next-1668208232027-743be593-7789-4b74-8078-cbcc8894c586\"\n */\nconst createMessageId = () => {\n    return `node-next-${Date.now()}-${(0,_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)()}`;\n};\n//# sourceMappingURL=get-message-id.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2dldC1tZXNzYWdlLWlkLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHdCQUF3QixXQUFXLEdBQUcsMkNBQUksR0FBRztBQUM3QztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2dldC1tZXNzYWdlLWlkLmpzPzVjNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXVpZCB9IGZyb20gJy4vdXVpZCc7XG4vKipcbiAqIGdldCBhIHVuaXF1ZSBtZXNzYWdlSWQgd2l0aCBhIHZlcnkgbG93IGNoYW5jZSBvZiBjb2xsaXNpb25zXG4gKiB1c2luZyBAbHVrZWVkL3V1aWQvc2VjdXJlIHVzZXMgdGhlIG5vZGUgY3J5cHRvIG1vZHVsZSwgd2hpY2ggaXMgdGhlIGZhc3Rlc3RcbiAqIEBleGFtcGxlIFwibm9kZS1uZXh0LTE2NjgyMDgyMzIwMjctNzQzYmU1OTMtNzc4OS00Yjc0LTgwNzgtY2JjYzg4OTRjNTg2XCJcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZU1lc3NhZ2VJZCA9ICgpID0+IHtcbiAgICByZXR1cm4gYG5vZGUtbmV4dC0ke0RhdGUubm93KCl9LSR7dXVpZCgpfWA7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LW1lc3NhZ2UtaWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchHTTPClient: () => (/* binding */ FetchHTTPClient)\n/* harmony export */ });\n/* harmony import */ var _abort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./abort */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js\");\n/* harmony import */ var _fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js\");\n\n\n/**\n * Default HTTP client implementation using fetch\n */\nclass FetchHTTPClient {\n    _fetch;\n    constructor(fetchFn) {\n        this._fetch = fetchFn ?? _fetch__WEBPACK_IMPORTED_MODULE_1__.fetch;\n    }\n    async makeRequest(options) {\n        const [signal, timeoutId] = (0,_abort__WEBPACK_IMPORTED_MODULE_0__.abortSignalAfterTimeout)(options.httpRequestTimeout);\n        const requestInit = {\n            url: options.url,\n            method: options.method,\n            headers: options.headers,\n            body: options.body,\n            signal: signal,\n        };\n        return this._fetch(options.url, requestInit).finally(() => clearTimeout(timeoutId));\n    }\n}\n//# sourceMappingURL=http-client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2h0dHAtY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrRDtBQUNGO0FBQ2hEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGlDQUFpQyx5Q0FBWTtBQUM3QztBQUNBO0FBQ0Esb0NBQW9DLCtEQUF1QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2h0dHAtY2xpZW50LmpzPzRkMDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWJvcnRTaWduYWxBZnRlclRpbWVvdXQgfSBmcm9tICcuL2Fib3J0JztcbmltcG9ydCB7IGZldGNoIGFzIGRlZmF1bHRGZXRjaCB9IGZyb20gJy4vZmV0Y2gnO1xuLyoqXG4gKiBEZWZhdWx0IEhUVFAgY2xpZW50IGltcGxlbWVudGF0aW9uIHVzaW5nIGZldGNoXG4gKi9cbmV4cG9ydCBjbGFzcyBGZXRjaEhUVFBDbGllbnQge1xuICAgIF9mZXRjaDtcbiAgICBjb25zdHJ1Y3RvcihmZXRjaEZuKSB7XG4gICAgICAgIHRoaXMuX2ZldGNoID0gZmV0Y2hGbiA/PyBkZWZhdWx0RmV0Y2g7XG4gICAgfVxuICAgIGFzeW5jIG1ha2VSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgW3NpZ25hbCwgdGltZW91dElkXSA9IGFib3J0U2lnbmFsQWZ0ZXJUaW1lb3V0KG9wdGlvbnMuaHR0cFJlcXVlc3RUaW1lb3V0KTtcbiAgICAgICAgY29uc3QgcmVxdWVzdEluaXQgPSB7XG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBvcHRpb25zLm1ldGhvZCxcbiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IG9wdGlvbnMuYm9keSxcbiAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2gob3B0aW9ucy51cmwsIHJlcXVlc3RJbml0KS5maW5hbGx5KCgpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1odHRwLWNsaWVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TokenManager: () => (/* binding */ TokenManager)\n/* harmony export */ });\n/* harmony import */ var _uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./uuid */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n\n\n\n\nconst isAccessToken = (thing) => {\n    return Boolean(thing &&\n        typeof thing === 'object' &&\n        'access_token' in thing &&\n        'expires_in' in thing &&\n        typeof thing.access_token === 'string' &&\n        typeof thing.expires_in === 'number');\n};\nconst isValidCustomResponse = (response) => {\n    return typeof response.text === 'function';\n};\nfunction convertHeaders(headers) {\n    const lowercaseHeaders = {};\n    if (!headers)\n        return {};\n    if (isHeaders(headers)) {\n        for (const [name, value] of headers.entries()) {\n            lowercaseHeaders[name.toLowerCase()] = value;\n        }\n        return lowercaseHeaders;\n    }\n    for (const [name, value] of Object.entries(headers)) {\n        lowercaseHeaders[name.toLowerCase()] = value;\n    }\n    return lowercaseHeaders;\n}\nfunction isHeaders(thing) {\n    if (typeof thing === 'object' &&\n        thing !== null &&\n        'entries' in Object(thing) &&\n        typeof Object(thing).entries === 'function') {\n        return true;\n    }\n    return false;\n}\nclass TokenManager {\n    alg = 'RS256';\n    grantType = 'client_credentials';\n    clientAssertionType = 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer';\n    clientId;\n    clientKey;\n    keyId;\n    scope;\n    authServer;\n    httpClient;\n    maxRetries;\n    clockSkewInSeconds = 0;\n    accessToken;\n    tokenEmitter = new _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    retryCount;\n    pollerTimer;\n    constructor(props) {\n        this.keyId = props.keyId;\n        this.clientId = props.clientId;\n        this.clientKey = props.clientKey;\n        this.authServer = props.authServer ?? 'https://oauth2.segment.io';\n        this.scope = props.scope ?? 'tracking_api:write';\n        this.httpClient = props.httpClient;\n        this.maxRetries = props.maxRetries;\n        this.tokenEmitter.on('access_token', (event) => {\n            if ('token' in event) {\n                this.accessToken = event.token;\n            }\n        });\n        this.retryCount = 0;\n    }\n    stopPoller() {\n        clearTimeout(this.pollerTimer);\n    }\n    async pollerLoop() {\n        let timeUntilRefreshInMs = 25;\n        let response;\n        try {\n            response = await this.requestAccessToken();\n        }\n        catch (err) {\n            // Error without a status code - likely networking, retry\n            return this.handleTransientError({ error: err });\n        }\n        if (!isValidCustomResponse(response)) {\n            return this.handleInvalidCustomResponse();\n        }\n        const headers = convertHeaders(response.headers);\n        if (headers['date']) {\n            this.updateClockSkew(Date.parse(headers['date']));\n        }\n        // Handle status codes!\n        if (response.status === 200) {\n            try {\n                const body = await response.text();\n                const token = JSON.parse(body);\n                if (!isAccessToken(token)) {\n                    throw new Error('Response did not contain a valid access_token and expires_in');\n                }\n                // Success, we have a token!\n                token.expires_at = Math.round(Date.now() / 1000) + token.expires_in;\n                this.tokenEmitter.emit('access_token', { token });\n                // Reset our failure count\n                this.retryCount = 0;\n                // Refresh the token after half the expiry time passes\n                timeUntilRefreshInMs = (token.expires_in / 2) * 1000;\n                return this.queueNextPoll(timeUntilRefreshInMs);\n            }\n            catch (err) {\n                // Something went really wrong with the body, lets surface an error and try again?\n                return this.handleTransientError({ error: err, forceEmitError: true });\n            }\n        }\n        else if (response.status === 429) {\n            // Rate limited, wait for the reset time\n            return await this.handleRateLimited(response, headers, timeUntilRefreshInMs);\n        }\n        else if ([400, 401, 415].includes(response.status)) {\n            // Unrecoverable errors, stops the poller\n            return this.handleUnrecoverableErrors(response);\n        }\n        else {\n            return this.handleTransientError({\n                error: new Error(`[${response.status}] ${response.statusText}`),\n            });\n        }\n    }\n    handleTransientError({ error, forceEmitError, }) {\n        this.incrementRetries({ error, forceEmitError });\n        const timeUntilRefreshInMs = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.backoff)({\n            attempt: this.retryCount,\n            minTimeout: 25,\n            maxTimeout: 1000,\n        });\n        this.queueNextPoll(timeUntilRefreshInMs);\n    }\n    handleInvalidCustomResponse() {\n        this.tokenEmitter.emit('access_token', {\n            error: new Error('HTTPClient does not implement response.text method'),\n        });\n    }\n    async handleRateLimited(response, headers, timeUntilRefreshInMs) {\n        this.incrementRetries({\n            error: new Error(`[${response.status}] ${response.statusText}`),\n        });\n        if (headers['x-ratelimit-reset']) {\n            const rateLimitResetTimestamp = parseInt(headers['x-ratelimit-reset'], 10);\n            if (isFinite(rateLimitResetTimestamp)) {\n                timeUntilRefreshInMs =\n                    rateLimitResetTimestamp - Date.now() + this.clockSkewInSeconds * 1000;\n            }\n            else {\n                timeUntilRefreshInMs = 5 * 1000;\n            }\n            // We want subsequent calls to get_token to be able to interrupt our\n            //  Timeout when it's waiting for e.g. a long normal expiration, but\n            //  not when we're waiting for a rate limit reset. Sleep instead.\n            await (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.sleep)(timeUntilRefreshInMs);\n            timeUntilRefreshInMs = 0;\n        }\n        this.queueNextPoll(timeUntilRefreshInMs);\n    }\n    handleUnrecoverableErrors(response) {\n        this.retryCount = 0;\n        this.tokenEmitter.emit('access_token', {\n            error: new Error(`[${response.status}] ${response.statusText}`),\n        });\n        this.stopPoller();\n    }\n    updateClockSkew(dateInMs) {\n        this.clockSkewInSeconds = (Date.now() - dateInMs) / 1000;\n    }\n    incrementRetries({ error, forceEmitError, }) {\n        this.retryCount++;\n        if (forceEmitError || this.retryCount % this.maxRetries === 0) {\n            this.retryCount = 0;\n            this.tokenEmitter.emit('access_token', { error: error });\n        }\n    }\n    queueNextPoll(timeUntilRefreshInMs) {\n        this.pollerTimer = setTimeout(() => this.pollerLoop(), timeUntilRefreshInMs);\n        if (this.pollerTimer.unref) {\n            this.pollerTimer.unref();\n        }\n    }\n    /**\n     * Solely responsible for building the HTTP request and calling the token service.\n     */\n    async requestAccessToken() {\n        // Set issued at time to 5 seconds in the past to account for clock skew\n        const ISSUED_AT_BUFFER_IN_SECONDS = 5;\n        const MAX_EXPIRY_IN_SECONDS = 60;\n        // Final expiry time takes into account the issued at time, so need to subtract IAT buffer\n        const EXPIRY_IN_SECONDS = MAX_EXPIRY_IN_SECONDS - ISSUED_AT_BUFFER_IN_SECONDS;\n        const jti = (0,_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)();\n        const currentUTCInSeconds = Math.round(Date.now() / 1000) - this.clockSkewInSeconds;\n        const jwtBody = {\n            iss: this.clientId,\n            sub: this.clientId,\n            aud: this.authServer,\n            iat: currentUTCInSeconds - ISSUED_AT_BUFFER_IN_SECONDS,\n            exp: currentUTCInSeconds + EXPIRY_IN_SECONDS,\n            jti,\n        };\n        const key = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.importPKCS8)(this.clientKey, 'RS256');\n        const signedJwt = await new jose__WEBPACK_IMPORTED_MODULE_5__.SignJWT(jwtBody)\n            .setProtectedHeader({ alg: this.alg, kid: this.keyId, typ: 'JWT' })\n            .sign(key);\n        const requestBody = `grant_type=${this.grantType}&client_assertion_type=${this.clientAssertionType}&client_assertion=${signedJwt}&scope=${this.scope}`;\n        const accessTokenEndpoint = `${this.authServer}/token`;\n        const requestOptions = {\n            method: 'POST',\n            url: accessTokenEndpoint,\n            body: requestBody,\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            httpRequestTimeout: 10000,\n        };\n        return this.httpClient.makeRequest(requestOptions);\n    }\n    async getAccessToken() {\n        // Use the cached token if it is still valid, otherwise wait for a new token.\n        if (this.isValidToken(this.accessToken)) {\n            return this.accessToken;\n        }\n        // stop poller first in order to make sure that it's not sleeping if we need a token immediately\n        // Otherwise it could be hours before the expiration time passes normally\n        this.stopPoller();\n        // startPoller needs to be called somewhere, either lazily when a token is first requested, or at instantiation.\n        // Doing it lazily currently\n        this.pollerLoop().catch(() => { });\n        return new Promise((resolve, reject) => {\n            this.tokenEmitter.once('access_token', (event) => {\n                if ('token' in event) {\n                    resolve(event.token);\n                }\n                else {\n                    reject(event.error);\n                }\n            });\n        });\n    }\n    clearToken() {\n        this.accessToken = undefined;\n    }\n    isValidToken(token) {\n        return (typeof token !== 'undefined' &&\n            token !== null &&\n            token.expires_in < Date.now() / 1000);\n    }\n}\n//# sourceMappingURL=token-manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3Rva2VuLW1hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE4QjtBQUNjO0FBQ2E7QUFDRTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUVBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxZQUFZO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxPQUFPO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsa0NBQWtDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDN0UsYUFBYTtBQUNiO0FBQ0E7QUFDQSwyQkFBMkIsd0JBQXdCO0FBQ25ELGdDQUFnQyx1QkFBdUI7QUFDdkQscUNBQXFDLGdFQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4REFBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkNBQUk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGlEQUFXO0FBQ3JDLG9DQUFvQyx5Q0FBTztBQUMzQyxrQ0FBa0MsNENBQTRDO0FBQzlFO0FBQ0EsMENBQTBDLGVBQWUseUJBQXlCLHlCQUF5QixvQkFBb0IsVUFBVSxTQUFTLFdBQVc7QUFDN0osdUNBQXVDLGdCQUFnQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3Rva2VuLW1hbmFnZXIuanM/YzhiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dWlkIH0gZnJvbSAnLi91dWlkJztcbmltcG9ydCB7IFNpZ25KV1QsIGltcG9ydFBLQ1M4IH0gZnJvbSAnam9zZSc7XG5pbXBvcnQgeyBiYWNrb2ZmLCBzbGVlcCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5jb25zdCBpc0FjY2Vzc1Rva2VuID0gKHRoaW5nKSA9PiB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpbmcgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAnYWNjZXNzX3Rva2VuJyBpbiB0aGluZyAmJlxuICAgICAgICAnZXhwaXJlc19pbicgaW4gdGhpbmcgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nLmFjY2Vzc190b2tlbiA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIHRoaW5nLmV4cGlyZXNfaW4gPT09ICdudW1iZXInKTtcbn07XG5jb25zdCBpc1ZhbGlkQ3VzdG9tUmVzcG9uc2UgPSAocmVzcG9uc2UpID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIHJlc3BvbnNlLnRleHQgPT09ICdmdW5jdGlvbic7XG59O1xuZnVuY3Rpb24gY29udmVydEhlYWRlcnMoaGVhZGVycykge1xuICAgIGNvbnN0IGxvd2VyY2FzZUhlYWRlcnMgPSB7fTtcbiAgICBpZiAoIWhlYWRlcnMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBpZiAoaXNIZWFkZXJzKGhlYWRlcnMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBoZWFkZXJzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgbG93ZXJjYXNlSGVhZGVyc1tuYW1lLnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvd2VyY2FzZUhlYWRlcnM7XG4gICAgfVxuICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSkge1xuICAgICAgICBsb3dlcmNhc2VIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGxvd2VyY2FzZUhlYWRlcnM7XG59XG5mdW5jdGlvbiBpc0hlYWRlcnModGhpbmcpIHtcbiAgICBpZiAodHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0aGluZyAhPT0gbnVsbCAmJlxuICAgICAgICAnZW50cmllcycgaW4gT2JqZWN0KHRoaW5nKSAmJlxuICAgICAgICB0eXBlb2YgT2JqZWN0KHRoaW5nKS5lbnRyaWVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgY2xhc3MgVG9rZW5NYW5hZ2VyIHtcbiAgICBhbGcgPSAnUlMyNTYnO1xuICAgIGdyYW50VHlwZSA9ICdjbGllbnRfY3JlZGVudGlhbHMnO1xuICAgIGNsaWVudEFzc2VydGlvblR5cGUgPSAndXJuOmlldGY6cGFyYW1zOm9hdXRoOmNsaWVudC1hc3NlcnRpb24tdHlwZTpqd3QtYmVhcmVyJztcbiAgICBjbGllbnRJZDtcbiAgICBjbGllbnRLZXk7XG4gICAga2V5SWQ7XG4gICAgc2NvcGU7XG4gICAgYXV0aFNlcnZlcjtcbiAgICBodHRwQ2xpZW50O1xuICAgIG1heFJldHJpZXM7XG4gICAgY2xvY2tTa2V3SW5TZWNvbmRzID0gMDtcbiAgICBhY2Nlc3NUb2tlbjtcbiAgICB0b2tlbkVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIHJldHJ5Q291bnQ7XG4gICAgcG9sbGVyVGltZXI7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgdGhpcy5rZXlJZCA9IHByb3BzLmtleUlkO1xuICAgICAgICB0aGlzLmNsaWVudElkID0gcHJvcHMuY2xpZW50SWQ7XG4gICAgICAgIHRoaXMuY2xpZW50S2V5ID0gcHJvcHMuY2xpZW50S2V5O1xuICAgICAgICB0aGlzLmF1dGhTZXJ2ZXIgPSBwcm9wcy5hdXRoU2VydmVyID8/ICdodHRwczovL29hdXRoMi5zZWdtZW50LmlvJztcbiAgICAgICAgdGhpcy5zY29wZSA9IHByb3BzLnNjb3BlID8/ICd0cmFja2luZ19hcGk6d3JpdGUnO1xuICAgICAgICB0aGlzLmh0dHBDbGllbnQgPSBwcm9wcy5odHRwQ2xpZW50O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwcm9wcy5tYXhSZXRyaWVzO1xuICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5vbignYWNjZXNzX3Rva2VuJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoJ3Rva2VuJyBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBldmVudC50b2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmV0cnlDb3VudCA9IDA7XG4gICAgfVxuICAgIHN0b3BQb2xsZXIoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbGxlclRpbWVyKTtcbiAgICB9XG4gICAgYXN5bmMgcG9sbGVyTG9vcCgpIHtcbiAgICAgICAgbGV0IHRpbWVVbnRpbFJlZnJlc2hJbk1zID0gMjU7XG4gICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0QWNjZXNzVG9rZW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBFcnJvciB3aXRob3V0IGEgc3RhdHVzIGNvZGUgLSBsaWtlbHkgbmV0d29ya2luZywgcmV0cnlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVRyYW5zaWVudEVycm9yKHsgZXJyb3I6IGVyciB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzVmFsaWRDdXN0b21SZXNwb25zZShyZXNwb25zZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUludmFsaWRDdXN0b21SZXNwb25zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBjb252ZXJ0SGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgaWYgKGhlYWRlcnNbJ2RhdGUnXSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDbG9ja1NrZXcoRGF0ZS5wYXJzZShoZWFkZXJzWydkYXRlJ10pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIYW5kbGUgc3RhdHVzIGNvZGVzIVxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FjY2Vzc1Rva2VuKHRva2VuKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGRpZCBub3QgY29udGFpbiBhIHZhbGlkIGFjY2Vzc190b2tlbiBhbmQgZXhwaXJlc19pbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTdWNjZXNzLCB3ZSBoYXZlIGEgdG9rZW4hXG4gICAgICAgICAgICAgICAgdG9rZW4uZXhwaXJlc19hdCA9IE1hdGgucm91bmQoRGF0ZS5ub3coKSAvIDEwMDApICsgdG9rZW4uZXhwaXJlc19pbjtcbiAgICAgICAgICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5lbWl0KCdhY2Nlc3NfdG9rZW4nLCB7IHRva2VuIH0pO1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IG91ciBmYWlsdXJlIGNvdW50XG4gICAgICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIHRoZSB0b2tlbiBhZnRlciBoYWxmIHRoZSBleHBpcnkgdGltZSBwYXNzZXNcbiAgICAgICAgICAgICAgICB0aW1lVW50aWxSZWZyZXNoSW5NcyA9ICh0b2tlbi5leHBpcmVzX2luIC8gMikgKiAxMDAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlTmV4dFBvbGwodGltZVVudGlsUmVmcmVzaEluTXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHJlYWxseSB3cm9uZyB3aXRoIHRoZSBib2R5LCBsZXRzIHN1cmZhY2UgYW4gZXJyb3IgYW5kIHRyeSBhZ2Fpbj9cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVUcmFuc2llbnRFcnJvcih7IGVycm9yOiBlcnIsIGZvcmNlRW1pdEVycm9yOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgICAvLyBSYXRlIGxpbWl0ZWQsIHdhaXQgZm9yIHRoZSByZXNldCB0aW1lXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5oYW5kbGVSYXRlTGltaXRlZChyZXNwb25zZSwgaGVhZGVycywgdGltZVVudGlsUmVmcmVzaEluTXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFs0MDAsIDQwMSwgNDE1XS5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgICAgICAgICAvLyBVbnJlY292ZXJhYmxlIGVycm9ycywgc3RvcHMgdGhlIHBvbGxlclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlVW5yZWNvdmVyYWJsZUVycm9ycyhyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVUcmFuc2llbnRFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlVHJhbnNpZW50RXJyb3IoeyBlcnJvciwgZm9yY2VFbWl0RXJyb3IsIH0pIHtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRSZXRyaWVzKHsgZXJyb3IsIGZvcmNlRW1pdEVycm9yIH0pO1xuICAgICAgICBjb25zdCB0aW1lVW50aWxSZWZyZXNoSW5NcyA9IGJhY2tvZmYoe1xuICAgICAgICAgICAgYXR0ZW1wdDogdGhpcy5yZXRyeUNvdW50LFxuICAgICAgICAgICAgbWluVGltZW91dDogMjUsXG4gICAgICAgICAgICBtYXhUaW1lb3V0OiAxMDAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZU5leHRQb2xsKHRpbWVVbnRpbFJlZnJlc2hJbk1zKTtcbiAgICB9XG4gICAgaGFuZGxlSW52YWxpZEN1c3RvbVJlc3BvbnNlKCkge1xuICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5lbWl0KCdhY2Nlc3NfdG9rZW4nLCB7XG4gICAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKCdIVFRQQ2xpZW50IGRvZXMgbm90IGltcGxlbWVudCByZXNwb25zZS50ZXh0IG1ldGhvZCcpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmF0ZUxpbWl0ZWQocmVzcG9uc2UsIGhlYWRlcnMsIHRpbWVVbnRpbFJlZnJlc2hJbk1zKSB7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50UmV0cmllcyh7XG4gICAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKGBbJHtyZXNwb25zZS5zdGF0dXN9XSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaGVhZGVyc1sneC1yYXRlbGltaXQtcmVzZXQnXSkge1xuICAgICAgICAgICAgY29uc3QgcmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXAgPSBwYXJzZUludChoZWFkZXJzWyd4LXJhdGVsaW1pdC1yZXNldCddLCAxMCk7XG4gICAgICAgICAgICBpZiAoaXNGaW5pdGUocmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgICAgdGltZVVudGlsUmVmcmVzaEluTXMgPVxuICAgICAgICAgICAgICAgICAgICByYXRlTGltaXRSZXNldFRpbWVzdGFtcCAtIERhdGUubm93KCkgKyB0aGlzLmNsb2NrU2tld0luU2Vjb25kcyAqIDEwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aW1lVW50aWxSZWZyZXNoSW5NcyA9IDUgKiAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2Ugd2FudCBzdWJzZXF1ZW50IGNhbGxzIHRvIGdldF90b2tlbiB0byBiZSBhYmxlIHRvIGludGVycnVwdCBvdXJcbiAgICAgICAgICAgIC8vICBUaW1lb3V0IHdoZW4gaXQncyB3YWl0aW5nIGZvciBlLmcuIGEgbG9uZyBub3JtYWwgZXhwaXJhdGlvbiwgYnV0XG4gICAgICAgICAgICAvLyAgbm90IHdoZW4gd2UncmUgd2FpdGluZyBmb3IgYSByYXRlIGxpbWl0IHJlc2V0LiBTbGVlcCBpbnN0ZWFkLlxuICAgICAgICAgICAgYXdhaXQgc2xlZXAodGltZVVudGlsUmVmcmVzaEluTXMpO1xuICAgICAgICAgICAgdGltZVVudGlsUmVmcmVzaEluTXMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVldWVOZXh0UG9sbCh0aW1lVW50aWxSZWZyZXNoSW5Ncyk7XG4gICAgfVxuICAgIGhhbmRsZVVucmVjb3ZlcmFibGVFcnJvcnMocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy50b2tlbkVtaXR0ZXIuZW1pdCgnYWNjZXNzX3Rva2VuJywge1xuICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdG9wUG9sbGVyKCk7XG4gICAgfVxuICAgIHVwZGF0ZUNsb2NrU2tldyhkYXRlSW5Ncykge1xuICAgICAgICB0aGlzLmNsb2NrU2tld0luU2Vjb25kcyA9IChEYXRlLm5vdygpIC0gZGF0ZUluTXMpIC8gMTAwMDtcbiAgICB9XG4gICAgaW5jcmVtZW50UmV0cmllcyh7IGVycm9yLCBmb3JjZUVtaXRFcnJvciwgfSkge1xuICAgICAgICB0aGlzLnJldHJ5Q291bnQrKztcbiAgICAgICAgaWYgKGZvcmNlRW1pdEVycm9yIHx8IHRoaXMucmV0cnlDb3VudCAlIHRoaXMubWF4UmV0cmllcyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMudG9rZW5FbWl0dGVyLmVtaXQoJ2FjY2Vzc190b2tlbicsIHsgZXJyb3I6IGVycm9yIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlTmV4dFBvbGwodGltZVVudGlsUmVmcmVzaEluTXMpIHtcbiAgICAgICAgdGhpcy5wb2xsZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wb2xsZXJMb29wKCksIHRpbWVVbnRpbFJlZnJlc2hJbk1zKTtcbiAgICAgICAgaWYgKHRoaXMucG9sbGVyVGltZXIudW5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMucG9sbGVyVGltZXIudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTb2xlbHkgcmVzcG9uc2libGUgZm9yIGJ1aWxkaW5nIHRoZSBIVFRQIHJlcXVlc3QgYW5kIGNhbGxpbmcgdGhlIHRva2VuIHNlcnZpY2UuXG4gICAgICovXG4gICAgYXN5bmMgcmVxdWVzdEFjY2Vzc1Rva2VuKCkge1xuICAgICAgICAvLyBTZXQgaXNzdWVkIGF0IHRpbWUgdG8gNSBzZWNvbmRzIGluIHRoZSBwYXN0IHRvIGFjY291bnQgZm9yIGNsb2NrIHNrZXdcbiAgICAgICAgY29uc3QgSVNTVUVEX0FUX0JVRkZFUl9JTl9TRUNPTkRTID0gNTtcbiAgICAgICAgY29uc3QgTUFYX0VYUElSWV9JTl9TRUNPTkRTID0gNjA7XG4gICAgICAgIC8vIEZpbmFsIGV4cGlyeSB0aW1lIHRha2VzIGludG8gYWNjb3VudCB0aGUgaXNzdWVkIGF0IHRpbWUsIHNvIG5lZWQgdG8gc3VidHJhY3QgSUFUIGJ1ZmZlclxuICAgICAgICBjb25zdCBFWFBJUllfSU5fU0VDT05EUyA9IE1BWF9FWFBJUllfSU5fU0VDT05EUyAtIElTU1VFRF9BVF9CVUZGRVJfSU5fU0VDT05EUztcbiAgICAgICAgY29uc3QganRpID0gdXVpZCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VVRDSW5TZWNvbmRzID0gTWF0aC5yb3VuZChEYXRlLm5vdygpIC8gMTAwMCkgLSB0aGlzLmNsb2NrU2tld0luU2Vjb25kcztcbiAgICAgICAgY29uc3Qgand0Qm9keSA9IHtcbiAgICAgICAgICAgIGlzczogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHN1YjogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1ZDogdGhpcy5hdXRoU2VydmVyLFxuICAgICAgICAgICAgaWF0OiBjdXJyZW50VVRDSW5TZWNvbmRzIC0gSVNTVUVEX0FUX0JVRkZFUl9JTl9TRUNPTkRTLFxuICAgICAgICAgICAgZXhwOiBjdXJyZW50VVRDSW5TZWNvbmRzICsgRVhQSVJZX0lOX1NFQ09ORFMsXG4gICAgICAgICAgICBqdGksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IGltcG9ydFBLQ1M4KHRoaXMuY2xpZW50S2V5LCAnUlMyNTYnKTtcbiAgICAgICAgY29uc3Qgc2lnbmVkSnd0ID0gYXdhaXQgbmV3IFNpZ25KV1Qoand0Qm9keSlcbiAgICAgICAgICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6IHRoaXMuYWxnLCBraWQ6IHRoaXMua2V5SWQsIHR5cDogJ0pXVCcgfSlcbiAgICAgICAgICAgIC5zaWduKGtleSk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gYGdyYW50X3R5cGU9JHt0aGlzLmdyYW50VHlwZX0mY2xpZW50X2Fzc2VydGlvbl90eXBlPSR7dGhpcy5jbGllbnRBc3NlcnRpb25UeXBlfSZjbGllbnRfYXNzZXJ0aW9uPSR7c2lnbmVkSnd0fSZzY29wZT0ke3RoaXMuc2NvcGV9YDtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5FbmRwb2ludCA9IGAke3RoaXMuYXV0aFNlcnZlcn0vdG9rZW5gO1xuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBhY2Nlc3NUb2tlbkVuZHBvaW50LFxuICAgICAgICAgICAgYm9keTogcmVxdWVzdEJvZHksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0VGltZW91dDogMTAwMDAsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQubWFrZVJlcXVlc3QocmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBnZXRBY2Nlc3NUb2tlbigpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBjYWNoZWQgdG9rZW4gaWYgaXQgaXMgc3RpbGwgdmFsaWQsIG90aGVyd2lzZSB3YWl0IGZvciBhIG5ldyB0b2tlbi5cbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFRva2VuKHRoaXMuYWNjZXNzVG9rZW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdG9wIHBvbGxlciBmaXJzdCBpbiBvcmRlciB0byBtYWtlIHN1cmUgdGhhdCBpdCdzIG5vdCBzbGVlcGluZyBpZiB3ZSBuZWVkIGEgdG9rZW4gaW1tZWRpYXRlbHlcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGl0IGNvdWxkIGJlIGhvdXJzIGJlZm9yZSB0aGUgZXhwaXJhdGlvbiB0aW1lIHBhc3NlcyBub3JtYWxseVxuICAgICAgICB0aGlzLnN0b3BQb2xsZXIoKTtcbiAgICAgICAgLy8gc3RhcnRQb2xsZXIgbmVlZHMgdG8gYmUgY2FsbGVkIHNvbWV3aGVyZSwgZWl0aGVyIGxhemlseSB3aGVuIGEgdG9rZW4gaXMgZmlyc3QgcmVxdWVzdGVkLCBvciBhdCBpbnN0YW50aWF0aW9uLlxuICAgICAgICAvLyBEb2luZyBpdCBsYXppbHkgY3VycmVudGx5XG4gICAgICAgIHRoaXMucG9sbGVyTG9vcCgpLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5vbmNlKCdhY2Nlc3NfdG9rZW4nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoJ3Rva2VuJyBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGV2ZW50LnRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudC5lcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjbGVhclRva2VuKCkge1xuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpc1ZhbGlkVG9rZW4odG9rZW4pIHtcbiAgICAgICAgcmV0dXJuICh0eXBlb2YgdG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0b2tlbiAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgdG9rZW4uZXhwaXJlc19pbiA8IERhdGUubm93KCkgLyAxMDAwKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b2tlbi1tYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uuid: () => (/* reexport safe */ _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(rsc)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n\n//# sourceMappingURL=uuid.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3V1aWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFDMUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGFtcGxlLXRvZG9zLWFwcC8uL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9saWIvdXVpZC5qcz84ZGE5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICdAbHVrZWVkL3V1aWQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXVpZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextBatch: () => (/* binding */ ContextBatch)\n/* harmony export */ });\n/* harmony import */ var _lib_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/uuid */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n\nconst MAX_EVENT_SIZE_IN_KB = 32;\nconst MAX_BATCH_SIZE_IN_KB = 480; //  (500 KB is the limit, leaving some padding)\nclass ContextBatch {\n    id = (0,_lib_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)();\n    items = [];\n    sizeInBytes = 0;\n    maxEventCount;\n    constructor(maxEventCount) {\n        this.maxEventCount = Math.max(1, maxEventCount);\n    }\n    tryAdd(item) {\n        if (this.length === this.maxEventCount)\n            return {\n                success: false,\n                message: `Event limit of ${this.maxEventCount} has been exceeded.`,\n            };\n        const eventSize = this.calculateSize(item.context);\n        if (eventSize > MAX_EVENT_SIZE_IN_KB * 1024) {\n            return {\n                success: false,\n                message: `Event exceeds maximum event size of ${MAX_EVENT_SIZE_IN_KB} KB`,\n            };\n        }\n        if (this.sizeInBytes + eventSize > MAX_BATCH_SIZE_IN_KB * 1024) {\n            return {\n                success: false,\n                message: `Event has caused batch size to exceed ${MAX_BATCH_SIZE_IN_KB} KB`,\n            };\n        }\n        this.items.push(item);\n        this.sizeInBytes += eventSize;\n        return { success: true };\n    }\n    get length() {\n        return this.items.length;\n    }\n    calculateSize(ctx) {\n        return encodeURI(JSON.stringify(ctx.event)).split(/%..|i/).length;\n    }\n    getEvents() {\n        const events = this.items.map(({ context }) => context.event);\n        return events;\n    }\n    getContexts() {\n        return this.items.map((item) => item.context);\n    }\n    resolveEvents() {\n        this.items.forEach(({ resolver, context }) => resolver(context));\n    }\n}\n//# sourceMappingURL=context-batch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vY29udGV4dC1iYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzQztBQUN0QztBQUNBLGtDQUFrQztBQUMzQjtBQUNQLFNBQVMsK0NBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxzQkFBc0I7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxzQkFBc0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxTQUFTO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtQkFBbUI7QUFDakQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vY29udGV4dC1iYXRjaC5qcz9hMDE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHV1aWQgfSBmcm9tICcuLi8uLi9saWIvdXVpZCc7XG5jb25zdCBNQVhfRVZFTlRfU0laRV9JTl9LQiA9IDMyO1xuY29uc3QgTUFYX0JBVENIX1NJWkVfSU5fS0IgPSA0ODA7IC8vICAoNTAwIEtCIGlzIHRoZSBsaW1pdCwgbGVhdmluZyBzb21lIHBhZGRpbmcpXG5leHBvcnQgY2xhc3MgQ29udGV4dEJhdGNoIHtcbiAgICBpZCA9IHV1aWQoKTtcbiAgICBpdGVtcyA9IFtdO1xuICAgIHNpemVJbkJ5dGVzID0gMDtcbiAgICBtYXhFdmVudENvdW50O1xuICAgIGNvbnN0cnVjdG9yKG1heEV2ZW50Q291bnQpIHtcbiAgICAgICAgdGhpcy5tYXhFdmVudENvdW50ID0gTWF0aC5tYXgoMSwgbWF4RXZlbnRDb3VudCk7XG4gICAgfVxuICAgIHRyeUFkZChpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gdGhpcy5tYXhFdmVudENvdW50KVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXZlbnQgbGltaXQgb2YgJHt0aGlzLm1heEV2ZW50Q291bnR9IGhhcyBiZWVuIGV4Y2VlZGVkLmAsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBldmVudFNpemUgPSB0aGlzLmNhbGN1bGF0ZVNpemUoaXRlbS5jb250ZXh0KTtcbiAgICAgICAgaWYgKGV2ZW50U2l6ZSA+IE1BWF9FVkVOVF9TSVpFX0lOX0tCICogMTAyNCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXZlbnQgZXhjZWVkcyBtYXhpbXVtIGV2ZW50IHNpemUgb2YgJHtNQVhfRVZFTlRfU0laRV9JTl9LQn0gS0JgLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zaXplSW5CeXRlcyArIGV2ZW50U2l6ZSA+IE1BWF9CQVRDSF9TSVpFX0lOX0tCICogMTAyNCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXZlbnQgaGFzIGNhdXNlZCBiYXRjaCBzaXplIHRvIGV4Y2VlZCAke01BWF9CQVRDSF9TSVpFX0lOX0tCfSBLQmAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgdGhpcy5zaXplSW5CeXRlcyArPSBldmVudFNpemU7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgIH1cbiAgICBjYWxjdWxhdGVTaXplKGN0eCkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJKEpTT04uc3RyaW5naWZ5KGN0eC5ldmVudCkpLnNwbGl0KC8lLi58aS8pLmxlbmd0aDtcbiAgICB9XG4gICAgZ2V0RXZlbnRzKCkge1xuICAgICAgICBjb25zdCBldmVudHMgPSB0aGlzLml0ZW1zLm1hcCgoeyBjb250ZXh0IH0pID0+IGNvbnRleHQuZXZlbnQpO1xuICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cbiAgICBnZXRDb250ZXh0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLmNvbnRleHQpO1xuICAgIH1cbiAgICByZXNvbHZlRXZlbnRzKCkge1xuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKHsgcmVzb2x2ZXIsIGNvbnRleHQgfSkgPT4gcmVzb2x2ZXIoY29udGV4dCkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQtYmF0Y2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createConfiguredNodePlugin: () => (/* binding */ createConfiguredNodePlugin),\n/* harmony export */   createNodePlugin: () => (/* binding */ createNodePlugin)\n/* harmony export */ });\n/* harmony import */ var _publisher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./publisher */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/version */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/env */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\");\n\n\n\nfunction normalizeEvent(ctx) {\n    ctx.updateEvent('context.library.name', '@segment/analytics-node');\n    ctx.updateEvent('context.library.version', _generated_version__WEBPACK_IMPORTED_MODULE_1__.version);\n    const runtime = (0,_lib_env__WEBPACK_IMPORTED_MODULE_2__.detectRuntime)();\n    if (runtime === 'node') {\n        // eslint-disable-next-line no-restricted-globals\n        ctx.updateEvent('_metadata.nodeVersion', process.version);\n    }\n    ctx.updateEvent('_metadata.jsRuntime', runtime);\n}\nfunction createNodePlugin(publisher) {\n    function action(ctx) {\n        normalizeEvent(ctx);\n        return publisher.enqueue(ctx);\n    }\n    return {\n        name: 'Segment.io',\n        type: 'destination',\n        version: '1.0.0',\n        isLoaded: () => true,\n        load: () => Promise.resolve(),\n        alias: action,\n        group: action,\n        identify: action,\n        page: action,\n        screen: action,\n        track: action,\n    };\n}\nconst createConfiguredNodePlugin = (props, emitter) => {\n    const publisher = new _publisher__WEBPACK_IMPORTED_MODULE_0__.Publisher(props, emitter);\n    return {\n        publisher: publisher,\n        plugin: createNodePlugin(publisher),\n    };\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDVTtBQUNKO0FBQzlDO0FBQ0E7QUFDQSwrQ0FBK0MsdURBQU87QUFDdEQsb0JBQW9CLHVEQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwwQkFBMEIsaURBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhhbXBsZS10b2Rvcy1hcHAvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanM/NzFkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQdWJsaXNoZXIgfSBmcm9tICcuL3B1Ymxpc2hlcic7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vLi4vZ2VuZXJhdGVkL3ZlcnNpb24nO1xuaW1wb3J0IHsgZGV0ZWN0UnVudGltZSB9IGZyb20gJy4uLy4uL2xpYi9lbnYnO1xuZnVuY3Rpb24gbm9ybWFsaXplRXZlbnQoY3R4KSB7XG4gICAgY3R4LnVwZGF0ZUV2ZW50KCdjb250ZXh0LmxpYnJhcnkubmFtZScsICdAc2VnbWVudC9hbmFseXRpY3Mtbm9kZScpO1xuICAgIGN0eC51cGRhdGVFdmVudCgnY29udGV4dC5saWJyYXJ5LnZlcnNpb24nLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBydW50aW1lID0gZGV0ZWN0UnVudGltZSgpO1xuICAgIGlmIChydW50aW1lID09PSAnbm9kZScpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgICAgICBjdHgudXBkYXRlRXZlbnQoJ19tZXRhZGF0YS5ub2RlVmVyc2lvbicsIHByb2Nlc3MudmVyc2lvbik7XG4gICAgfVxuICAgIGN0eC51cGRhdGVFdmVudCgnX21ldGFkYXRhLmpzUnVudGltZScsIHJ1bnRpbWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5vZGVQbHVnaW4ocHVibGlzaGVyKSB7XG4gICAgZnVuY3Rpb24gYWN0aW9uKGN0eCkge1xuICAgICAgICBub3JtYWxpemVFdmVudChjdHgpO1xuICAgICAgICByZXR1cm4gcHVibGlzaGVyLmVucXVldWUoY3R4KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJ1NlZ21lbnQuaW8nLFxuICAgICAgICB0eXBlOiAnZGVzdGluYXRpb24nLFxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICBpc0xvYWRlZDogKCkgPT4gdHJ1ZSxcbiAgICAgICAgbG9hZDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgIGFsaWFzOiBhY3Rpb24sXG4gICAgICAgIGdyb3VwOiBhY3Rpb24sXG4gICAgICAgIGlkZW50aWZ5OiBhY3Rpb24sXG4gICAgICAgIHBhZ2U6IGFjdGlvbixcbiAgICAgICAgc2NyZWVuOiBhY3Rpb24sXG4gICAgICAgIHRyYWNrOiBhY3Rpb24sXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBjcmVhdGVDb25maWd1cmVkTm9kZVBsdWdpbiA9IChwcm9wcywgZW1pdHRlcikgPT4ge1xuICAgIGNvbnN0IHB1Ymxpc2hlciA9IG5ldyBQdWJsaXNoZXIocHJvcHMsIGVtaXR0ZXIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHB1Ymxpc2hlcjogcHVibGlzaGVyLFxuICAgICAgICBwbHVnaW46IGNyZWF0ZU5vZGVQbHVnaW4ocHVibGlzaGVyKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Publisher: () => (/* binding */ Publisher)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n/* harmony import */ var _lib_create_url__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/create-url */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n/* harmony import */ var _context_batch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context-batch */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js\");\n/* harmony import */ var _lib_token_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/token-manager */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js\");\n\n\n\n\n\nfunction sleep(timeoutInMs) {\n    return new Promise((resolve) => setTimeout(resolve, timeoutInMs));\n}\nfunction noop() { }\n/**\n * The Publisher is responsible for batching events and sending them to the Segment API.\n */\nclass Publisher {\n    pendingFlushTimeout;\n    _batch;\n    _flushInterval;\n    _flushAt;\n    _maxRetries;\n    _url;\n    _flushPendingItemsCount;\n    _httpRequestTimeout;\n    _emitter;\n    _disable;\n    _httpClient;\n    _writeKey;\n    _tokenManager;\n    constructor({ host, path, maxRetries, flushAt, flushInterval, writeKey, httpRequestTimeout, httpClient, disable, oauthSettings, }, emitter) {\n        this._emitter = emitter;\n        this._maxRetries = maxRetries;\n        this._flushAt = Math.max(flushAt, 1);\n        this._flushInterval = flushInterval;\n        this._url = (0,_lib_create_url__WEBPACK_IMPORTED_MODULE_0__.tryCreateFormattedUrl)(host ?? 'https://api.segment.io', path ?? '/v1/batch');\n        this._httpRequestTimeout = httpRequestTimeout ?? 10000;\n        this._disable = Boolean(disable);\n        this._httpClient = httpClient;\n        this._writeKey = writeKey;\n        if (oauthSettings) {\n            this._tokenManager = new _lib_token_manager__WEBPACK_IMPORTED_MODULE_2__.TokenManager({\n                ...oauthSettings,\n                httpClient: oauthSettings.httpClient ?? httpClient,\n                maxRetries: oauthSettings.maxRetries ?? maxRetries,\n            });\n        }\n    }\n    createBatch() {\n        this.pendingFlushTimeout && clearTimeout(this.pendingFlushTimeout);\n        const batch = new _context_batch__WEBPACK_IMPORTED_MODULE_1__.ContextBatch(this._flushAt);\n        this._batch = batch;\n        this.pendingFlushTimeout = setTimeout(() => {\n            if (batch === this._batch) {\n                this._batch = undefined;\n            }\n            this.pendingFlushTimeout = undefined;\n            if (batch.length) {\n                this.send(batch).catch(noop);\n            }\n        }, this._flushInterval);\n        return batch;\n    }\n    clearBatch() {\n        this.pendingFlushTimeout && clearTimeout(this.pendingFlushTimeout);\n        this._batch = undefined;\n    }\n    flush(pendingItemsCount) {\n        if (!pendingItemsCount) {\n            // if number of pending items is 0, there will never be anything else entering the batch, since the app is closed.\n            if (this._tokenManager) {\n                this._tokenManager.stopPoller();\n            }\n            return;\n        }\n        this._flushPendingItemsCount = pendingItemsCount;\n        // if batch is empty, there's nothing to flush, and when things come in, enqueue will handle them.\n        if (!this._batch)\n            return;\n        // the number of globally pending items will always be larger or the same as batch size.\n        // Any mismatch is because some globally pending items are in plugins.\n        const isExpectingNoMoreItems = this._batch.length === pendingItemsCount;\n        if (isExpectingNoMoreItems) {\n            this.send(this._batch)\n                .catch(noop)\n                .finally(() => {\n                // stop poller so program can exit ().\n                if (this._tokenManager) {\n                    this._tokenManager.stopPoller();\n                }\n            });\n            this.clearBatch();\n        }\n    }\n    /**\n     * Enqueues the context for future delivery.\n     * @param ctx - Context containing a Segment event.\n     * @returns a promise that resolves with the context after the event has been delivered.\n     */\n    enqueue(ctx) {\n        const batch = this._batch ?? this.createBatch();\n        const { promise: ctxPromise, resolve } = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_3__.createDeferred)();\n        const pendingItem = {\n            context: ctx,\n            resolver: resolve,\n        };\n        /*\n          The following logic ensures that a batch is never orphaned,\n          and is always sent before a new batch is created.\n    \n          Add an event to the existing batch.\n            Success: Check if batch is full or no more items are expected to come in (i.e. closing). If so, send batch.\n            Failure: Assume event is too big to fit in current batch - send existing batch.\n              Add an event to the new batch.\n                Success: Check if batch is full and send if it is.\n                Failure: Event exceeds maximum size (it will never fit), fail the event.\n        */\n        const addStatus = batch.tryAdd(pendingItem);\n        if (addStatus.success) {\n            const isExpectingNoMoreItems = batch.length === this._flushPendingItemsCount;\n            const isFull = batch.length === this._flushAt;\n            if (isFull || isExpectingNoMoreItems) {\n                this.send(batch).catch(noop);\n                this.clearBatch();\n            }\n            return ctxPromise;\n        }\n        // If the new item causes the maximimum event size to be exceeded, send the current batch and create a new one.\n        if (batch.length) {\n            this.send(batch).catch(noop);\n            this.clearBatch();\n        }\n        const fallbackBatch = this.createBatch();\n        const fbAddStatus = fallbackBatch.tryAdd(pendingItem);\n        if (fbAddStatus.success) {\n            const isExpectingNoMoreItems = fallbackBatch.length === this._flushPendingItemsCount;\n            if (isExpectingNoMoreItems) {\n                this.send(fallbackBatch).catch(noop);\n                this.clearBatch();\n            }\n            return ctxPromise;\n        }\n        else {\n            // this should only occur if max event size is exceeded\n            ctx.setFailedDelivery({\n                reason: new Error(fbAddStatus.message),\n            });\n            return Promise.resolve(ctx);\n        }\n    }\n    async send(batch) {\n        if (this._flushPendingItemsCount) {\n            this._flushPendingItemsCount -= batch.length;\n        }\n        const events = batch.getEvents();\n        const maxAttempts = this._maxRetries + 1;\n        let currentAttempt = 0;\n        while (currentAttempt < maxAttempts) {\n            currentAttempt++;\n            let requestedRetryTimeout;\n            let failureReason;\n            try {\n                if (this._disable) {\n                    return batch.resolveEvents();\n                }\n                let authString = undefined;\n                if (this._tokenManager) {\n                    const token = await this._tokenManager.getAccessToken();\n                    if (token && token.access_token) {\n                        authString = `Bearer ${token.access_token}`;\n                    }\n                }\n                const headers = {\n                    'Content-Type': 'application/json',\n                    'User-Agent': 'analytics-node-next/latest',\n                    ...(authString ? { Authorization: authString } : {}),\n                };\n                const request = {\n                    url: this._url,\n                    method: 'POST',\n                    headers: headers,\n                    body: JSON.stringify({\n                        batch: events,\n                        writeKey: this._writeKey,\n                        sentAt: new Date(),\n                    }),\n                    httpRequestTimeout: this._httpRequestTimeout,\n                };\n                this._emitter.emit('http_request', {\n                    body: request.body,\n                    method: request.method,\n                    url: request.url,\n                    headers: request.headers,\n                });\n                const response = await this._httpClient.makeRequest(request);\n                if (response.status >= 200 && response.status < 300) {\n                    // Successfully sent events, so exit!\n                    batch.resolveEvents();\n                    return;\n                }\n                else if (this._tokenManager &&\n                    (response.status === 400 ||\n                        response.status === 401 ||\n                        response.status === 403)) {\n                    // Retry with a new OAuth token if we have OAuth data\n                    this._tokenManager.clearToken();\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n                else if (response.status === 400) {\n                    // https://segment.com/docs/connections/sources/catalog/libraries/server/http-api/#max-request-size\n                    // Request either malformed or size exceeded - don't retry.\n                    resolveFailedBatch(batch, new Error(`[${response.status}] ${response.statusText}`));\n                    return;\n                }\n                else if (response.status === 429) {\n                    // Rate limited, wait for the reset time\n                    if (response.headers && 'x-ratelimit-reset' in response.headers) {\n                        const rateLimitResetTimestamp = parseInt(response.headers['x-ratelimit-reset'], 10);\n                        if (isFinite(rateLimitResetTimestamp)) {\n                            requestedRetryTimeout = rateLimitResetTimestamp - Date.now();\n                        }\n                    }\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n                else {\n                    // Treat other errors as transient and retry.\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n            }\n            catch (err) {\n                // Network errors get thrown, retry them.\n                failureReason = err;\n            }\n            // Final attempt failed, update context and resolve events.\n            if (currentAttempt === maxAttempts) {\n                resolveFailedBatch(batch, failureReason);\n                return;\n            }\n            // Retry after attempt-based backoff.\n            await sleep(requestedRetryTimeout\n                ? requestedRetryTimeout\n                : (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.backoff)({\n                    attempt: currentAttempt,\n                    minTimeout: 25,\n                    maxTimeout: 1000,\n                }));\n        }\n    }\n}\nfunction resolveFailedBatch(batch, reason) {\n    batch.getContexts().forEach((ctx) => ctx.setFailedDelivery({ reason }));\n    batch.resolveEvents();\n}\n//# sourceMappingURL=publisher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vcHVibGlzaGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRDtBQUNXO0FBQ0s7QUFDbkI7QUFDUTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUhBQW1IO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNFQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDREQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3REFBWTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrQkFBK0IsRUFBRSxnRkFBYztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG1CQUFtQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDRCQUE0QixJQUFJO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCLElBQUksb0JBQW9CO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGdCQUFnQixJQUFJLG9CQUFvQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDMUY7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQixJQUFJLG9CQUFvQjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdFQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxRQUFRO0FBQ3pFO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4YW1wbGUtdG9kb3MtYXBwLy4vbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL3BsdWdpbnMvc2VnbWVudGlvL3B1Ymxpc2hlci5qcz8zM2Y3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJhY2tvZmYgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyB0cnlDcmVhdGVGb3JtYXR0ZWRVcmwgfSBmcm9tICcuLi8uLi9saWIvY3JlYXRlLXVybCc7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1nZW5lcmljLXV0aWxzJztcbmltcG9ydCB7IENvbnRleHRCYXRjaCB9IGZyb20gJy4vY29udGV4dC1iYXRjaCc7XG5pbXBvcnQgeyBUb2tlbk1hbmFnZXIgfSBmcm9tICcuLi8uLi9saWIvdG9rZW4tbWFuYWdlcic7XG5mdW5jdGlvbiBzbGVlcCh0aW1lb3V0SW5Ncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0SW5NcykpO1xufVxuZnVuY3Rpb24gbm9vcCgpIHsgfVxuLyoqXG4gKiBUaGUgUHVibGlzaGVyIGlzIHJlc3BvbnNpYmxlIGZvciBiYXRjaGluZyBldmVudHMgYW5kIHNlbmRpbmcgdGhlbSB0byB0aGUgU2VnbWVudCBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBQdWJsaXNoZXIge1xuICAgIHBlbmRpbmdGbHVzaFRpbWVvdXQ7XG4gICAgX2JhdGNoO1xuICAgIF9mbHVzaEludGVydmFsO1xuICAgIF9mbHVzaEF0O1xuICAgIF9tYXhSZXRyaWVzO1xuICAgIF91cmw7XG4gICAgX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQ7XG4gICAgX2h0dHBSZXF1ZXN0VGltZW91dDtcbiAgICBfZW1pdHRlcjtcbiAgICBfZGlzYWJsZTtcbiAgICBfaHR0cENsaWVudDtcbiAgICBfd3JpdGVLZXk7XG4gICAgX3Rva2VuTWFuYWdlcjtcbiAgICBjb25zdHJ1Y3Rvcih7IGhvc3QsIHBhdGgsIG1heFJldHJpZXMsIGZsdXNoQXQsIGZsdXNoSW50ZXJ2YWwsIHdyaXRlS2V5LCBodHRwUmVxdWVzdFRpbWVvdXQsIGh0dHBDbGllbnQsIGRpc2FibGUsIG9hdXRoU2V0dGluZ3MsIH0sIGVtaXR0ZXIpIHtcbiAgICAgICAgdGhpcy5fZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgIHRoaXMuX21heFJldHJpZXMgPSBtYXhSZXRyaWVzO1xuICAgICAgICB0aGlzLl9mbHVzaEF0ID0gTWF0aC5tYXgoZmx1c2hBdCwgMSk7XG4gICAgICAgIHRoaXMuX2ZsdXNoSW50ZXJ2YWwgPSBmbHVzaEludGVydmFsO1xuICAgICAgICB0aGlzLl91cmwgPSB0cnlDcmVhdGVGb3JtYXR0ZWRVcmwoaG9zdCA/PyAnaHR0cHM6Ly9hcGkuc2VnbWVudC5pbycsIHBhdGggPz8gJy92MS9iYXRjaCcpO1xuICAgICAgICB0aGlzLl9odHRwUmVxdWVzdFRpbWVvdXQgPSBodHRwUmVxdWVzdFRpbWVvdXQgPz8gMTAwMDA7XG4gICAgICAgIHRoaXMuX2Rpc2FibGUgPSBCb29sZWFuKGRpc2FibGUpO1xuICAgICAgICB0aGlzLl9odHRwQ2xpZW50ID0gaHR0cENsaWVudDtcbiAgICAgICAgdGhpcy5fd3JpdGVLZXkgPSB3cml0ZUtleTtcbiAgICAgICAgaWYgKG9hdXRoU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rva2VuTWFuYWdlciA9IG5ldyBUb2tlbk1hbmFnZXIoe1xuICAgICAgICAgICAgICAgIC4uLm9hdXRoU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgaHR0cENsaWVudDogb2F1dGhTZXR0aW5ncy5odHRwQ2xpZW50ID8/IGh0dHBDbGllbnQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogb2F1dGhTZXR0aW5ncy5tYXhSZXRyaWVzID8/IG1heFJldHJpZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVCYXRjaCgpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nRmx1c2hUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdGbHVzaFRpbWVvdXQpO1xuICAgICAgICBjb25zdCBiYXRjaCA9IG5ldyBDb250ZXh0QmF0Y2godGhpcy5fZmx1c2hBdCk7XG4gICAgICAgIHRoaXMuX2JhdGNoID0gYmF0Y2g7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZsdXNoVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGJhdGNoID09PSB0aGlzLl9iYXRjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2JhdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRmx1c2hUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGJhdGNoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZChiYXRjaCkuY2F0Y2gobm9vcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMuX2ZsdXNoSW50ZXJ2YWwpO1xuICAgICAgICByZXR1cm4gYmF0Y2g7XG4gICAgfVxuICAgIGNsZWFyQmF0Y2goKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZsdXNoVGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nRmx1c2hUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5fYmF0Y2ggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZsdXNoKHBlbmRpbmdJdGVtc0NvdW50KSB7XG4gICAgICAgIGlmICghcGVuZGluZ0l0ZW1zQ291bnQpIHtcbiAgICAgICAgICAgIC8vIGlmIG51bWJlciBvZiBwZW5kaW5nIGl0ZW1zIGlzIDAsIHRoZXJlIHdpbGwgbmV2ZXIgYmUgYW55dGhpbmcgZWxzZSBlbnRlcmluZyB0aGUgYmF0Y2gsIHNpbmNlIHRoZSBhcHAgaXMgY2xvc2VkLlxuICAgICAgICAgICAgaWYgKHRoaXMuX3Rva2VuTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Rva2VuTWFuYWdlci5zdG9wUG9sbGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmx1c2hQZW5kaW5nSXRlbXNDb3VudCA9IHBlbmRpbmdJdGVtc0NvdW50O1xuICAgICAgICAvLyBpZiBiYXRjaCBpcyBlbXB0eSwgdGhlcmUncyBub3RoaW5nIHRvIGZsdXNoLCBhbmQgd2hlbiB0aGluZ3MgY29tZSBpbiwgZW5xdWV1ZSB3aWxsIGhhbmRsZSB0aGVtLlxuICAgICAgICBpZiAoIXRoaXMuX2JhdGNoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyB0aGUgbnVtYmVyIG9mIGdsb2JhbGx5IHBlbmRpbmcgaXRlbXMgd2lsbCBhbHdheXMgYmUgbGFyZ2VyIG9yIHRoZSBzYW1lIGFzIGJhdGNoIHNpemUuXG4gICAgICAgIC8vIEFueSBtaXNtYXRjaCBpcyBiZWNhdXNlIHNvbWUgZ2xvYmFsbHkgcGVuZGluZyBpdGVtcyBhcmUgaW4gcGx1Z2lucy5cbiAgICAgICAgY29uc3QgaXNFeHBlY3RpbmdOb01vcmVJdGVtcyA9IHRoaXMuX2JhdGNoLmxlbmd0aCA9PT0gcGVuZGluZ0l0ZW1zQ291bnQ7XG4gICAgICAgIGlmIChpc0V4cGVjdGluZ05vTW9yZUl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmQodGhpcy5fYmF0Y2gpXG4gICAgICAgICAgICAgICAgLmNhdGNoKG5vb3ApXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHN0b3AgcG9sbGVyIHNvIHByb2dyYW0gY2FuIGV4aXQgKCkuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Rva2VuTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90b2tlbk1hbmFnZXIuc3RvcFBvbGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jbGVhckJhdGNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5xdWV1ZXMgdGhlIGNvbnRleHQgZm9yIGZ1dHVyZSBkZWxpdmVyeS5cbiAgICAgKiBAcGFyYW0gY3R4IC0gQ29udGV4dCBjb250YWluaW5nIGEgU2VnbWVudCBldmVudC5cbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBjb250ZXh0IGFmdGVyIHRoZSBldmVudCBoYXMgYmVlbiBkZWxpdmVyZWQuXG4gICAgICovXG4gICAgZW5xdWV1ZShjdHgpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLl9iYXRjaCA/PyB0aGlzLmNyZWF0ZUJhdGNoKCk7XG4gICAgICAgIGNvbnN0IHsgcHJvbWlzZTogY3R4UHJvbWlzZSwgcmVzb2x2ZSB9ID0gY3JlYXRlRGVmZXJyZWQoKTtcbiAgICAgICAgY29uc3QgcGVuZGluZ0l0ZW0gPSB7XG4gICAgICAgICAgICBjb250ZXh0OiBjdHgsXG4gICAgICAgICAgICByZXNvbHZlcjogcmVzb2x2ZSxcbiAgICAgICAgfTtcbiAgICAgICAgLypcbiAgICAgICAgICBUaGUgZm9sbG93aW5nIGxvZ2ljIGVuc3VyZXMgdGhhdCBhIGJhdGNoIGlzIG5ldmVyIG9ycGhhbmVkLFxuICAgICAgICAgIGFuZCBpcyBhbHdheXMgc2VudCBiZWZvcmUgYSBuZXcgYmF0Y2ggaXMgY3JlYXRlZC5cbiAgICBcbiAgICAgICAgICBBZGQgYW4gZXZlbnQgdG8gdGhlIGV4aXN0aW5nIGJhdGNoLlxuICAgICAgICAgICAgU3VjY2VzczogQ2hlY2sgaWYgYmF0Y2ggaXMgZnVsbCBvciBubyBtb3JlIGl0ZW1zIGFyZSBleHBlY3RlZCB0byBjb21lIGluIChpLmUuIGNsb3NpbmcpLiBJZiBzbywgc2VuZCBiYXRjaC5cbiAgICAgICAgICAgIEZhaWx1cmU6IEFzc3VtZSBldmVudCBpcyB0b28gYmlnIHRvIGZpdCBpbiBjdXJyZW50IGJhdGNoIC0gc2VuZCBleGlzdGluZyBiYXRjaC5cbiAgICAgICAgICAgICAgQWRkIGFuIGV2ZW50IHRvIHRoZSBuZXcgYmF0Y2guXG4gICAgICAgICAgICAgICAgU3VjY2VzczogQ2hlY2sgaWYgYmF0Y2ggaXMgZnVsbCBhbmQgc2VuZCBpZiBpdCBpcy5cbiAgICAgICAgICAgICAgICBGYWlsdXJlOiBFdmVudCBleGNlZWRzIG1heGltdW0gc2l6ZSAoaXQgd2lsbCBuZXZlciBmaXQpLCBmYWlsIHRoZSBldmVudC5cbiAgICAgICAgKi9cbiAgICAgICAgY29uc3QgYWRkU3RhdHVzID0gYmF0Y2gudHJ5QWRkKHBlbmRpbmdJdGVtKTtcbiAgICAgICAgaWYgKGFkZFN0YXR1cy5zdWNjZXNzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0V4cGVjdGluZ05vTW9yZUl0ZW1zID0gYmF0Y2gubGVuZ3RoID09PSB0aGlzLl9mbHVzaFBlbmRpbmdJdGVtc0NvdW50O1xuICAgICAgICAgICAgY29uc3QgaXNGdWxsID0gYmF0Y2gubGVuZ3RoID09PSB0aGlzLl9mbHVzaEF0O1xuICAgICAgICAgICAgaWYgKGlzRnVsbCB8fCBpc0V4cGVjdGluZ05vTW9yZUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKGJhdGNoKS5jYXRjaChub29wKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQmF0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdHhQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBuZXcgaXRlbSBjYXVzZXMgdGhlIG1heGltaW11bSBldmVudCBzaXplIHRvIGJlIGV4Y2VlZGVkLCBzZW5kIHRoZSBjdXJyZW50IGJhdGNoIGFuZCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgICBpZiAoYmF0Y2gubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmQoYmF0Y2gpLmNhdGNoKG5vb3ApO1xuICAgICAgICAgICAgdGhpcy5jbGVhckJhdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmFsbGJhY2tCYXRjaCA9IHRoaXMuY3JlYXRlQmF0Y2goKTtcbiAgICAgICAgY29uc3QgZmJBZGRTdGF0dXMgPSBmYWxsYmFja0JhdGNoLnRyeUFkZChwZW5kaW5nSXRlbSk7XG4gICAgICAgIGlmIChmYkFkZFN0YXR1cy5zdWNjZXNzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0V4cGVjdGluZ05vTW9yZUl0ZW1zID0gZmFsbGJhY2tCYXRjaC5sZW5ndGggPT09IHRoaXMuX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQ7XG4gICAgICAgICAgICBpZiAoaXNFeHBlY3RpbmdOb01vcmVJdGVtcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZChmYWxsYmFja0JhdGNoKS5jYXRjaChub29wKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQmF0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdHhQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGhpcyBzaG91bGQgb25seSBvY2N1ciBpZiBtYXggZXZlbnQgc2l6ZSBpcyBleGNlZWRlZFxuICAgICAgICAgICAgY3R4LnNldEZhaWxlZERlbGl2ZXJ5KHtcbiAgICAgICAgICAgICAgICByZWFzb246IG5ldyBFcnJvcihmYkFkZFN0YXR1cy5tZXNzYWdlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjdHgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmQoYmF0Y2gpIHtcbiAgICAgICAgaWYgKHRoaXMuX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQgLT0gYmF0Y2gubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IGJhdGNoLmdldEV2ZW50cygpO1xuICAgICAgICBjb25zdCBtYXhBdHRlbXB0cyA9IHRoaXMuX21heFJldHJpZXMgKyAxO1xuICAgICAgICBsZXQgY3VycmVudEF0dGVtcHQgPSAwO1xuICAgICAgICB3aGlsZSAoY3VycmVudEF0dGVtcHQgPCBtYXhBdHRlbXB0cykge1xuICAgICAgICAgICAgY3VycmVudEF0dGVtcHQrKztcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ZWRSZXRyeVRpbWVvdXQ7XG4gICAgICAgICAgICBsZXQgZmFpbHVyZVJlYXNvbjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Rpc2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhdGNoLnJlc29sdmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGF1dGhTdHJpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Rva2VuTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuX3Rva2VuTWFuYWdlci5nZXRBY2Nlc3NUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gJiYgdG9rZW4uYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoU3RyaW5nID0gYEJlYXJlciAke3Rva2VuLmFjY2Vzc190b2tlbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ2FuYWx5dGljcy1ub2RlLW5leHQvbGF0ZXN0JyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGF1dGhTdHJpbmcgPyB7IEF1dGhvcml6YXRpb246IGF1dGhTdHJpbmcgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy5fdXJsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2g6IGV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlS2V5OiB0aGlzLl93cml0ZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGh0dHBSZXF1ZXN0VGltZW91dDogdGhpcy5faHR0cFJlcXVlc3RUaW1lb3V0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KCdodHRwX3JlcXVlc3QnLCB7XG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3QuYm9keSxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiByZXF1ZXN0LnVybCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVxdWVzdC5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5faHR0cENsaWVudC5tYWtlUmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3VjY2Vzc2Z1bGx5IHNlbnQgZXZlbnRzLCBzbyBleGl0IVxuICAgICAgICAgICAgICAgICAgICBiYXRjaC5yZXNvbHZlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fdG9rZW5NYW5hZ2VyICYmXG4gICAgICAgICAgICAgICAgICAgIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSB3aXRoIGEgbmV3IE9BdXRoIHRva2VuIGlmIHdlIGhhdmUgT0F1dGggZGF0YVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90b2tlbk1hbmFnZXIuY2xlYXJUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlUmVhc29uID0gbmV3IEVycm9yKGBbJHtyZXNwb25zZS5zdGF0dXN9XSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9odHRwLWFwaS8jbWF4LXJlcXVlc3Qtc2l6ZVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IGVpdGhlciBtYWxmb3JtZWQgb3Igc2l6ZSBleGNlZWRlZCAtIGRvbid0IHJldHJ5LlxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlRmFpbGVkQmF0Y2goYmF0Y2gsIG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSYXRlIGxpbWl0ZWQsIHdhaXQgZm9yIHRoZSByZXNldCB0aW1lXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzICYmICd4LXJhdGVsaW1pdC1yZXNldCcgaW4gcmVzcG9uc2UuaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXAgPSBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzWyd4LXJhdGVsaW1pdC1yZXNldCddLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaW5pdGUocmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkUmV0cnlUaW1lb3V0ID0gcmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXAgLSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZhaWx1cmVSZWFzb24gPSBuZXcgRXJyb3IoYFske3Jlc3BvbnNlLnN0YXR1c31dICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRyZWF0IG90aGVyIGVycm9ycyBhcyB0cmFuc2llbnQgYW5kIHJldHJ5LlxuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlUmVhc29uID0gbmV3IEVycm9yKGBbJHtyZXNwb25zZS5zdGF0dXN9XSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIE5ldHdvcmsgZXJyb3JzIGdldCB0aHJvd24sIHJldHJ5IHRoZW0uXG4gICAgICAgICAgICAgICAgZmFpbHVyZVJlYXNvbiA9IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbmFsIGF0dGVtcHQgZmFpbGVkLCB1cGRhdGUgY29udGV4dCBhbmQgcmVzb2x2ZSBldmVudHMuXG4gICAgICAgICAgICBpZiAoY3VycmVudEF0dGVtcHQgPT09IG1heEF0dGVtcHRzKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZUZhaWxlZEJhdGNoKGJhdGNoLCBmYWlsdXJlUmVhc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXRyeSBhZnRlciBhdHRlbXB0LWJhc2VkIGJhY2tvZmYuXG4gICAgICAgICAgICBhd2FpdCBzbGVlcChyZXF1ZXN0ZWRSZXRyeVRpbWVvdXRcbiAgICAgICAgICAgICAgICA/IHJlcXVlc3RlZFJldHJ5VGltZW91dFxuICAgICAgICAgICAgICAgIDogYmFja29mZih7XG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHQ6IGN1cnJlbnRBdHRlbXB0LFxuICAgICAgICAgICAgICAgICAgICBtaW5UaW1lb3V0OiAyNSxcbiAgICAgICAgICAgICAgICAgICAgbWF4VGltZW91dDogMTAwMCxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiByZXNvbHZlRmFpbGVkQmF0Y2goYmF0Y2gsIHJlYXNvbikge1xuICAgIGJhdGNoLmdldENvbnRleHRzKCkuZm9yRWFjaCgoY3R4KSA9PiBjdHguc2V0RmFpbGVkRGVsaXZlcnkoeyByZWFzb24gfSkpO1xuICAgIGJhdGNoLnJlc29sdmVFdmVudHMoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js\n");

/***/ })

};
;